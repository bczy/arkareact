(this.webpackJsonparkareact=this.webpackJsonparkareact||[]).push([[0],{22:function(e){e.exports=JSON.parse('{"a":[{"layers":[[{"position":[0,2.5,-10],"userDataType":"pink"},{"position":[-2.5,-2.5,-10],"userDataType":"pink"},{"position":[2.5,-2.5,-10],"userDataType":"pink"}]]},{"layers":[[{"position":[0,2.5,-10],"userDataType":"pink"},{"position":[-2.5,-2.5,-10],"userDataType":"red"},{"position":[2.5,-2.5,-10],"userDataType":"pink"}]]},{"layers":[[{"position":[0,2.5,-10],"userDataType":"blue"},{"position":[-5,0,-10],"userDataType":"yellow"},{"position":[0,0,-10],"userDataType":"yellow"},{"position":[5,0,-10],"userDataType":"yellow"},{"position":[0,-2.5,-10],"userDataType":"blue"}],[{"position":[-2.5,1.25,-5],"userDataType":"pink"},{"position":[2.5,1.25,-5],"userDataType":"pink"},{"position":[-2.5,-1.25,-5],"userDataType":"red"},{"position":[2.5,-1.25,-5],"userDataType":"red"}]]}]}')},33:function(e,t,n){e.exports=n.p+"static/media/brick.eed03f13.mp3"},34:function(e,t,n){e.exports=n.p+"static/media/wall.4c0964a4.mp3"},39:function(e,t,n){e.exports=n.p+"static/media/cross.00397b42.jpg"},47:function(e,t,n){e.exports=n(56)},5:function(e){e.exports=JSON.parse('{"a":{"red":{"color":"#fe5e51","bonusProbability":0,"strength":2,"score":500,"isTile":true},"pink":{"color":"#F12C71","bonusProbability":0,"strength":1,"score":250,"isTile":true},"blue":{"color":"#36abb5","bonusProbability":0,"strength":3,"score":1000,"isTile":true},"yellow":{"color":"#f6db5f","bonusProbability":0,"strength":2,"score":500,"isTile":true}},"b":{"side":{"color":"#0b0f17"},"ground":{"color":"#000"},"roof":{"isRoof":true,"color":"#000"},"corner":{"color":"#F12C71","isCorner":true}}}')},55:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),i=n.n(r),o=n(27),s=n.n(o),c=n(10),l=n(59),u=n(41),p=n(7),m=n(28),b=n(22),d=function(){function e(){var t=this;Object(c.a)(this,e),this.buildLevel=function(e){t.tiles.next(b.a[e].layers.flat())},e.instance||(e.instance=this,this.tiles=new l.a([]))}return Object(m.a)(e,[{key:"getLockedLevels",value:function(e){var t=b.a;return Object(p.a)(t).splice(e.length-1,t.length-1)}}]),e}(),f=new d;Object.freeze(d);var h=new function e(){var t=this;return Object(c.a)(this,e),this.addHighScore=function(){var e=Object(p.a)(t.bestScores.value);e[E.currentLevel.value]=E.score.value,e[E.currentLevel.value+1]=0,t.bestScores.next(e),console.log("bestScores",e)},e.instance||(e.instance=this,this.bestScores=new l.a([0]),this.achievements=new l.a([])),e.instance};Object.freeze(h);var x=0,g=1,v=2,y=3,E=new function e(){var t=this;return Object(c.a)(this,e),this.setGameState=function(e){t.gameState.next(e)},this.launchLevel=function(e){t.currentLevel.next(e),t.gameState.next(v)},this.launchGame=function(){t.resetGame(),t.inGame.next(!0)},this.launchBall=function(){t.ballLaunched.next(!0)},this.resetBall=function(){t.balls.value>0?(t.balls.next(t.balls.value-1),t.ballLaunched.next(!1)):t.gameState.next(y)},this.resetGame=function(){t.balls.next(3),t.nbBrickDestroyed.next(0),t.score.next(0),t.inGame.next(!1),t.ballLaunched.next(!1)},this.setGlitching=function(e){return t.glitching.next(e)},this.increaseScore=function(e){t.score.next(t.score.value+e),t.nbBrickDestroyed.value+1===f.tiles.value.length&&(h.addHighScore(),t.gameState.next(y)),t.nbBrickDestroyed.next(t.nbBrickDestroyed.value+1)},e.instance||(e.instance=this,this.gameState=new l.a(x),this.nbBrickDestroyed=new l.a(0),this.balls=new l.a(3),this.score=new l.a(0),this.inGame=new u.a(!1),this.ballLaunched=new u.a(!1),this.currentLevel=new l.a(1),this.glitching=new u.a(!1)),e.instance};Object.freeze(E);var w=n(8),O=n(9);function j(){var e=Object(w.a)(["\n  cursor: pointer;\n  background: transparent;\n  font-size: ",";\n  border-radius: ",";\n  font-family: VT323;\n  color: ",";\n  border: ",";\n  border-style: solid;\n  padding: ",";\n  transition: 0.5s all ease-out;\n  box-shadow: 0.02em 0.02em 0.01em 0.01em;\n  width: 4.5em;\n  ","\n"]);return j=function(){return e},e}var S=O.a.button(j(),(function(e){return e.big?"5em":"2.5em"}),(function(e){return e.big?"4px":"2px"}),(function(e){return e.enabled?"rgba(0,255,0,0.3)":"green"}),(function(e){return e.enabled?"rgba(0,255,0,0.3)":"green"}),(function(e){return e.big?"0.1em 1em":"0.5em 1em"}),(function(e){return e.enabled&&"&:hover { color: rgb(0, 255, 0);border: rgb(0, 255, 0) solid;box-shadow: 0.04em 0.04em 0.02em 0.02em;}"}));function D(e){var t=e.callback,n=e.text,a=e.enabled,r=void 0===a||a,o=e.big,s=void 0!==o&&o;return i.a.createElement("div",null,i.a.createElement(S,{big:s,enabled:r,onClick:function(){r&&t()}},n))}function k(){var e=Object(w.a)(["\n  @keyframes flicker {\n    0% {\n      opacity: 0.27861;\n    }\n    5% {\n      opacity: 0.34769;\n    }\n    10% {\n      opacity: 0.23604;\n    }\n    15% {\n      opacity: 0.90626;\n    }\n    20% {\n      opacity: 0.18128;\n    }\n    25% {\n      opacity: 0.83891;\n    }\n    30% {\n      opacity: 0.65583;\n    }\n    35% {\n      opacity: 0.67807;\n    }\n    40% {\n      opacity: 0.26559;\n    }\n    45% {\n      opacity: 0.84693;\n    }\n    50% {\n      opacity: 0.96019;\n    }\n    55% {\n      opacity: 0.08594;\n    }\n    60% {\n      opacity: 0.20313;\n    }\n    65% {\n      opacity: 0.71988;\n    }\n    70% {\n      opacity: 0.53455;\n    }\n    75% {\n      opacity: 0.37288;\n    }\n    80% {\n      opacity: 0.71428;\n    }\n    85% {\n      opacity: 0.70419;\n    }\n    90% {\n      opacity: 0.7003;\n    }\n    95% {\n      opacity: 0.36108;\n    }\n    100% {\n      opacity: 0.24387;\n    }\n  }\n  @keyframes textShadow {\n    0% {\n      text-shadow: 0.4389924193300864px 0 1px rgba(0, 30, 255, 0.5),\n        -0.4389924193300864px 0 1px rgba(255, 0, 80, 0.3), 0 0 3px;\n    }\n    5% {\n      text-shadow: 2.7928974010788217px 0 1px rgba(0, 30, 255, 0.5),\n        -2.7928974010788217px 0 1px rgba(255, 0, 80, 0.3), 0 0 3px;\n    }\n    10% {\n      text-shadow: 0.02956275843481219px 0 1px rgba(0, 30, 255, 0.5),\n        -0.02956275843481219px 0 1px rgba(255, 0, 80, 0.3), 0 0 3px;\n    }\n    15% {\n      text-shadow: 0.40218538552878136px 0 1px rgba(0, 30, 255, 0.5),\n        -0.40218538552878136px 0 1px rgba(255, 0, 80, 0.3), 0 0 3px;\n    }\n    20% {\n      text-shadow: 3.4794037899852017px 0 1px rgba(0, 30, 255, 0.5),\n        -3.4794037899852017px 0 1px rgba(255, 0, 80, 0.3), 0 0 3px;\n    }\n    25% {\n      text-shadow: 1.6125630401149584px 0 1px rgba(0, 30, 255, 0.5),\n        -1.6125630401149584px 0 1px rgba(255, 0, 80, 0.3), 0 0 3px;\n    }\n    30% {\n      text-shadow: 0.7015590085143956px 0 1px rgba(0, 30, 255, 0.5),\n        -0.7015590085143956px 0 1px rgba(255, 0, 80, 0.3), 0 0 3px;\n    }\n    35% {\n      text-shadow: 3.896914047650351px 0 1px rgba(0, 30, 255, 0.5),\n        -3.896914047650351px 0 1px rgba(255, 0, 80, 0.3), 0 0 3px;\n    }\n    40% {\n      text-shadow: 3.870905614848819px 0 1px rgba(0, 30, 255, 0.5),\n        -3.870905614848819px 0 1px rgba(255, 0, 80, 0.3), 0 0 3px;\n    }\n    45% {\n      text-shadow: 2.231056963361899px 0 1px rgba(0, 30, 255, 0.5),\n        -2.231056963361899px 0 1px rgba(255, 0, 80, 0.3), 0 0 3px;\n    }\n    50% {\n      text-shadow: 0.08084290417898504px 0 1px rgba(0, 30, 255, 0.5),\n        -0.08084290417898504px 0 1px rgba(255, 0, 80, 0.3), 0 0 3px;\n    }\n    55% {\n      text-shadow: 2.3758461067427543px 0 1px rgba(0, 30, 255, 0.5),\n        -2.3758461067427543px 0 1px rgba(255, 0, 80, 0.3), 0 0 3px;\n    }\n    60% {\n      text-shadow: 2.202193051050636px 0 1px rgba(0, 30, 255, 0.5),\n        -2.202193051050636px 0 1px rgba(255, 0, 80, 0.3), 0 0 3px;\n    }\n    65% {\n      text-shadow: 2.8638780614874975px 0 1px rgba(0, 30, 255, 0.5),\n        -2.8638780614874975px 0 1px rgba(255, 0, 80, 0.3), 0 0 3px;\n    }\n    70% {\n      text-shadow: 0.48874025155497314px 0 1px rgba(0, 30, 255, 0.5),\n        -0.48874025155497314px 0 1px rgba(255, 0, 80, 0.3), 0 0 3px;\n    }\n    75% {\n      text-shadow: 1.8948491305757957px 0 1px rgba(0, 30, 255, 0.5),\n        -1.8948491305757957px 0 1px rgba(255, 0, 80, 0.3), 0 0 3px;\n    }\n    80% {\n      text-shadow: 0.0833037308038857px 0 1px rgba(0, 30, 255, 0.5),\n        -0.0833037308038857px 0 1px rgba(255, 0, 80, 0.3), 0 0 3px;\n    }\n    85% {\n      text-shadow: 0.09769827255241735px 0 1px rgba(0, 30, 255, 0.5),\n        -0.09769827255241735px 0 1px rgba(255, 0, 80, 0.3), 0 0 3px;\n    }\n    90% {\n      text-shadow: 3.443339761481782px 0 1px rgba(0, 30, 255, 0.5),\n        -3.443339761481782px 0 1px rgba(255, 0, 80, 0.3), 0 0 3px;\n    }\n    95% {\n      text-shadow: 2.1841838852799786px 0 1px rgba(0, 30, 255, 0.5),\n        -2.1841838852799786px 0 1px rgba(255, 0, 80, 0.3), 0 0 3px;\n    }\n    100% {\n      text-shadow: 2.6208764473832513px 0 1px rgba(0, 30, 255, 0.5),\n        -2.6208764473832513px 0 1px rgba(255, 0, 80, 0.3), 0 0 3px;\n    }\n  }\n  &:after {\n    content: ' ';\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    background: rgba(18, 16, 16, 0.1);\n    opacity: 0;\n    z-index: 2;\n    pointer-events: none;\n    animation: flicker 0.15s infinite;\n  }\n  &:before {\n    content: ' ';\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%),\n      linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));\n    z-index: 2;\n    background-size: 100% 2px, 3px 100%;\n    pointer-events: none;\n  }\n  animation: textShadow 1.6s infinite;\n  font-family: VT323;\n  font-size: 3em;\n  color: #0f0;\n  h1 {\n    margin: 0;\n    width: 100%;\n    text-align: center;\n  }\n"]);return k=function(){return e},e}var L=O.a.div(k());function M(e){var t=e.text;return i.a.createElement(L,null,i.a.createElement("h1",null,t))}function T(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{flexDirection:"column"}},i.a.createElement("div",null,i.a.createElement(M,{text:"ARKEACT"})),i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement(D,{big:!0,callback:function(){E.setGameState(g)},enabled:!0,text:"Start"}))))}var z=n(6),P=n(57),_=n(1),G=n(32),F=n.n(G),C=n(33),B=n.n(C),I=n(34),R=n.n(I);function H(e){var t=e.position,n=e.size,o=void 0===n?[2,2,2]:n,s=e.userData,c=e.id,l=Object(r.useState)(3),u=Object(a.a)(l,2),p=u[0],m=u[1];Object(r.useLayoutEffect)((function(){var e=E.balls.subscribe(m);return function(){return e.unsubscribe()}}),[]);var b=isNaN(s.strength),d=isNaN(s.isCorner),f=Object(r.useState)(),h=Object(a.a)(f,2),x=h[0],g=h[1];var v=null;b?v=R.a:s.isRoof||(v=B.a);var y=new F.a(v),w=Object(z.e)().scene,O=Object(P.c)((function(){return{type:d?"Static":"Kinematic",args:o.map((function(e){return e/2})),position:t,userData:s,onCollide:function(e){y.play(),s.isRoof?(E.resetBall(),E.setGlitching(!0),setTimeout((function(){E.setGlitching(!1),m(p-1)}),300)):b||(s.strength--,s.strength<=0&&(D.position.set(-1e3,-1e3,-100),g(function(){for(var e=new _.Geometry,t=new _.PointsMaterial({color:s.color,size:.9,transparent:!0,depthTest:!1,sizeAttenuation:!0,opacity:.9}),n=0;n<25;n++){var a=2.5*Math.random()-1.25+S.current.position.x,r=2.5*Math.random()-1.25+S.current.position.y,i=2.5*Math.random()-1.25+S.current.position.z,o=new _.Vector3(a,r,i);e.vertices.push(o)}var c=new _.Points(e,t);return c.customRotation=2*Math.random()-1,w.add(c),c}()),E.increaseScore(s.score)))}}})),j=Object(a.a)(O,2),S=j[0],D=j[1];return Object(z.c)((function(){x&&x.material.opacity>0&&(x.material.opacity-=.0075,x.scale.x+=.01,x.scale.y+=.01,x.rotation.x+=x.customRotation/50)})),i.a.createElement(i.a.Fragment,null,s.isTile?i.a.createElement("mesh",{key:c,ref:S,userData:s},i.a.createElement("boxGeometry",{attach:"geometry",args:o}),i.a.createElement("meshStandardMaterial",{attach:"material",wireframe:!0,color:s.color}),i.a.createElement("mesh",{userData:s},i.a.createElement("boxGeometry",{attach:"geometry",args:o.map((function(e){return.99*e}))}),i.a.createElement("meshStandardMaterial",{attach:"material",opacity:.1,color:"#F00"}))):i.a.createElement("mesh",{key:c,ref:S,userData:s},i.a.createElement("boxGeometry",{attach:"geometry",args:o}),i.a.createElement("meshStandardMaterial",{attach:"material",color:s.color})))}var U=n(5);function A(e){var t=e.position,n=e.userData,a=e.id;return i.a.createElement(H,{id:a,position:t,userData:n})}function N(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],o=t[1],s=Object(r.useState)(E.currentLevel.value),c=Object(a.a)(s,2),l=c[0],u=c[1];return Object(r.useEffect)((function(){var e=E.currentLevel.subscribe(u);return e.add(f.tiles.subscribe(o)),f.buildLevel(l),function(){return e.unsubscribe()}}),[l]),n.map((function(e,t){return i.a.createElement(A,{key:t,id:t,position:e.position,userData:U.a[e.userDataType]})}))}function V(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(H,{position:[-12.5,0,0],userData:U.b.side,size:[1,25,130]}),i.a.createElement(H,{position:[12.5,0,0],userData:U.b.side,size:[1,25,130]}),i.a.createElement(H,{position:[0,12.5,0],userData:U.b.side,size:[25,1,130]}),i.a.createElement(H,{position:[0,-12.5,0],userData:U.b.side,size:[25,1,130]}),i.a.createElement(H,{position:[0,0,-12.5],userData:U.b.ground,size:[25,25,1],rotation:Math.PI/2}),i.a.createElement(H,{position:[-12,-12,-12.5],userData:U.b.corner,size:[.25,.25,130],rotation:Math.PI/2}),i.a.createElement(H,{position:[-12,12,-12.5],userData:U.b.corner,size:[.25,.25,130],rotation:Math.PI/2}),i.a.createElement(H,{position:[12,12,-12.5],userData:U.b.corner,size:[.25,.25,130],rotation:Math.PI/2}),i.a.createElement(H,{position:[12,-12,-12.5],userData:U.b.corner,size:[.25,.25,130],rotation:Math.PI/2}),i.a.createElement(H,{position:[0,12,-12],userData:U.b.corner,size:[130,.25,.25],rotation:Math.PI/2}),i.a.createElement(H,{position:[0,-12,-12],userData:U.b.corner,size:[130,.25,.25],rotation:Math.PI/2}),i.a.createElement(H,{position:[12,0,-12],userData:U.b.corner,size:[.25,120,.25],rotation:Math.PI}),i.a.createElement(H,{position:[-12,0,-12],userData:U.b.corner,size:[.25,120,.25],rotation:Math.PI}),i.a.createElement(H,{position:[0,0,45],userData:U.b.roof,size:[24,24,.001],rotation:Math.PI/2}))}var q=n(39),J=n.n(q);function K(){var e=Object(r.useState)(!1),t=Object(a.a)(e,2),n=t[0],o=t[1];Object(r.useLayoutEffect)((function(){var e=E.ballLaunched.subscribe(o);return function(){return e.unsubscribe()}}),[]);var s=Object(z.d)(_.TextureLoader,J.a),c=Object(P.e)((function(){return{mass:1,args:1,position:[0,0,0],onCollide:function(e){}}})),l=Object(a.a)(c,2),u=l[0],p=l[1];return Object(z.c)((function(e){n||(p.position.set(10*e.mouse.x,10*e.mouse.y,17.6),p.velocity.set(0,0,0,1))})),i.a.createElement("mesh",{castShadow:!0,receiveShadow:!0,ref:u},i.a.createElement("sphereBufferGeometry",{attach:"geometry",args:[.5,64,64]}),i.a.createElement("meshStandardMaterial",{map:s,attach:"material"}))}function W(){var e=Object(P.e)((function(){return{args:1.3,scale:[1,1,.01],position:[0,0,10],sleepSpeedLimit:4,onCollide:function(e){}}})),t=Object(a.a)(e,2),n=t[0],r=t[1];function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e<0;return n?e<-t?-t:e:e>t?t:e}return Object(z.c)((function(e){var t=10*e.mouse.x,a=10*e.mouse.y,i=t-n.current.position.x,s=a-n.current.position.y;r.position.set(n.current.position.x+o(i),n.current.position.y+o(s),18)})),i.a.createElement(i.a.Fragment,null,i.a.createElement("mesh",{ref:n,castShadow:!0},i.a.createElement("boxGeometry",{attach:"geometry",args:[5,5,1]}),i.a.createElement("meshBasicMaterial",{attach:"material",wireframe:!0,color:"#0a94ab"})))}function Q(){var e=Object(r.useRef)();return Object(r.useLayoutEffect)((function(){e.current.shadow.camera=new _.OrthographicCamera(-100,100,100,-100,.5,100),e.current.shadow.mapSize.width=2048,e.current.shadow.mapSize.height=2048}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement("ambientLight",{intensity:.75}),i.a.createElement("directionalLight",{ref:e,position:[0,0,25],"shadow-camera-near":.1,"shadow-camera-far":1500,castShadow:!0}))}var X=n(42),Y=n(40),Z=n(44),$=n(43),ee=n(4),te={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:"varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }",fragmentShader:"uniform int byp; //should we apply the glitch\n    uniform sampler2D tDiffuse;\n    uniform sampler2D tDisp;\n    uniform float amount;\n    uniform float angle;\n    uniform float seed;\n    uniform float seed_x;\n    uniform float seed_y;\n    uniform float distortion_x;\n    uniform float distortion_y;\n    uniform float col_s;\n    varying vec2 vUv;\n    float rand(vec2 co){\n      return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n    }\n    void main() {\n      if(byp<1) {\n        vec2 p = vUv;\n        float xs = floor(gl_FragCoord.x / 0.5);\n        float ys = floor(gl_FragCoord.y / 0.5);\n        //based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch\n        vec4 normal = texture2D (tDisp, p*seed*seed);\n        if(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {\n          if(seed_x>0.){\n            p.y = 1. - (p.y + distortion_y);\n          }\n          else {\n            p.y = distortion_y;\n          }\n        }\n        p.x+=normal.x*seed_x*(seed/5.);\n        p.y+=normal.y*seed_y*(seed/5.);\n        //base from RGB shift shader\n        vec2 offset = amount * vec2( cos(angle), sin(angle));\n        vec4 cr = texture2D(tDiffuse, p + offset);\n        vec4 cga = texture2D(tDiffuse, p);\n        vec4 cb = texture2D(tDiffuse, p - offset);\n        gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n        //add noise\n        vec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.05);\n        gl_FragColor = gl_FragColor+ snow;\n      }\n      else {\n        gl_FragColor=texture2D (tDiffuse, vUv);\n      }\n    }"},ne=function(e){ee.a.call(this),void 0===te&&console.error("THREE.GlitchPass relies on THREE.DigitalGlitch");var t=te;this.uniforms=_.UniformsUtils.clone(t.uniforms),void 0===e&&(e=64),this.uniforms.tDisp.value=this.generateHeightmap(e),this.material=new _.ShaderMaterial({uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.camera=new _.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new _.Scene,this.quad=new _.Mesh(new _.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.factor=0};function ae(e){var t=Object(r.useState)(!1),n=Object(a.a)(t,2),o=n[0],s=n[1];Object(r.useLayoutEffect)((function(){var e=E.glitching.subscribe(s);return function(){return e.unsubscribe()}}),[]);var c=Object(r.useRef)(),l=Object(z.e)(),u=l.scene,p=l.gl,m=l.size,b=Object(r.useMemo)((function(){return new _.Vector2(m.width,m.height)}),[m]);return Object(r.useEffect)((function(){c.current.setSize(m.width,m.height)}),[m]),Object(z.c)((function(){return c.current.render()}),1),i.a.createElement("effectComposer",{ref:c,args:[p]},i.a.createElement("renderPass",{attachArray:"passes",scene:u,camera:e.camera}),i.a.createElement("unrealBloomPass",{attachArray:"passes",args:[b,.25,.2,0]}),i.a.createElement("glitchPass",{attachArray:"passes",factor:o?1:0}),i.a.createElement("filmPass",{attachArray:"passes",args:[.35,.6,1500,!1]}))}function re(){var e=Object(w.a)(["\n  position: absolute;\n  top: 0;\n  margin: 3em 1em 3em -12em;\n  background-color: rgba(0, 0, 0, 0.4);\n  padding: 1em;\n"]);return re=function(){return e},e}ne.prototype=Object.assign(Object.create(ee.a.prototype),{constructor:ne,render:function(e,t,n,a,r){var i=Math.max(0,this.factor);this.uniforms.tDiffuse.value=n.texture,this.uniforms.seed.value=Math.random()*i,this.uniforms.byp.value=0,i?(this.uniforms.amount.value=Math.random()/90*i,this.uniforms.angle.value=_.Math.randFloat(-Math.PI,Math.PI)*i,this.uniforms.distortion_x.value=_.Math.randFloat(0,1)*i,this.uniforms.distortion_y.value=_.Math.randFloat(0,1)*i,this.uniforms.seed_x.value=_.Math.randFloat(-.3,.3)*i,this.uniforms.seed_y.value=_.Math.randFloat(-.3,.3)*i):this.uniforms.byp.value=1,this.quad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),e.render(this.scene,this.camera)):(e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera))},generateHeightmap:function(e){for(var t=new Float32Array(e*e*3),n=e*e,a=0;a<n;a++){var r=_.Math.randFloat(0,1);t[3*a+0]=r,t[3*a+1]=r,t[3*a+2]=r}var i=new _.DataTexture(t,e,e,_.RGBFormat,_.FloatType);return i.needsUpdate=!0,i}}),Object(z.b)({EffectComposer:X.a,RenderPass:Y.a,UnrealBloomPass:Z.a,FilmPass:$.a,GlitchPass:ne});var ie=O.a.div(re());function oe(e){e.text;var t=Object(r.useState)(3),n=Object(a.a)(t,2),o=n[0],s=n[1],c=Object(r.useState)(1),l=Object(a.a)(c,2),u=l[0],p=l[1],m=Object(r.useState)(0),b=Object(a.a)(m,2),d=b[0],f=b[1];return Object(r.useLayoutEffect)((function(){var e=E.balls.subscribe(s);return e.add(E.currentLevel.subscribe(p)),e.add(E.score.subscribe(f)),function(){return e.unsubscribe()}}),[]),i.a.createElement(ie,null,i.a.createElement("p",null,"Balls: ",o),i.a.createElement("p",null,"Level: ",u+1),i.a.createElement("p",null,"Score: ",d),i.a.createElement("div",null,i.a.createElement(D,{callback:function(){E.resetGame(),E.setGameState(g)},text:"Back",enabled:!0})))}function se(){var e=Object(r.useState)(3),t=Object(a.a)(e,2),n=t[0],o=t[1],s=Object(r.useState)(!1),c=Object(a.a)(s,2),l=c[0],u=c[1],p=Object(r.useState)(0),m=Object(a.a)(p,2),b=(m[0],m[1]),d=Object(r.useRef)(null);Object(r.useLayoutEffect)((function(){var e=E.balls.subscribe(o);return e.add(E.ballLaunched.subscribe(u)),function(){return e.unsubscribe()}}),[]);var f=Object(r.useMemo)((function(){var e=new _.PerspectiveCamera(45,1,1,57);return e.position.set(0,0,45),e}),[]);return Object(r.useLayoutEffect)((function(){function e(){window.innerHeight>window.innerWidth?(b(window.width),d.current.style.width="".concat(window.innerWidth,"px"),d.current.style.height="".concat(window.innerWidth,"px")):(d.current.style.width="".concat(window.innerHeight,"px"),d.current.style.height="".concat(window.innerHeight,"px"),b(window.innerHeight))}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"game",onClick:function(){n<0?E.resetGame():l?o(n-1):E.launchBall()}},i.a.createElement("div",{ref:d},i.a.createElement(z.a,{style:{width:"100%",height:"100%"},shadowMap:!0,camera:f},i.a.createElement(Q,null),i.a.createElement(P.a,{iterations:20,tolerance:1e-4,defaultContactMaterial:{friction:0,restitution:1},gravity:[0,0,0],allowSleep:!1},i.a.createElement(V,null),i.a.createElement(N,null),i.a.createElement(W,null),i.a.createElement(K,null),i.a.createElement(ae,{camera:f}))),i.a.createElement(oe,null))))}function ce(){var e=Object(w.a)(["\n  grid-row: 1;\n  margin: -3.5em auto;\n  width: 88%;\n  max-width: 26em;\n  font-size: 2em;\n  color: rgba(255, 0, 0, 0.4);\n  background-color: rgba(0, 0, 0, 0.4);\n  height: 3.5em;\n  transition: 0.5s all ease-out;\n  align-items: center;gameStore\n  justify-content: center;\n  &:hover {\n    color: rgba(255, 0, 0, 1);\n    border: red solid;\n  }\n"]);return ce=function(){return e},e}function le(){var e=Object(w.a)(["\n  justify-content: space-evenly;\n  margin-bottom: 0.5em;\n  grid-row: 1;\n"]);return le=function(){return e},e}var ue=O.a.div(le()),pe=O.a.div(ce()),me=function(e){var t=e.levelId,n=e.unlocked,a=e.highScore;return i.a.createElement("div",null,n?i.a.createElement(ue,null,i.a.createElement("div",null,i.a.createElement("h2",null,"Level ",t+1),n&&i.a.createElement("h3",null,"Highscore: ",a)),i.a.createElement(D,{callback:function(){E.launchLevel(t)},text:"Play"})):i.a.createElement(pe,null,i.a.createElement("div",null,"FINISH LEVEL ",t," TO UNLOCK")))};function be(){var e=Object(w.a)(["\n  width: 100%;\n  height: 100%;\n  display: grid;\n  text-align: center;\n"]);return be=function(){return e},e}function de(){var e=Object(w.a)(["\n  height: 100%;\n"]);return de=function(){return e},e}var fe=O.a.div(de()),he=O.a.div(be()),xe=function(){var e=Object(r.useState)([0]),t=Object(a.a)(e,2),n=t[0],o=t[1];return Object(r.useLayoutEffect)((function(){var e=h.bestScores.subscribe(o);return function(){return e.unsubscribe()}}),[]),i.a.createElement(fe,null,i.a.createElement(M,{text:"LEVELS"}),i.a.createElement(he,null,n.map((function(e,t){return i.a.createElement(me,{key:t,levelId:t,highScore:n[t],unlocked:!0})}))),i.a.createElement("div",{style:{marginTop:"3em"}},i.a.createElement(D,{callback:function(){E.setGameState(x)},enabled:!0,text:"Back"})))};function ge(){var e=E.nbBrickDestroyed.value+1===f.tiles.value.length;return i.a.createElement("div",{onClick:function(){E.resetGame(),E.setGameState(g)},style:{margin:"auto"}},i.a.createElement("h2",null,"Level ",e?"Cleared":"Failed"),i.a.createElement("h3",null,"Score: ",E.score.value))}n(55);n.d(t,"default",(function(){return ye}));var ve=function(e){switch(e.gameState){case x:return i.a.createElement(T,null);case g:return i.a.createElement(xe,null);case v:return i.a.createElement(se,null);case y:return i.a.createElement(ge,null);default:return i.a.createElement(T,null)}};function ye(){var e=Object(r.useState)(x),t=Object(a.a)(e,2),n=t[0],o=t[1];return Object(r.useEffect)((function(){var e=E.gameState.subscribe(o);return function(){return e.unsubscribe()}}),[]),i.a.createElement("div",{className:"main"},i.a.createElement(ve,{gameState:n}))}s.a.render(i.a.createElement(ye,null),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.94960443.chunk.js.map