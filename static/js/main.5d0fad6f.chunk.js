(this.webpackJsonparkeact=this.webpackJsonparkeact||[]).push([[0],{13:function(e){e.exports=JSON.parse('{"a":{"red":{"color":"#354056","fillColor":"#737E96","bonusProbability":0,"strength":2,"scoreValue":500},"pink":{"color":"#F12C71","fillColor":"#F2417F","bonusProbability":0,"strength":1,"scoreValue":250},"hPink":{"color":"#F12C71","fillColor":"#F2417F","bonusProbability":0,"strength":1,"scoreValue":250,"size":[6,2,2]},"blue":{"color":"#36abb5","fillColor":"#36abb5","bonusProbability":0,"strength":3,"scoreValue":1000},"hBlue":{"color":"#36abb5","fillColor":"#36abb5","bonusProbability":0,"strength":3,"scoreValue":1000,"size":[6,2,2]},"vBlue":{"color":"#36abb5","fillColor":"#36abb5","bonusProbability":0,"strength":3,"scoreValue":1000,"size":[2,6,2]},"yellow":{"color":"#5b5203","fillColor":"#efd807","bonusProbability":0,"strength":2,"scoreValue":500}},"b":{"side":{"color":"#0b0f17"},"ground":{"color":"#0b0f17"},"roof":{"isRoof":true,"color":"rgba(0,0,0,0)"},"corner":{"color":"#F12C71","isCorner":true}}}')},38:function(e){e.exports=JSON.parse('{"a":[{"layers":[[{"position":[0,0,-10],"userDataType":"pink","bonus":"ball"},{"position":[5,5,-10],"userDataType":"pink","bonus":"ball"},{"position":[-5,5,-10],"userDataType":"pink","bonus":"ball"},{"position":[0,-5,-10],"userDataType":"hPink","bonus":"ball"}]]},{"layers":[[{"position":[0,2.5,-10],"userDataType":"blue"},{"position":[-5,0,-10],"userDataType":"yellow"},{"position":[0,0,-10],"userDataType":"yellow"},{"position":[5,0,-10],"userDataType":"yellow"},{"position":[0,-2.5,-10],"userDataType":"blue"}],[{"position":[-2.5,1.25,-5],"userDataType":"pink"},{"position":[2.5,1.25,-5],"userDataType":"pink"},{"position":[-2.5,-1.25,-5],"userDataType":"red"},{"position":[2.5,-1.25,-5],"userDataType":"red"}]]},{"layers":[[{"position":[0,10,-10],"userDataType":"blue"},{"position":[0,-10,-10],"userDataType":"blue"},{"position":[10,-10,-10],"userDataType":"blue"},{"position":[10,10,-10],"userDataType":"blue"}],[{"position":[2.5,-1.25,-5],"userDataType":"red"}]]}]}')},45:function(e,t,n){e.exports=n.p+"static/media/underline.765dc17d.png"},48:function(e,t,n){e.exports=n.p+"static/media/game_title.62e617f5.png"},49:function(e,t,n){e.exports=n.p+"static/media/brick.eed03f13.mp3"},54:function(e,t,n){e.exports=n.p+"static/media/wall.4c0964a4.mp3"},55:function(e,t,n){e.exports=n.p+"static/media/cross.00397b42.jpg"},62:function(e,t,n){e.exports=n(76)},75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return it}));var a=n(2),r=n(0),i=n.n(r),o=n(14),c=n.n(o),s=n(8),l=n(10),u=n(79),f=n(59),m=n(19),b=n(38),d=function(){function e(){var t=this;Object(l.a)(this,e),this.buildLevel=function(e){t.tiles.next(b.a[e].layers.flat())},e.instance||(e.instance=this,this.tiles=new u.a([]))}return Object(m.a)(e,[{key:"getLockedLevels",value:function(e){var t=b.a;return Object(s.a)(t).splice(e.length,t.length-1)}}]),e}(),h=new d;Object.freeze(d);var v=new function e(){var t=this;return Object(l.a)(this,e),this.addHighscoreValue=function(){var e=Object(s.a)(t.bestscoreValues.value);e[x.currentLevel.value]=x.scoreValue.value,e[x.currentLevel.value+1]=0,t.bestscoreValues.next(e)},e.instance||(e.instance=this,this.bestscoreValues=new u.a([0]),this.achievements=new u.a([])),e.instance};Object.freeze(v);var p=0,g=1,y=2,E=3,O=4,j=5,x=new function e(){var t=this;return Object(l.a)(this,e),this.setGameState=function(e){t.gameState.next(e)},this.launchLevel=function(e){t.currentLevel.next(e),t.gameState.next(y)},this.increaseLevelNumber=function(){t.currentLevel.next(t.currentLevel.value+1)},this.launchGame=function(){t.resetGame(),t.inGame.next(!0)},this.launchBall=function(){t.ballLaunched.next(!0)},this.resetBall=function(){t.lifes.value>0?(t.lifes.next(t.lifes.value-1),t.ballLaunched.next(!1),t.bonusBalls.next([]),t.setGlitching(!0),setTimeout((function(){t.setGlitching(!1),t.lifes.next(t.lifes.getValue()-1)}),300)):t.gameState.next(E)},this.resetGame=function(){t.lifes.next(3),t.bonusBalls.next([]),t.nbBrickDestroyed.next(0),t.scoreValue.next(0),t.inGame.next(!1),t.ballLaunched.next(!1)},this.addBonusBall=function(e,n,a){t.bonusBalls.next([].concat(Object(s.a)(t.bonusBalls.getValue()),[{bonusType:e,position:n,id:t.bonusBalls.getValue().length}]))},this.removeBonusBall=function(e){t.bonusBalls.next(t.bonusBalls.getValue().filter((function(t){return console.log(e,t),t.id!==e})))},this.setBall2dPosition=function(e){return t.ball2dPosition.next(e)},this.setGlitching=function(e){return t.glitching.next(e)},this.increaseScoreValue=function(e){t.scoreValue.next(t.scoreValue.value+e),t.nbBrickDestroyed.value+1===h.tiles.value.length&&setTimeout((function(){v.addHighscoreValue(),t.gameState.next(E)}),1e3),t.nbBrickDestroyed.next(t.nbBrickDestroyed.value+1)},e.instance||(e.instance=this,this.gameState=new u.a(p),this.nbBrickDestroyed=new u.a(0),this.ball2dPosition=new u.a({x:0,y:0}),this.lifes=new u.a(3),this.bonusBalls=new u.a([]),this.scoreValue=new u.a(0),this.inGame=new f.a(!1),this.ballLaunched=new f.a(!1),this.ballLost=new f.a(!1),this.currentLevel=new u.a(1),this.glitching=new f.a(!0)),e.instance};Object.freeze(x);var w=n(6),S=n(7),k=n(25),D=n(29),L={display:"flex",justifyContent:"center"},B=n(45),T=n.n(B);function z(){var e=Object(w.a)(["\n\topacity: 0.5;\n\ttop: 1.25em;\n\t","\n}\n"]);return z=function(){return e},e}function M(){var e=Object(w.a)(["\n\tcursor: pointer;\n\tbackground: transparent;\n\tletter-spacing: 0.1rem;\n\tcolor: ",";\n\tborder-style: none;\n\ttransition: 0.5s all ease-out;\n\topacity: 0.75;\n\tfont-size: 2em;\n\talign-items: center;\n\tflex-direction: column;\n\t","\n\t","\n\t","\n"]);return M=function(){return e},e}var P=S.a.button(M(),(function(e){return e.enabled?"#e6007e":"#dec99e"}),L,(function(e){return e.enabled&&"&:hover { text-shadow: 2px 2px #dec99f; opacity: 1 }"}),(function(e){return e.enabled&&"&:hover img {filter: drop-shadow(0 0 30px rgba(255,255,255,1)); opacity: 1 }"})),C=S.a.img(z(),(function(e){return"width: ".concat(.9*e.textLength,"em;")}));function V(e){var t=e.callback,n=e.text,o=e.enabled,c=void 0===o||o,s=e.style,l=void 0===s?{}:s,u=Object(r.useState)(!1),f=Object(a.a)(u,1)[0];return Object(k.b)(f,null,{from:Object(D.a)({opacity:0},L),enter:{opacity:1},leave:{opacity:0},config:{duration:1500}}).map((function(e){var a=e.key,r=e.props;return i.a.createElement(k.a.div,{key:a,style:r},i.a.createElement(P,{enabled:c,onClick:function(){c&&t()},style:Object(D.a)({},l)},n,c&&i.a.createElement(C,{src:T.a,textLength:n.length,alt:""})))}))}var G={height:"5%",width:"15rem",border:"none",transform:"rotate(-3deg)",fontSize:"3rem","align-items":"center"},F=function(e){var t=e.text,n=e.style,a=e.callback;return i.a.createElement(V,{callback:a,text:t,style:Object(D.a)(Object(D.a)({},n),{},{buttonStyle:G})})},_=n(48),I=n.n(_);function R(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(r.useLayoutEffect)((function(){function a(){n&&window.innerHeight>window.innerWidth||!n&&window.innerHeight<window.innerWidth?(t.setSize(window.width),e.current.style.width="".concat(window.innerWidth,"px"),e.current.style.height="".concat(window.innerWidth,"px")):(e.current.style.width="".concat(window.innerHeight,"px"),e.current.style.height="".concat(window.innerHeight,"px"),t.setSize(window.innerHeight))}return window.addEventListener("resize",a),a(),function(){return window.removeEventListener("resize",a)}}),[n,e,t]),t}function U(){var e=Object(w.a)(["\n\tmargin-top: 2.5em;\n\tdisplay: flex;\n\tjustify-content: space-evenly;\n\twidth: 100%;\n"]);return U=function(){return e},e}function A(){var e=Object(w.a)(["\n\tbackground: url(",") no-repeat center center fixed;\n\tbackground-size: cover;\n\t","\n\tposition: absolute;\n\tflex-direction: column;\n\talign-items: center; \n"]);return A=function(){return e},e}var H=S.a.div(A(),I.a,L),N=S.a.div(U());function W(){var e=Object(r.useState)(0),t=Object(a.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(!1),s=Object(a.a)(c,1)[0],l=Object(r.useRef)(null);return R(l,{size:n,setSize:o},!1),Object(k.b)(s,null,{from:{opacity:0,display:"flex",flexDirection:"column",alignItems:"center",marginTop:"25%"},enter:{opacity:1},leave:{opacity:0},config:{duration:2e3}}).map((function(e){var t=e.key,n=e.props;return i.a.createElement(H,{ref:l},i.a.createElement(k.a.div,{key:t,style:n},i.a.createElement(F,{style:{marginTop:"25%",fontSize:"3.5em"},text:"PLAY",callback:function(){return x.setGameState(g)}}),i.a.createElement(N,null,i.a.createElement(F,{key:0,text:"SETTINGS",callback:function(){x.setGameState(O)}}),i.a.createElement(F,{key:1,text:"ABOUT",callback:function(){return x.setGameState(j)}}))))}))}var q=n(11),J=n(77),Q=n(13),K=n(1),X=n(36),Y=n.n(X),Z=n(49),$=n.n(Z),ee=function(e,t,n){for(var a=[],r=0;r<e;r++){var i=Math.random()*n.x-n.x+t.current.position.x+n.x/2,o=Math.random()*n.y-n.y+t.current.position.y+n.y/2,c=t.current.position.z-.5;a.push(i,o,c)}var s=new K.BufferGeometry;return s.setAttribute("position",new K.Float32BufferAttribute(a,3)),s},te=function(e){return new K.PointsMaterial({color:e,size:.9,transparent:!0,depthTest:!1,sizeAttenuation:!0,opacity:.9})};function ne(e){var t=e.position,n=e.strength,o=e.color,c=e.fillColor,s=e.scoreValue,l=e.id,u=e.bonus,f=e.size,m=void 0===f?[2,2,2]:f,b=[],d=n,h=new Y.a($.a),v=Object(J.c)((function(){return{type:"Kinematic",args:m.map((function(e){return e/2})),position:t,onCollide:function(e){h.play(),n--,g.current.children.push(b[n]),n<=0?(y.position.set(-1e3,-1e3,-100),x.increaseScoreValue(s),u&&x.addBonusBall(u,t)):g.current.children[0].material.opacity=n/d}}})),p=Object(a.a)(v,2),g=p[0],y=p[1];return Object(q.c)((function(){for(var e=1;e<g.current.children.length;e++)g.current.children[e]&&g.current.children[e].material.opacity>0&&(g.current.children[e].material.opacity-=.0075,g.current.children[e].scale.x+=.05,g.current.children[e].scale.y+=.05)})),Object(r.useEffect)((function(){for(var e=0;e<n;e++){var t=te(o),a=ee(75,g,{x:m[0],y:m[1]}),r=new K.Points(a,t);r.customRotation=0,b.push(r)}}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement("mesh",{key:l,ref:g},i.a.createElement("boxGeometry",{attach:"geometry",args:m}),i.a.createElement("meshStandardMaterial",{attach:"material",wireframe:!0,color:o}),i.a.createElement("mesh",{receiveShadow:!0},i.a.createElement("boxGeometry",{attach:"geometry",args:m.map((function(e){return.99*e}))}),i.a.createElement("meshStandardMaterial",{attach:"material",color:c}))))}function ae(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(x.currentLevel.value),s=Object(a.a)(c,2),l=s[0],u=s[1];return Object(r.useEffect)((function(){var e=x.currentLevel.subscribe(u);return e.add(h.tiles.subscribe(o)),h.buildLevel(l),function(){return e.unsubscribe()}}),[l]),n.map((function(e,t){return i.a.createElement(ne,Object.assign({key:t,id:t,position:e.position},Q.a[e.userDataType],{bonus:e.bonus}))}))}var re=n(54),ie=n.n(re);function oe(e){var t=e.position,n=e.color,r=e.cornerData,o=e.id,c=e.size,s=void 0===c?[2,2,2]:c,l=new Y.a(ie.a),u=isNaN(r),f=Object(J.c)((function(){return{type:u?"Static":"Kinematic",args:s,position:t,onCollide:function(e){l.play()}}})),m=Object(a.a)(f,1)[0];return i.a.createElement("mesh",{key:o,ref:m,receiveShadow:!0},i.a.createElement("boxGeometry",{attach:"geometry",args:s,receiveShadow:!0}),i.a.createElement("meshStandardMaterial",{attach:"material",receiveShadow:!0,color:n}))}function ce(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(oe,Object.assign({position:[-12.5,0,0]},Q.b.side,{size:[1,25,130]})),i.a.createElement(oe,Object.assign({position:[12.5,0,0]},Q.b.side,{size:[1,25,130]})),i.a.createElement(oe,Object.assign({position:[0,12.5,0]},Q.b.side,{size:[25,1,130]})),i.a.createElement(oe,Object.assign({position:[0,-12.5,0]},Q.b.side,{size:[25,1,130]})),i.a.createElement(oe,Object.assign({position:[0,0,-12.5]},Q.b.ground,{size:[25,25,1],rotation:Math.PI/2})),i.a.createElement(oe,Object.assign({position:[-12,-12,-12.5]},Q.b.corner,{size:[.25,.25,200],rotation:Math.PI/2})),i.a.createElement(oe,Object.assign({position:[-12,12,-12.5]},Q.b.corner,{size:[.25,.25,200],rotation:Math.PI/2})),i.a.createElement(oe,Object.assign({position:[12,12,-12.5]},Q.b.corner,{size:[.25,.25,200],rotation:Math.PI/2})),i.a.createElement(oe,Object.assign({position:[12,-12,-12.5]},Q.b.corner,{size:[.25,.25,200],rotation:Math.PI/2})),i.a.createElement(oe,Object.assign({position:[0,12,-12]},Q.b.corner,{size:[130,.25,.25],rotation:Math.PI/2})),i.a.createElement(oe,Object.assign({position:[0,-12,-12]},Q.b.corner,{size:[130,.25,.25],rotation:Math.PI/2})),i.a.createElement(oe,Object.assign({position:[12,0,-12]},Q.b.corner,{size:[.25,120,.25],rotation:Math.PI})),i.a.createElement(oe,Object.assign({position:[-12,0,-12]},Q.b.corner,{size:[.25,120,.25],rotation:Math.PI})))}var se=n(55),le=n.n(se);function ue(){var e=Object(r.useState)(!1),t=Object(a.a)(e,2),n=t[0],o=t[1];Object(r.useEffect)((function(){var e=x.ballLaunched.subscribe(o);return function(){return e.unsubscribe()}}),[]);var c=Object(q.d)(K.TextureLoader,le.a),s=Object(J.e)((function(){return{mass:1,args:1,fixedRotation:!1,position:[0,0,0],onCollide:function(e){e.body.userData.isRoof&&f.position.set(-1e3,-1e3,-1e3)}}})),l=Object(a.a)(s,2),u=l[0],f=l[1];return Object(q.c)((function(e){n||(f.position.set(10*e.mouse.x,10*e.mouse.y,17.6),f.velocity.set(0,0,0,1)),x.setBall2dPosition({x:u.current.position.x,y:u.current.position.y})})),i.a.createElement("mesh",{castShadow:!0,receiveShadow:!0,ref:u},i.a.createElement("sphereBufferGeometry",{attach:"geometry",args:[.5,64,64]}),i.a.createElement("meshStandardMaterial",{map:c,attach:"material"}))}function fe(){var e=Object(J.e)((function(){return{args:1.3,scale:[1,1,.01],position:[0,0,10],sleepSpeedLimit:4}})),t=Object(a.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)("#fff"),s=Object(a.a)(c,2),l=s[0],u=s[1],f=Object(r.useState)({x:0,y:0}),m=Object(a.a)(f,2),b=m[0],d=m[1];function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5,n=e<0;return n?e<-t?-t:e:e>t?t:e}return Object(r.useEffect)((function(){x.ball2dPosition.subscribe(d)}),[]),Object(q.c)((function(e){var t=10*e.mouse.x,a=10*e.mouse.y,r=t-n.current.position.x,i=a-n.current.position.y,c=b.x+12.5-(n.current.position.x+12.5),s=b.y+12.5-(n.current.position.y+12.5),l=255*(1-Math.abs(c+s)/25)|0,f=Math.abs(l-190)/55*255|0,m="rgb(255, ".concat(f,", ").concat(f,")");u(m),o.position.set(n.current.position.x+h(r),n.current.position.y+h(i),18)})),i.a.createElement(i.a.Fragment,null,i.a.createElement("mesh",{ref:n,castShadow:!0},i.a.createElement("boxGeometry",{attach:"geometry",args:[5,5,1]}),i.a.createElement("meshBasicMaterial",{attach:"material",wireframe:!0,color:l})))}function me(){var e=Object(r.useRef)();return Object(r.useLayoutEffect)((function(){e.current.shadow.camera=new K.OrthographicCamera(-100,100,100,-100,.5,100),e.current.shadow.mapSize.width=2048,e.current.shadow.mapSize.height=2048}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement("ambientLight",{intensity:.75}),i.a.createElement("directionalLight",{ref:e,position:[0,0,25],"shadow-camera-near":.1,"shadow-camera-far":1500,castShadow:!0}))}var be=n(60),de=n(56),he=n(61),ve=n(9),pe=n(41),ge=function(e,t,n,a){ve.a.call(this),void 0===pe.a&&console.error("FilmPass relies on FilmShader");var r=pe.a;this.uniforms=K.UniformsUtils.clone(r.uniforms),this.material=new K.ShaderMaterial({uniforms:this.uniforms,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader}),void 0!==a&&(this.uniforms.grayscale.value=a),void 0!==t&&(this.uniforms.sIntensity.value=t),void 0!==n&&(this.uniforms.sCount.value=n),this.uniforms.nIntensity.value=.1,this.fsQuad=new ve.a.FullScreenQuad(this.material)};ge.prototype=Object.assign(Object.create(ve.a.prototype),{constructor:ge,render:function(e,t,n,a){this.uniforms.tDiffuse.value=n.texture,this.uniforms.time.value+=a,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}});var ye={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:"varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }",fragmentShader:"uniform int byp; //should we apply the glitch\n    uniform sampler2D tDiffuse;\n    uniform sampler2D tDisp;\n    uniform float amount;\n    uniform float angle;\n    uniform float seed;\n    uniform float seed_x;\n    uniform float seed_y;\n    uniform float distortion_x;\n    uniform float distortion_y;\n    uniform float col_s;\n    varying vec2 vUv;\n    float rand(vec2 co){\n      return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n    }\n    void main() {\n      if(byp<1) {\n        vec2 p = vUv;\n        float xs = floor(gl_FragCoord.x / 0.5);\n        float ys = floor(gl_FragCoord.y / 0.5);\n        //based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch\n        vec4 normal = texture2D (tDisp, p*seed*seed);\n        if(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {\n          if(seed_x>0.){\n            p.y = 1. - (p.y + distortion_y);\n          }\n          else {\n            p.y = distortion_y;\n          }\n        }\n        p.x+=normal.x*seed_x*(seed/5.);\n        p.y+=normal.y*seed_y*(seed/5.);\n        //base from RGB shift shader\n        vec2 offset = amount * vec2( cos(angle), sin(angle));\n        vec4 cr = texture2D(tDiffuse, p + offset);\n        vec4 cga = texture2D(tDiffuse, p);\n        vec4 cb = texture2D(tDiffuse, p - offset);\n        gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n        //add noise\n        vec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.05);\n        gl_FragColor = gl_FragColor+ snow;\n      }\n      else {\n        gl_FragColor=texture2D (tDiffuse, vUv);\n      }\n    }"},Ee=function(e){ve.a.call(this),void 0===ye&&console.error("THREE.GlitchPass relies on THREE.DigitalGlitch");var t=ye;this.uniforms=K.UniformsUtils.clone(t.uniforms),void 0===e&&(e=64),this.uniforms.tDisp.value=this.generateHeightmap(e),this.material=new K.ShaderMaterial({uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.camera=new K.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new K.Scene,this.quad=new K.Mesh(new K.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.factor=0};function Oe(){var e=Object(r.useState)(!0),t=Object(a.a)(e,2),n=t[0],o=t[1];Object(r.useLayoutEffect)((function(){var e=x.glitching.subscribe(o);return function(){return e.unsubscribe()}}),[]);var c=Object(r.useRef)(),s=Object(q.e)(),l=s.scene,u=s.gl,f=s.size,m=s.camera,b=Object(r.useMemo)((function(){return new K.Vector2(f.width,f.height)}),[f]);return Object(r.useEffect)((function(){c.current.setSize(f.width,f.height)}),[f]),Object(q.c)((function(){c.current.render()}),1),i.a.createElement("effectComposer",{ref:c,args:[u]},i.a.createElement("renderPass",{attachArray:"passes",scene:l,camera:m}),i.a.createElement("unrealBloomPass",{attachArray:"passes",args:[b,.25,.2,0]}),i.a.createElement("filmPass",{attachArray:"passes",noiseIntensity:0,args:[.35,.6,1500,!1]}),i.a.createElement("glitchPass",{attachArray:"passes",factor:n?1:0}))}function je(){var e=Object(w.a)(["\n\tposition: absolute;\n\ttop: 0;\n\tmargin: 3em 1em 3em -12em;\n\tbackground-color: rgba(0, 0, 0, 0.4);\n\tpadding: 1em;\n"]);return je=function(){return e},e}Ee.prototype=Object.assign(Object.create(ve.a.prototype),{constructor:Ee,render:function(e,t,n,a,r){var i=Math.max(0,this.factor);this.uniforms.tDiffuse.value=n.texture,this.uniforms.seed.value=Math.random()*i,this.uniforms.byp.value=0,i?(this.uniforms.amount.value=Math.random()/90*i,this.uniforms.angle.value=K.Math.randFloat(-Math.PI,Math.PI)*i,this.uniforms.distortion_x.value=K.Math.randFloat(0,1)*i,this.uniforms.distortion_y.value=K.Math.randFloat(0,1)*i,this.uniforms.seed_x.value=K.Math.randFloat(-.3,.3)*i,this.uniforms.seed_y.value=K.Math.randFloat(-.3,.3)*i):this.uniforms.byp.value=1,this.quad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),e.render(this.scene,this.camera)):(e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera))},generateHeightmap:function(e){for(var t=new Float32Array(e*e*3),n=e*e,a=0;a<n;a++){var r=K.Math.randFloat(0,1);t[3*a+0]=r,t[3*a+1]=r,t[3*a+2]=r}var i=new K.DataTexture(t,e,e,K.RGBFormat,K.FloatType);return i.needsUpdate=!0,i}}),Object(q.b)({EffectComposer:be.a,RenderPass:de.a,UnrealBloomPass:he.a,FilmPass:ge,GlitchPass:Ee});var xe=S.a.div(je());function we(e){e.text;var t=Object(r.useState)(3),n=Object(a.a)(t,2),o=n[0],c=n[1],s=Object(r.useState)(1),l=Object(a.a)(s,2),u=l[0],f=l[1],m=Object(r.useState)(0),b=Object(a.a)(m,2),d=b[0],h=b[1];return Object(r.useLayoutEffect)((function(){var e=x.lifes.subscribe(c);return e.add(x.currentLevel.subscribe(f)),e.add(x.scoreValue.subscribe(h)),function(){return e.unsubscribe()}}),[]),i.a.createElement(xe,null,i.a.createElement("p",null,"Lifes: ",o),i.a.createElement("p",null,"Level: ",u+1),i.a.createElement("p",null,"Score: ",d),i.a.createElement("div",null,i.a.createElement(V,{callback:function(){x.resetGame(),x.setGameState(g)},text:"Back",enabled:!0})))}function Se(e){var t=e.position,n=e.id,o=Object(J.e)((function(){return{mass:1,args:1,position:t,fixedRotation:!1,onCollide:function(e){}}})),c=Object(a.a)(o,2),s=c[0],l=c[1];return Object(r.useEffect)((function(){l.applyImpulse([0,0,10],t)}),[t,l]),i.a.createElement("mesh",{userData:{bonusType:"ball",id:n},castShadow:!0,receiveShadow:!0,ref:s},i.a.createElement("sphereBufferGeometry",{attach:"geometry",args:[.5,64,64]}),i.a.createElement("meshStandardMaterial",{attach:"material"}))}var ke=function(){var e=Object(r.useState)(3),t=Object(a.a)(e,2)[1],n=Object(q.e)().scene;Object(r.useEffect)((function(){var e=x.lifes.subscribe(t);return function(){return e.unsubscribe()}}),[]);var o=Object(J.c)((function(){return{args:[28,28,.001],position:[0,0,45],onCollide:function(e){if(0===x.bonusBalls.getValue().length)x.resetBall();else{var t=e.body.userData;"ball"===t.bonusType?(n.remove(e.body),x.ballLost&&1===x.bonusBalls.getValue().length?x.resetBall():x.removeBonusBall(t.id)):(e.body.position.set(-1e3,-1e3,-1e3),x.ballLost.next(!0))}}}})),c=Object(a.a)(o,1)[0];return i.a.createElement("mesh",{ref:c,userData:{isRoof:!0}})};var De=function(e){var t=Object(r.useState)(!0),n=Object(a.a)(t,2)[1],o=Object(r.useState)(!1),c=Object(a.a)(o,2),s=c[0],l=c[1],u=Object(r.useRef)(),f=Object(q.e)().setDefaultCamera;return Object(r.useEffect)((function(){var e=x.glitching.subscribe(n);return setTimeout((function(){x.setGlitching(!1)}),1e3),setTimeout((function(){l(!0)}),1500),f(u.current),function(){return e.unsubscribe()}}),[f]),Object(q.c)((function(){s&&u.current.position.z>45?u.current.position.z-=.75:l(!1),u.current.updateMatrixWorld()})),i.a.createElement("perspectiveCamera",Object.assign({ref:u,position:[0,0,85]},e,{fov:45,far:157}))};function Le(){var e=Object(r.useState)(3),t=Object(a.a)(e,2)[1],n=Object(r.useState)(!1),o=Object(a.a)(n,2),c=o[0],s=o[1],l=Object(r.useState)([]),u=Object(a.a)(l,2),f=u[0],m=u[1],b=Object(r.useState)(0),d=Object(a.a)(b,2),h=d[0],v=d[1],p=Object(r.useRef)(null);return R(p,{size:h,setSize:v}),Object(r.useEffect)((function(){var e=x.lifes.subscribe(t);return e.add(x.ballLaunched.subscribe(s)),e.add(x.bonusBalls.subscribe(m)),function(){return e.unsubscribe()}}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"game",onClick:function(){c||x.launchBall()}},i.a.createElement("div",{ref:p},i.a.createElement(q.a,{style:{width:"100%",height:"100%"},shadowMap:!0},i.a.createElement(De,null),i.a.createElement(me,null),i.a.createElement(J.a,{iterations:20,tolerance:1e-4,defaultContactMaterial:{friction:0,restitution:1},gravity:[0,0,0],allowSleep:!1,id:"gamePhysics"},i.a.createElement(ce,null),i.a.createElement(ae,null),i.a.createElement(ue,null),i.a.createElement(fe,null),i.a.createElement(ke,null),f.map((function(e,t){return i.a.createElement(Se,Object.assign({key:t},e,{id:t}))})),i.a.createElement(Oe,null))),i.a.createElement(we,null))))}function Be(){var e=Object(w.a)(["\n\th1 {\n\t\twidth: 100%;\n\t\ttext-align: center;\n\t\tfont-size: 4em;\n\t}\n"]);return Be=function(){return e},e}var Te=S.a.div(Be());function ze(e){var t=e.text;return i.a.createElement(Te,null,i.a.createElement("h1",null,t))}function Me(){var e=Object(w.a)(["\n\tjustify-content: space-evenly;\n\tgrid-row: 1;\n\tdisplay: flex;\n\talign-self: center;\n"]);return Me=function(){return e},e}function Pe(){var e=Object(w.a)(["\n\tjustify-content: space-evenly;\n\tgrid-row: 1;\n\tdisplay: flex;\n"]);return Pe=function(){return e},e}var Ce=S.a.div(Pe()),Ve=S.a.div(Me()),Ge=function(e){var t=e.levelId,n=e.unlocked,a=e.highscoreValue;return i.a.createElement(Ce,null,i.a.createElement("div",null,i.a.createElement("h2",null,"Level ",t+1),n&&i.a.createElement("h3",null,"Highscore: ",a)),n?i.a.createElement(F,{text:"Play",callback:function(){return x.launchLevel(t)}}):i.a.createElement(Ve,null,i.a.createElement("div",null,"FINISH LEVEL ",t+1," TO UNLOCK")))};function Fe(){var e=Object(w.a)(["\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\tcolor: #5a55ff;\n"]);return Fe=function(){return e},e}var _e=S.a.div(Fe()),Ie=function(e){var t=e.title,n=e.children;return i.a.createElement(_e,null,i.a.createElement(ze,{text:t}),n,i.a.createElement(F,{callback:function(){x.setGameState(p)},text:"Back"}))};function Re(){var e=Object(w.a)(["\n\ttext-align: center;\n\theight: 65%;\n\twidth: 100%;\n"]);return Re=function(){return e},e}var Ue=S.a.div(Re()),Ae=function(){var e=Object(r.useState)([0]),t=Object(a.a)(e,2),n=t[0],o=t[1];return Object(r.useLayoutEffect)((function(){var e=v.bestscoreValues.subscribe(o);return function(){return e.unsubscribe()}}),[]),i.a.createElement(Ie,null,i.a.createElement(ze,{text:"LEVELS"}),i.a.createElement(Ue,null,n.map((function(e,t){return i.a.createElement(Ge,{key:t,levelId:t,highscoreValue:n[t],unlocked:!0})})),h.getLockedLevels(n).map((function(e,t){return i.a.createElement(Ge,{key:t,levelId:t+n.length-1,highscoreValue:0,unlocked:!1})}))))};function He(){var e=x.nbBrickDestroyed.value+1===h.tiles.value.length,t=e?"Next Level":"Play again";return i.a.createElement("div",{style:{margin:"auto"}},i.a.createElement("h2",null,"Level ",e?"Cleared":"Failed"),i.a.createElement("h3",null,"Score: ",x.scoreValue.value),i.a.createElement(V,{callback:function(){e?(x.resetGame(),x.increaseLevelNumber(),x.setGameState(y)):(x.resetGame(),x.setGameState(g))},text:t}))}var Ne=n(58);n(74);function We(){var e=Object(w.a)(["\n    ",";\n    align-items:center;\n    flex-direction: column;\n    width: 70%;\n    margin: auto;\n"]);return We=function(){return e},e}function qe(){var e=Object(w.a)(["\n    ",";\n    align-items:center;\n    width: 100%;\n"]);return qe=function(){return e},e}function Je(){var e=Object(w.a)([""]);return Je=function(){return e},e}var Qe=S.a.div(Je()),Ke=function(e){var t=e.title;return i.a.createElement("h2",null,t)},Xe=S.a.div(qe(),L),Ye=function(e){var t=e.label;return i.a.createElement(Xe,null,i.a.createElement("h3",null,t),i.a.createElement(Ne.a,{style:{marginLeft:"1em"}}))},Ze=S.a.div(We(),L),$e=function(e){var t=e.title,n=e.children;return i.a.createElement(Ze,null,i.a.createElement(Ke,{title:t}),n)},et=function(){return i.a.createElement(Ie,{title:"SETTINGS"},i.a.createElement(Qe,null,i.a.createElement($e,{title:"AUDIO"},i.a.createElement(Ye,{label:"MUSIC"}),i.a.createElement(Ye,{label:"VFX"}))))};function tt(){var e=Object(w.a)(["\n    display: flex;\n    align-items: center;\n    flex-direction: column; \n    font-size: 1.5em;\n"]);return tt=function(){return e},e}var nt=S.a.div(tt()),at=function(){return i.a.createElement(Ie,{title:"ABOUT"},i.a.createElement(nt,null,i.a.createElement("p",null,"This game is a side project started during my confinment."),i.a.createElement("p",null,"Made with react-three-fiber, canonjs, ."),i.a.createElement("p",null,"A special thanks to ",i.a.createElement("a",{href:"/#"},"Mat'")," for the graphic assets and visual advices!")))},rt=(n(75),function(e){switch(e.gameState){case p:return i.a.createElement(W,null);case g:return i.a.createElement(Ae,null);case y:return i.a.createElement(Le,null);case E:return i.a.createElement(He,null);case O:return i.a.createElement(et,null);case j:return i.a.createElement(at,null);default:return i.a.createElement(W,null)}});function it(){var e=Object(r.useState)(p),t=Object(a.a)(e,2),n=t[0],o=t[1];return Object(r.useEffect)((function(){var e=x.gameState.subscribe(o);return function(){return e.unsubscribe()}}),[]),i.a.createElement("div",{className:"main"},i.a.createElement(rt,{gameState:n}))}c.a.render(i.a.createElement(it,null),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.5d0fad6f.chunk.js.map