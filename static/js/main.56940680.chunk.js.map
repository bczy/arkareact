{"version":3,"sources":["assets/images/game_title.png","assets/sounds/brick.mp3","assets/sounds/wall.mp3","assets/textures/cross.jpg","stores/levelStore.js","stores/playerStore.js","stores/gameStore.js","components/hud/common/Button.js","hooks/windowResize.js","pages/Welcome.js","components/game/Box.js","components/game/Tiles.js","components/game/Walls.js","components/game/Ball.js","components/game/Paddle.js","components/game/Lights.js","components/vfx/FilmPass.js","components/vfx/GlitchPass.js","components/vfx/Effect.js","components/hud/Hud.js","pages/Game.js","components/hud/common/Title.js","components/hud/Level.js","pages/Levels.js","pages/LevelDebrief.js","index.js"],"names":["module","exports","LevelStore","buildLevel","levelId","tiles","next","LEVELS","layers","flat","instance","this","BehaviorSubject","bestscoreValues","levels","splice","length","levelStore","Object","freeze","playerStore","addHighscoreValue","value","gameStore","currentLevel","scoreValue","console","log","PlayerStore","achievements","GAME_STATES","setGameState","gameState","launchLevel","increaseLevelNumber","launchGame","resetGame","inGame","launchBall","ballLaunched","resetBall","balls","nbBrickDestroyed","setBall2dPosition","ball2dPosition","setGlitching","glitching","increaseScoreValue","GameStore","x","y","Subject","StyledButton","styled","button","props","big","enabled","Button","callback","text","style","onClick","useFullScreen","container","sizeHook","fillHeight","useLayoutEffect","updateSize","window","innerHeight","innerWidth","setSize","width","current","height","addEventListener","removeEventListener","BackgroundContainer","div","background","MenuButton","Welcome","useState","size","backgroundContainer","useRef","buttonStyle","letterSpacing","transform","fontSize","ref","marginTop","Box","position","userData","id","strength","color","fillColor","cornerData","isRoof","isTile","setBalls","subs","subscribe","unsubscribe","isWall","isNaN","isCorner","particleSystem","setParticleSystem","buildParticleSystem","material","THREE","transparent","depthTest","sizeAttenuation","opacity","createMaterial","particles","particleCount","p","pX","Math","random","pY","pZ","z","particle","vertices","push","createParticals","ps","customRotation","scene","add","soundAsset","wall","brick","hitSound","UIFx","useThree","useBox","type","args","map","onCollide","e","play","setTimeout","api","set","useFrame","scale","rotation","key","attach","wireframe","receiveShadow","i","Tile","Tiles","setTiles","setCurrentLevel","useEffect","TILES","userDataType","Walls","BRICKS","side","ground","PI","corner","roof","Ball","setBallLaunched","useLoader","cross","useSphere","mass","state","mouse","velocity","castShadow","Paddle","sleepSpeedLimit","paddleColor","setPaddleColor","clampMouseMovement","diffCurrentPos","maxVelocity","isNeg","currentMousePosX","currentMousePosY","diffCurrentPosX","diffCurrentPosY","Lights","shadow","camera","mapSize","intensity","shadow-camera-near","shadow-camera-far","FilmPass","noiseIntensity","scanlinesIntensity","scanlinesCount","grayscale","Pass","call","undefined","FilmShader","error","shader","uniforms","UniformsUtils","clone","ShaderMaterial","vertexShader","fragmentShader","sIntensity","sCount","nIntensity","fsQuad","FullScreenQuad","prototype","assign","create","constructor","render","renderer","writeBuffer","readBuffer","deltaTime","texture","renderToScreen","setRenderTarget","clear","DigitalGlitch","tDiffuse","tDisp","byp","amount","angle","seed","seed_x","seed_y","distortion_x","distortion_y","col_s","GlitchPass","dt_size","generateHeightmap","OrthographicCamera","Scene","quad","Mesh","PlaneBufferGeometry","frustumCulled","factor","Effect","composer","gl","aspect","useMemo","attachArray","maskActive","max","_Math","randFloat","data_arr","Float32Array","val","DataTexture","RGBFormat","FloatType","needsUpdate","extend","EffectComposer","RenderPass","UnrealBloomPass","StyledDiv","Hud","setGamescoreValue","Camera","setDefaultCamera","updateMatrixWorld","fov","far","Game","canvasContainer","shadowMap","iterations","tolerance","defaultContactMaterial","friction","restitution","gravity","allowSleep","StyledTitle","Title","LevelContainer","LevelLocked","Level","unlocked","highscoreValue","LevelsPage","LevelList","Levels","setBestscoreValues","_","getLockedLevels","index","LevelDebrief","winned","buttonLabel","margin","ArkaReact","App","className","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.56940680.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/game_title.62e617f5.png\";","module.exports = __webpack_public_path__ + \"static/media/brick.eed03f13.mp3\";","module.exports = __webpack_public_path__ + \"static/media/wall.4c0964a4.mp3\";","module.exports = __webpack_public_path__ + \"static/media/cross.00397b42.jpg\";","import { BehaviorSubject } from 'rxjs';\nimport * as LEVELS from '../data/levels.json';\n\nclass LevelStore {\n  constructor() {\n    if (!LevelStore.instance) {\n      LevelStore.instance = this;\n      this.tiles = new BehaviorSubject([]);\n    }\n  }\n\n  buildLevel = (levelId) => {\n    this.tiles.next(LEVELS.levels[levelId].layers.flat());\n  };\n\n  getLockedLevels(bestscoreValues){\n    const levels = LEVELS.levels;\n    return [...levels].splice(bestscoreValues.length - 1, levels.length - 1);\n  }\n}\n\nexport const levelStore = new LevelStore();\nObject.freeze(LevelStore);\n","import { BehaviorSubject } from 'rxjs';\nimport { gameStore } from './gameStore';\n\nclass PlayerStore {\n  constructor() {\n    if (!PlayerStore.instance) {\n      PlayerStore.instance = this;\n      this.bestscoreValues = new BehaviorSubject([0]);\n      this.achievements = new BehaviorSubject([]);\n    }\n\n    return PlayerStore.instance;\n  }\n\n  //TODO: call\n  addHighscoreValue = () => {\n    const bestscoreValues = [...this.bestscoreValues.value];\n    bestscoreValues[gameStore.currentLevel.value] = gameStore.scoreValue.value;\n    bestscoreValues[gameStore.currentLevel.value + 1] = 0;\n    this.bestscoreValues.next(bestscoreValues);\n    console.log('bestscoreValues', bestscoreValues)\n  };\n}\n\nexport const playerStore = new PlayerStore();\nObject.freeze(playerStore);\n","/** @format */\n\nimport { Subject, BehaviorSubject } from 'rxjs';\nimport { levelStore } from './levelStore';\nimport { playerStore } from './playerStore';\n\nexport const GAME_STATES = {\n\tWELCOME: 0,\n\tLEVEL_CHOICE: 1,\n\tGAME: 2,\n\tLEVEL_DEBRIEF: 3,\n\tSETTINGS: 4,\n\tABOUT: 5,\n};\nclass GameStore {\n\tconstructor() {\n\t\tif (!GameStore.instance) {\n\t\t\tGameStore.instance = this;\n\t\t\tthis.gameState = new BehaviorSubject(GAME_STATES.WELCOME);\n\t\t\tthis.nbBrickDestroyed = new BehaviorSubject(0);\n\t\t\tthis.ball2dPosition = new BehaviorSubject({x:0,y:0});\n\t\t\tthis.balls = new BehaviorSubject(3);\n\t\t\tthis.scoreValue = new BehaviorSubject(0);\n\t\t\tthis.inGame = new Subject(false);\n\t\t\tthis.ballLaunched = new Subject(false);\n\t\t\tthis.currentLevel = new BehaviorSubject(1);\n\t\t\tthis.glitching = new Subject(true);\n\t\t}\n\t\treturn GameStore.instance;\n\t}\n\tsetGameState = (gameState) => {\n\t\tif (gameState === GAME_STATES.LEVEL_CHOICE) {\n\t\t}\n\t\tthis.gameState.next(gameState);\n\t};\n\tlaunchLevel = (levelId) => {\n\t\tthis.currentLevel.next(levelId);\n\t\tthis.gameState.next(GAME_STATES.GAME);\n\t};\n\tincreaseLevelNumber = () => {\n\t\tthis.currentLevel.next(this.currentLevel.value + 1);\n\t};\n\tlaunchGame = () => {\n\t\tthis.resetGame();\n\t\tthis.inGame.next(true);\n\t};\n\tlaunchBall = () => {\n\t\tthis.ballLaunched.next(true);\n\t};\n\tresetBall = () => {\n\t\tif (this.balls.value > 0) {\n\t\t\tthis.balls.next(this.balls.value - 1);\n\t\t\tthis.ballLaunched.next(false);\n\t\t} else {\n\t\t\tthis.gameState.next(GAME_STATES.LEVEL_DEBRIEF);\n\t\t}\n\t};\n\tresetGame = () => {\n\t\tthis.balls.next(3);\n\t\tthis.nbBrickDestroyed.next(0);\n\t\tthis.scoreValue.next(0);\n\t\tthis.inGame.next(false);\n\t\tthis.ballLaunched.next(false);\n\t};\n\tsetBall2dPosition = (value) => this.ball2dPosition.next(value);\n\tsetGlitching = (value) => this.glitching.next(value);\n\tincreaseScoreValue = (scoreValue) => {\n\t\tthis.scoreValue.next(this.scoreValue.value + scoreValue);\n\t\tif (this.nbBrickDestroyed.value + 1 === levelStore.tiles.value.length) {\n\t\t\tplayerStore.addHighscoreValue();\n\t\t\tthis.gameState.next(GAME_STATES.LEVEL_DEBRIEF);\n\t\t}\n\t\tthis.nbBrickDestroyed.next(this.nbBrickDestroyed.value + 1);\n\t};\n}\n\nexport const gameStore = new GameStore();\nObject.freeze(gameStore);\n","/** @format */\n\nimport React from 'react';\nimport styled from 'styled-components';\n\nexport const StyledButton = styled.button`\n\tcursor: pointer;\n\tbackground: transparent;\n\tfont-size: ${(props) => (props.big ? '2em' : '2.5em')};\n\tborder-radius: ${(props) => (props.big ? '4px' : '2px')};\n\tfont-family: lazer84;\n\tletter-spacing: 0.1rem;\n\tcolor: ${(props) => (props.enabled ? '#e6007e' : 'rgba(90,0,49,0.95)')};\n\tborder-style: none;\n\tpadding: ${(props) => (props.big ? '0.1em 1em' : '0.5em 1em')};\n\ttransition: 0.5s all ease-out;\n\t${(props) => props.enabled && '&:hover { text-shadow: 2px 2px #fff; }'}\n`;\n\nexport function Button({\n\tcallback,\n\ttext,\n\tenabled = true,\n\tbig = false,\n\tstyle = {},\n}) {\n\treturn (\n\t\t<StyledButton\n\t\t\tbig={big}\n\t\t\tenabled={enabled}\n\t\t\tonClick={() => {\n\t\t\t\tif (enabled) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}}\n\t\t\tstyle={{ ...style }}\n\t\t>\n\t\t\t{text}\n\t\t</StyledButton>\n\t);\n}\n","/** @format */\nimport { useLayoutEffect } from 'react';\n\nexport function useFullScreen(container, sizeHook, fillHeight = true) {\n\tuseLayoutEffect(() => {\n\t\tfunction updateSize() {\n\t\t\tif (\n\t\t\t\t(fillHeight && window.innerHeight > window.innerWidth) ||\n\t\t\t\t(!fillHeight && window.innerHeight < window.innerWidth)\n\t\t\t) {\n\t\t\t\tsizeHook.setSize(window.width);\n\t\t\t\tcontainer.current.style.width = `${window.innerWidth}px`;\n\t\t\t\tcontainer.current.style.height = `${window.innerWidth}px`;\n\t\t\t} else {\n\t\t\t\tcontainer.current.style.width = `${window.innerHeight}px`;\n\t\t\t\tcontainer.current.style.height = `${window.innerHeight}px`;\n\t\t\t\tsizeHook.setSize(window.innerHeight);\n\t\t\t}\n\t\t}\n\t\twindow.addEventListener('resize', updateSize);\n\t\tupdateSize();\n\t\treturn () => window.removeEventListener('resize', updateSize);\n\t}, [fillHeight, container, sizeHook]);\n\treturn sizeHook;\n}\n","/** @format */\n\nimport React, { useState, useRef } from 'react';\nimport styled from 'styled-components';\n\nimport { gameStore, GAME_STATES } from '../stores/gameStore';\nimport { Button } from '../components/hud/common/Button';\n\nimport background from '../assets/images/game_title.png';\n\nimport { useFullScreen } from '../hooks/windowResize';\n\nconst BackgroundContainer = styled.div`\n\tbackground: url(${background}) no-repeat center center fixed;\n\t-webkit-background-size: cover;\n\t-moz-background-size: cover;\n\t-o-background-size: cover;\n\tbackground-size: cover;\n\tdisplay: flex;\n\tjustify-content: center;\n\tposition: absolute;\n\tflex-direction: column;\n\talign-items: center; \n`;\nconst MenuButton = ({text, gameState, style}) => <Button\nbig\ncallback={() => {\n\tconsole.log(gameState)\n\tgameStore.setGameState(gameState);\n}}\ntext={text}\nstyle={style}\n/>\n\nexport function Welcome() {\n\tconst [size, setSize] = useState(0);\n\tconst backgroundContainer = useRef(null);\n\tuseFullScreen(backgroundContainer, { size, setSize }, false);\n\tconst buttonStyle = {\n\t\theight: '5%',\n\t\twidth: '50%',\n\t\tletterSpacing: '',\n\t\ttransform: 'rotate(-3deg)',\n\t\tfontSize: '3rem',\n\t};\n\treturn (\n\t\t<BackgroundContainer ref={backgroundContainer}>\n\t\t\t<MenuButton style={{...buttonStyle,marginTop: '7.5em'}} text=\"PLAY\" gameState={GAME_STATES.LEVEL_CHOICE}/>\n\t\t\t<div style={{marginTop: '2.5em'}}>\n\t\t\t\t<MenuButton style={{...buttonStyle,fontSize:'2.25em'}} text=\"SETTINGS\" gameState={GAME_STATES.SETTINGS}/>\n\t\t\t\t<MenuButton style={{...buttonStyle,fontSize:'2.25em'}} text=\"ABOUT\" gameState={GAME_STATES.ABOUT}/>\n\t\t\t</div>\n\t\t</BackgroundContainer>\n\t);\n}\n","/** @format */\n\nimport React, { useLayoutEffect, useState } from 'react';\n\nimport * as THREE from 'three';\nimport { useThree, useFrame } from 'react-three-fiber';\nimport { useBox } from 'use-cannon';\n\nimport UIFx from 'uifx';\n\nimport brick from '../../assets/sounds/brick.mp3';\nimport wall from '../../assets/sounds/wall.mp3';\n\nimport { gameStore } from '../../stores/gameStore';\n\nfunction createParticals(particleCount, ref) {\n\tconst particles = new THREE.Geometry();\n\t// TODO: object pooling\n\tfor (let p = 0; p < particleCount; p++) {\n\t\t// create a particle with random\n\t\t// position values, -250 -> 250\n\t\tconst pX = Math.random() * 2.5 - 1.25 + ref.current.position.x;\n\t\tconst pY = Math.random() * 2.5 - 1.25 + ref.current.position.y;\n\t\tconst pZ = Math.random() * 2.5 - 1.25 + ref.current.position.z;\n\t\tconst particle = new THREE.Vector3(pX, pY, pZ);\n\t\t// add it to the geometry\n\t\tparticles.vertices.push(particle);\n\t}\n\treturn particles;\n}\nconst createMaterial = (color) =>\n\tnew THREE.PointsMaterial({\n\t\tcolor,\n\t\tsize: 0.9,\n\t\ttransparent: true,\n\t\tdepthTest: false,\n\t\tsizeAttenuation: true,\n\t\topacity: 0.9,\n\t});\n\nexport function Box({ position, size = [2, 2, 2], userData, id }) {\n\tconst {\n\t\tstrength,\n\t\tcolor,\n\t\tfillColor,\n\t\tcornerData,\n\t\tisRoof,\n\t\tisTile,\n\t\tscoreValue,\n\t} = userData;\n\n\tconst [balls, setBalls] = useState(3);\n\n\tuseLayoutEffect(() => {\n\t\tconst subs = gameStore.balls.subscribe(setBalls);\n\t\treturn () => subs.unsubscribe();\n\t}, []);\n\n\tconst isWall = isNaN(strength);\n\tconst isCorner = isNaN(cornerData);\n\tconst [particleSystem, setParticleSystem] = useState();\n\t// TODO : Object pooling\n\tfunction buildParticleSystem() {\n\t\tconst material = createMaterial(color);\n\t\tconst particles = createParticals(25, ref, material);\n\n\t\tconst ps = new THREE.Points(particles, material);\n\t\tps.customRotation = Math.random() * 2 - 1;\n\t\tscene.add(ps);\n\t\treturn ps;\n\t}\n\n\tlet soundAsset = null;\n\tif (isWall || isCorner) {\n\t\tsoundAsset = wall;\n\t} else if (isRoof || isTile) {\n\t\tsoundAsset = brick;\n\t}\n\tconst hitSound = new UIFx(soundAsset);\n\tconst { scene } = useThree();\n\n\tconst [ref, api] = useBox(() => {\n\t\treturn {\n\t\t\ttype: isCorner ? 'Static' : 'Kinematic',\n\t\t\targs: size.map((x) => x / 2),\n\t\t\tposition,\n\t\t\tuserData,\n\t\t\tonCollide: (e) => {\n\t\t\t\thitSound.play();\n\t\t\t\tif (isRoof) {\n\t\t\t\t\tgameStore.resetBall();\n\t\t\t\t\tgameStore.setGlitching(true);\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tgameStore.setGlitching(false);\n\t\t\t\t\t\tsetBalls(balls - 1);\n\t\t\t\t\t}, 300);\n\t\t\t\t} else if (!isWall) {\n\t\t\t\t\tuserData.strength--;\n\t\t\t\t\tif (userData.strength <= 0) {\n\t\t\t\t\t\tapi.position.set(-1000, -1000, -100);\n\t\t\t\t\t\tsetParticleSystem(buildParticleSystem(45));\n\t\t\t\t\t\tgameStore.increaseScoreValue(scoreValue);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetParticleSystem(buildParticleSystem(15));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\t});\n\n\tuseFrame(() => {\n\t\tif (particleSystem && particleSystem.material.opacity > 0) {\n\t\t\tparticleSystem.material.opacity -= 0.0075;\n\t\t\tparticleSystem.scale.x += 0.01;\n\t\t\tparticleSystem.scale.y += 0.01;\n\t\t\tparticleSystem.rotation.y += particleSystem.customRotation / 50;\n\t\t}\n\t});\n\t\n\tif (isRoof){\n\t\treturn \t<mesh key={id} ref={ref} userData={userData}/>\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{isTile ? (\n\t\t\t\t<mesh key={id} ref={ref} userData={userData}>\n\t\t\t\t\t<boxGeometry attach=\"geometry\" args={size} />\n\t\t\t\t\t<meshStandardMaterial\n\t\t\t\t\t\tattach=\"material\"\n\t\t\t\t\t\twireframe={true}\n\t\t\t\t\t\tcolor={color}\n\t\t\t\t\t/>\n\t\t\t\t\t<mesh receiveShadow userData={userData}>\n\t\t\t\t\t\t<boxGeometry attach=\"geometry\" args={size.map((i) => i * 0.99)} />\n\t\t\t\t\t\t<meshStandardMaterial attach=\"material\" color={fillColor} />\n\t\t\t\t\t</mesh>\n\t\t\t\t</mesh>\n\t\t\t) : (\n\t\t\t\t<mesh key={id} ref={ref} receiveShadow userData={userData}>\n\t\t\t\t\t<boxGeometry attach=\"geometry\" args={size} receiveShadow />\n\t\t\t\t\t<meshStandardMaterial attach=\"material\" receiveShadow color={color} />\n\t\t\t\t</mesh>\n\t\t\t)}\n\t\t</>\n\t);\n}\n","import React, { useEffect, useState } from 'react';\nimport { Box } from './Box.js';\n\nimport { tiles as TILES } from '../../data/gameBalanceData.json';\n\nimport { levelStore } from '../../stores/levelStore';\nimport { gameStore } from '../../stores/gameStore';\n\nfunction Tile({ position, userData, id }) {\n  return <Box id={id} position={position} userData={userData} />;\n}\n\nexport function Tiles() {\n  const [tiles, setTiles] = useState([]);\n\n  const [currentLevel, setCurrentLevel] = useState(gameStore.currentLevel.value);\n  useEffect(() => {\n    const subs = gameStore.currentLevel.subscribe(setCurrentLevel);\n    subs.add(levelStore.tiles.subscribe(setTiles));\n    levelStore.buildLevel(currentLevel);\n    return () => subs.unsubscribe();\n  }, [currentLevel]);\n\n  return tiles.map((brick, i) => (\n    <Tile key={i} id={i} position={brick.position} userData={TILES[brick.userDataType]} />\n  ));\n}\n","import React from 'react';\nimport { Box } from './Box.js';\n\nimport * as BRICKS from '../../data/gameBalanceData.json';\n\nexport function Walls() {\n  return (\n    <>\n      <Box position={[-12.5, 0, 0]} userData={BRICKS.walls.side} size={[1, 25, 130]} />\n      <Box position={[12.5, 0, 0]} userData={BRICKS.walls.side} size={[1, 25, 130]} />\n      <Box position={[0, 12.5, 0]} userData={BRICKS.walls.side} size={[25, 1, 130]} />\n      <Box position={[0, -12.5, 0]} userData={BRICKS.walls.side} size={[25, 1, 130]} />\n      <Box\n        position={[0, 0, -12.5]}\n        userData={BRICKS.walls.ground}\n        size={[25, 25, 1]}\n        rotation={Math.PI / 2}\n      />\n\n      <Box\n        position={[-12, -12, -12.5]}\n        userData={BRICKS.walls.corner}\n        size={[0.25, 0.25, 130]}\n        rotation={Math.PI / 2}\n      />\n      <Box\n        position={[-12, 12, -12.5]}\n        userData={BRICKS.walls.corner}\n        size={[0.25, 0.25, 130]}\n        rotation={Math.PI / 2}\n      />\n      <Box\n        position={[12, 12, -12.5]}\n        userData={BRICKS.walls.corner}\n        size={[0.25, 0.25, 130]}\n        rotation={Math.PI / 2}\n      />\n      <Box\n        position={[12, -12, -12.5]}\n        userData={BRICKS.walls.corner}\n        size={[0.25, 0.25, 130]}\n        rotation={Math.PI / 2}\n      />\n      <Box\n        position={[0, 12, -12]}\n        userData={BRICKS.walls.corner}\n        size={[130, 0.25, 0.25]}\n        rotation={Math.PI / 2}\n      />\n      <Box\n        position={[0, -12, -12]}\n        userData={BRICKS.walls.corner}\n        size={[130, 0.25, 0.25]}\n        rotation={Math.PI / 2}\n      />\n      <Box\n        position={[12, 0, -12]}\n        userData={BRICKS.walls.corner}\n        size={[0.25, 120, 0.25]}\n        rotation={Math.PI}\n      />\n      <Box\n        position={[-12, 0, -12]}\n        userData={BRICKS.walls.corner}\n        size={[0.25, 120, 0.25]}\n        rotation={Math.PI}\n      />\n      <Box\n        position={[0, 0, 45]}\n        userData={BRICKS.walls.roof}\n        size={[24, 24, 0.001]}\n        rotation={Math.PI / 2}\n      />\n    </>\n  );\n}\n","import React, { useState, useLayoutEffect } from 'react';\nimport { useSphere } from 'use-cannon';\nimport { useFrame, useLoader } from 'react-three-fiber';\n\nimport { gameStore } from '../../stores/gameStore';\n\nimport * as THREE from 'three';\nimport cross from '../../assets/textures/cross.jpg';\nexport function Ball() {\n  const [ballLaunched, setBallLaunched] = useState(false);\n\n  useLayoutEffect(() => {\n    const subs = gameStore.ballLaunched.subscribe(setBallLaunched);\n    return () => subs.unsubscribe();\n  }, []);\n  const map = useLoader(THREE.TextureLoader, cross);\n  const [ref, api] = useSphere(() => ({\n    mass: 1,\n    args: 1,\n    position: [0, 0, 0],\n    onCollide: (e) => {},\n  }));\n  useFrame((state) => {\n    if (!ballLaunched) {\n      api.position.set(state.mouse.x * 10, state.mouse.y * 10, 17.6);\n      api.velocity.set(0, 0, 0, 1);\n    }\n    gameStore.setBall2dPosition({x:ref.current.position.x, y:ref.current.position.y })\n  });\n  return (\n    <mesh castShadow receiveShadow ref={ref}>\n      <sphereBufferGeometry attach=\"geometry\" args={[0.5, 64, 64]} />\n      <meshStandardMaterial map={map} attach=\"material\" />\n    </mesh>\n  );\n}\n","import React, { useEffect, useState } from 'react';\n\nimport { useFrame } from 'react-three-fiber';\nimport { useSphere } from 'use-cannon';\nimport { gameStore } from '../../stores/gameStore';\n\nexport function Paddle() {\n  const [ref, api] = useSphere(() => ({\n    args: 1.3,\n    scale: [1, 1, 0.01],\n    position: [0, 0, 10],\n    sleepSpeedLimit: 4, \n    onCollide: (e) => {},\n  }));\n  const [ paddleColor, setPaddleColor ] = useState('#0a94ab')\n  const [ ball2dPosition, setBall2dPosition ] = useState({x:0, y:0})\n  useEffect(()=> {\n    gameStore.ball2dPosition.subscribe(setBall2dPosition)\n  },[])\n\n  useFrame((state) => {\n    const currentMousePosX = state.mouse.x * 10;\n    const currentMousePosY = state.mouse.y * 10;\n    const diffCurrentPosX = currentMousePosX - ref.current.position.x;\n    const diffCurrentPosY = currentMousePosY - ref.current.position.y;\n    if (ref.current.position.x === ball2dPosition.x){\n      setPaddleColor('#0a94ab')\n    } else {\n      setPaddleColor('#F00')\n    }\n    api.position.set(\n      ref.current.position.x + clampMouseMovement(diffCurrentPosX),\n      ref.current.position.y + clampMouseMovement(diffCurrentPosY),\n      18\n    );\n  });\n\n  function clampMouseMovement(diffCurrentPos, maxVelocity = 1.5) {\n    const isNeg = diffCurrentPos < 0;\n    let diffToAddX = 0;\n    if (isNeg) {\n      diffToAddX = diffCurrentPos < -maxVelocity ? -maxVelocity : diffCurrentPos;\n    } else {\n      diffToAddX = diffCurrentPos > maxVelocity ? maxVelocity : diffCurrentPos;\n    }\n    return diffToAddX;\n  }\n  \n  return (\n    <>\n      <mesh ref={ref} castShadow>\n        <boxGeometry attach=\"geometry\" args={[5, 5, 1]} />\n        <meshBasicMaterial attach=\"material\" wireframe={true} color={paddleColor} />\n      </mesh>\n    </>\n  );\n}\n","import React, { useRef, useLayoutEffect } from 'react';\nimport * as THREE from 'three';\nexport function Lights() {\n  const ref = useRef();\n  useLayoutEffect(() => {\n    ref.current.shadow.camera = new THREE.OrthographicCamera(-100, 100, 100, -100, 0.5, 100);\n    ref.current.shadow.mapSize.width = 2048;\n    ref.current.shadow.mapSize.height = 2048;\n  }, []); \n  return (\n    <>\n      <ambientLight intensity={0.75} />\n      <directionalLight\n        ref={ref}\n        position={[0, 0, 25]}\n        shadow-camera-near={0.1}\n        shadow-camera-far={1500}\n        castShadow\n      />\n    </>\n  );\n}\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport {\n\tShaderMaterial,\n\tUniformsUtils\n} from 'three';   \nimport { Pass } from 'three/examples/jsm/postprocessing/Pass.js';\nimport { FilmShader } from \"three/examples/jsm/shaders/FilmShader.js\";\n\nvar FilmPass = function ( noiseIntensity, scanlinesIntensity, scanlinesCount, grayscale ) {\n\n\tPass.call( this );\n\n\tif ( FilmShader === undefined )\n\t\tconsole.error( \"FilmPass relies on FilmShader\" );\n\n\tvar shader = FilmShader;\n\n\tthis.uniforms = UniformsUtils.clone( shader.uniforms );\n\n\tthis.material = new ShaderMaterial( {\n\n\t\tuniforms: this.uniforms,\n\t\tvertexShader: shader.vertexShader,\n\t\tfragmentShader: shader.fragmentShader\n\n\t} );\n\n\tif ( grayscale !== undefined )\tthis.uniforms.grayscale.value = grayscale;\n\tif ( scanlinesIntensity !== undefined ) this.uniforms.sIntensity.value = scanlinesIntensity;\n\tif ( scanlinesCount !== undefined ) this.uniforms.sCount.value = scanlinesCount;\n    \n\tthis.uniforms.nIntensity.value = 0.1;\n\tthis.fsQuad = new Pass.FullScreenQuad( this.material );\n\n};\n\nFilmPass.prototype = Object.assign( Object.create( Pass.prototype ), {\n\n\tconstructor: FilmPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer, deltaTime /*, maskActive */ ) {\n\n\t\tthis.uniforms[ \"tDiffuse\" ].value = readBuffer.texture;\n\t\tthis.uniforms[ \"time\" ].value += deltaTime;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget( writeBuffer );\n\t\t\tif ( this.clear ) renderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t}\n\n} );\n\nexport { FilmPass };\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\n/**\n * @author felixturner / http://airtight.cc/\n *\n * RGB Shift Shader\n * Shifts red and blue channels from center in opposite directions\n * Ported from http://kriss.cx/tom/2009/05/rgb-shift/\n * by Tom Butterworth / http://kriss.cx/tom/\n *\n * amount: shift distance (1 is width of input)\n * angle: shift angle in radians\n */\n\nimport {\n  DataTexture,\n  FloatType,\n  Math as _Math,\n  Mesh,\n  OrthographicCamera,\n  PlaneBufferGeometry,\n  RGBFormat,\n  Scene,\n  ShaderMaterial,\n  UniformsUtils,\n} from 'three';\nimport { Pass } from 'three/examples/jsm/postprocessing/Pass.js';\n\nvar DigitalGlitch = {\n  uniforms: {\n    tDiffuse: { value: null }, //diffuse texture\n    tDisp: { value: null }, //displacement texture for digital glitch squares\n    byp: { value: 0 }, //apply the glitch ?\n    amount: { value: 0.08 },\n    angle: { value: 0.02 },\n    seed: { value: 0.02 },\n    seed_x: { value: 0.02 }, //-1,1\n    seed_y: { value: 0.02 }, //-1,1\n    distortion_x: { value: 0.5 },\n    distortion_y: { value: 0.6 },\n    col_s: { value: 0.05 },\n  },\n\n  vertexShader: `varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }`,\n\n  fragmentShader: `uniform int byp; //should we apply the glitch\n    uniform sampler2D tDiffuse;\n    uniform sampler2D tDisp;\n    uniform float amount;\n    uniform float angle;\n    uniform float seed;\n    uniform float seed_x;\n    uniform float seed_y;\n    uniform float distortion_x;\n    uniform float distortion_y;\n    uniform float col_s;\n    varying vec2 vUv;\n    float rand(vec2 co){\n      return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n    }\n    void main() {\n      if(byp<1) {\n        vec2 p = vUv;\n        float xs = floor(gl_FragCoord.x / 0.5);\n        float ys = floor(gl_FragCoord.y / 0.5);\n        //based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch\n        vec4 normal = texture2D (tDisp, p*seed*seed);\n        if(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {\n          if(seed_x>0.){\n            p.y = 1. - (p.y + distortion_y);\n          }\n          else {\n            p.y = distortion_y;\n          }\n        }\n        p.x+=normal.x*seed_x*(seed/5.);\n        p.y+=normal.y*seed_y*(seed/5.);\n        //base from RGB shift shader\n        vec2 offset = amount * vec2( cos(angle), sin(angle));\n        vec4 cr = texture2D(tDiffuse, p + offset);\n        vec4 cga = texture2D(tDiffuse, p);\n        vec4 cb = texture2D(tDiffuse, p - offset);\n        gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n        //add noise\n        vec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.05);\n        gl_FragColor = gl_FragColor+ snow;\n      }\n      else {\n        gl_FragColor=texture2D (tDiffuse, vUv);\n      }\n    }`,\n};\n\nvar GlitchPass = function (dt_size) {\n  Pass.call(this);\n  if (DigitalGlitch === undefined) console.error('THREE.GlitchPass relies on THREE.DigitalGlitch');\n  var shader = DigitalGlitch;\n  this.uniforms = UniformsUtils.clone(shader.uniforms);\n  if (dt_size === undefined) dt_size = 64;\n  this.uniforms['tDisp'].value = this.generateHeightmap(dt_size);\n  this.material = new ShaderMaterial({\n    uniforms: this.uniforms,\n    vertexShader: shader.vertexShader,\n    fragmentShader: shader.fragmentShader,\n  });\n  this.camera = new OrthographicCamera(-1, 1, 1, -1, 0, 1);\n  this.scene = new Scene();\n  this.quad = new Mesh(new PlaneBufferGeometry(2, 2), null);\n  this.quad.frustumCulled = false; // Avoid getting clipped\n  this.scene.add(this.quad);\n  this.factor = 0;\n};\n\nGlitchPass.prototype = Object.assign(Object.create(Pass.prototype), {\n  constructor: GlitchPass,\n\n  render: function (renderer, writeBuffer, readBuffer, deltaTime, maskActive) {\n    const factor = Math.max(0, this.factor);\n    this.uniforms['tDiffuse'].value = readBuffer.texture;\n    this.uniforms['seed'].value = Math.random() * factor; //default seeding\n    this.uniforms['byp'].value = 0;\n    if (factor) {\n      this.uniforms['amount'].value = (Math.random() / 90) * factor;\n      this.uniforms['angle'].value = _Math.randFloat(-Math.PI, Math.PI) * factor;\n      this.uniforms['distortion_x'].value = _Math.randFloat(0, 1) * factor;\n      this.uniforms['distortion_y'].value = _Math.randFloat(0, 1) * factor;\n      this.uniforms['seed_x'].value = _Math.randFloat(-0.3, 0.3) * factor;\n      this.uniforms['seed_y'].value = _Math.randFloat(-0.3, 0.3) * factor;\n    } else this.uniforms['byp'].value = 1;\n    this.quad.material = this.material;\n    if (this.renderToScreen) {\n      renderer.setRenderTarget(null);\n      renderer.render(this.scene, this.camera);\n    } else {\n      renderer.setRenderTarget(writeBuffer);\n      if (this.clear) renderer.clear();\n      renderer.render(this.scene, this.camera);\n    }\n  },\n\n  generateHeightmap: function (dt_size) {\n    var data_arr = new Float32Array(dt_size * dt_size * 3);\n    var length = dt_size * dt_size;\n\n    for (var i = 0; i < length; i++) {\n      var val = _Math.randFloat(0, 1);\n      data_arr[i * 3 + 0] = val;\n      data_arr[i * 3 + 1] = val;\n      data_arr[i * 3 + 2] = val;\n    }\n\n    var texture = new DataTexture(data_arr, dt_size, dt_size, RGBFormat, FloatType);\n    texture.needsUpdate = true;\n    return texture;\n  },\n});\n\nexport { GlitchPass };\n","import React, { useRef, useLayoutEffect, useState, useMemo, useEffect } from 'react';\nimport { useFrame, useThree, extend } from 'react-three-fiber';\nimport * as THREE from 'three';\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer';\n\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass';\nimport { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass';\nimport { FilmPass } from './FilmPass';\n\nimport { GlitchPass } from './GlitchPass';\n\nimport { gameStore } from '../../stores/gameStore';\n\nextend({ EffectComposer, RenderPass, UnrealBloomPass, FilmPass, GlitchPass });\n\nexport function Effect() {\n  const [glitching, setGlitching] = useState(true);\n  useLayoutEffect(() => {\n    const subs = gameStore.glitching.subscribe(setGlitching);\n    return () => subs.unsubscribe();\n  }, []);\n  const composer = useRef();\n  const { scene, gl, size,camera } = useThree();\n  const aspect = useMemo(() => new THREE.Vector2(size.width, size.height), [size]);\n  useEffect(() => void composer.current.setSize(size.width, size.height), [size]);\n  useFrame(() => {\n        composer.current.render()},1)\n  return (\n    <effectComposer ref={composer} args={[gl]}>\n      <renderPass attachArray=\"passes\" scene={scene} camera={camera} />\n      <unrealBloomPass attachArray=\"passes\" args={[aspect, 0.25, 0.2, 0]} />\n      <filmPass attachArray=\"passes\" noiseIntensity={0} args={[0.35, 0.6, 1500, false]} />\n      <glitchPass attachArray=\"passes\" factor={glitching ? 1 : 0} />\n    </effectComposer>\n  );\n}\n","/** @format */\n\nimport React, { useState, useLayoutEffect } from 'react';\nimport styled from 'styled-components';\nimport { Button } from './common/Button';\n\nimport { gameStore, GAME_STATES } from '../../stores/gameStore';\nexport const StyledDiv = styled.div`\n\tposition: absolute;\n\ttop: 0;\n\tmargin: 3em 1em 3em -12em;\n\tbackground-color: rgba(0, 0, 0, 0.4);\n\tpadding: 1em;\n`;\n\nexport function Hud({ text }) {\n\tconst [balls, setBalls] = useState(3);\n\tconst [currentLevel, setCurrentLevel] = useState(1);\n\tconst [scoreValue, setGamescoreValue] = useState(0);\n\tuseLayoutEffect(() => {\n\t\tconst subs = gameStore.balls.subscribe(setBalls);\n\t\tsubs.add(gameStore.currentLevel.subscribe(setCurrentLevel));\n\t\tsubs.add(gameStore.scoreValue.subscribe(setGamescoreValue));\n\t\treturn () => subs.unsubscribe();\n\t}, []);\n\treturn (\n\t\t<StyledDiv>\n\t\t\t<p>Balls: {balls}</p>\n\t\t\t<p>Level: {currentLevel + 1}</p>\n\t\t\t<p>Score: {scoreValue}</p>\n\t\t\t<div>\n\t\t\t\t<Button\n\t\t\t\t\tcallback={() => {\n\t\t\t\t\t\tgameStore.resetGame();\n\t\t\t\t\t\tgameStore.setGameState(GAME_STATES.LEVEL_CHOICE);\n\t\t\t\t\t}}\n\t\t\t\t\ttext=\"Back\"\n\t\t\t\t\tenabled\n\t\t\t\t></Button>\n\t\t\t</div>\n\t\t</StyledDiv>\n\t);\n}\n","/** @format */\n\nimport React, { useEffect, useState, useLayoutEffect, useRef } from 'react';\n\nimport { Canvas, useFrame, useThree } from 'react-three-fiber';\nimport { Physics } from 'use-cannon';\n\nimport { gameStore } from '../stores/gameStore';\n\nimport { Tiles } from '../components/game/Tiles';\nimport { Walls } from '../components/game/Walls';\nimport { Ball } from '../components/game/Ball';\nimport { Paddle } from '../components/game/Paddle';\nimport { Lights } from '../components/game/Lights';\nimport { Effect } from '../components/vfx/Effect';\n\nimport { Hud } from '../components/hud/Hud';\n\nimport { useFullScreen } from '../hooks/windowResize';\n\nfunction Camera(props) {\n\tconst [ glitching,setGlitching ] = useState(true)\n\tconst ref = useRef()\n\tconst { setDefaultCamera } = useThree()\n\t// Make the camera known to the system\n\tuseEffect(() => { \n\t\tconst subs = gameStore.glitching.subscribe(setGlitching);\n\t\tsetTimeout(() => {gameStore.setGlitching(false)}, 1000)\n\t\tsetDefaultCamera(ref.current)\n\t\treturn () => subs.unsubscribe();\n\t}, [setDefaultCamera])\n\n\t// Update it every frame\n\tuseFrame(() => {\n\t\tif (!glitching && ref.current.position.z > 45){\n\t\t\tif (ref.current.position.z < 75){\n\t\t\t\t\n\t\t\t}\n\t\t\tref.current.position.z -= 0.75\n\t\t}\n\t\tref.current.updateMatrixWorld()\n\t})\n\t\n\treturn <perspectiveCamera ref={ref} position={[0, 0, 85]} {...props} fov={45} far={157} />\n}\n\nexport function Game() {\n\tconst [balls, setBalls] = useState(3);\n\tconst [ballLaunched, setBallLaunched] = useState(false);\n\tconst [size, setSize] = useState(0);\n\n\tconst canvasContainer = useRef(null);\n\n\tuseFullScreen(canvasContainer, { size, setSize });\n\n\tuseLayoutEffect(() => {\n\t\tconst subs = gameStore.balls.subscribe(setBalls);\n\t\tsubs.add(gameStore.ballLaunched.subscribe(setBallLaunched));\n\t\treturn () => subs.unsubscribe();\n\t}, []);\n\n\tfunction handleClick() {\n\t\tif (balls < 0) {\n\t\t\tgameStore.resetGame();\n\t\t} else if (!ballLaunched) {\n\t\t\tgameStore.launchBall();\n\t\t} else {\n\t\t\tsetBalls(balls - 1);\n\t\t}\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<div id=\"game\" onClick={handleClick}>\n\t\t\t\t<div ref={canvasContainer}>\n\t\t\t\t\t<Canvas\n\t\t\t\t\t\tstyle={{ width: '100%', height: '100%' }}\n\t\t\t\t\t\tshadowMap\n\t\t\t\t\t>\n\t\t\t\t\t\t<Camera />\n\t\t\t\t\t\t<Lights />\n\t\t\t\t\t\t<Physics\n\t\t\t\t\t\t\titerations={20}\n\t\t\t\t\t\t\ttolerance={0.0001}\n\t\t\t\t\t\t\tdefaultContactMaterial={{\n\t\t\t\t\t\t\t\tfriction: 0,\n\t\t\t\t\t\t\t\trestitution: 1,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tgravity={[0, 0, 0]}\n\t\t\t\t\t\t\tallowSleep={false}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Walls />\n\t\t\t\t\t\t\t<Tiles />\n\t\t\t\t\t\t\t<Paddle />\n\t\t\t\t\t\t\t<Ball />\n\t\t\t\t\t\t\t<Effect />\n\t\t\t\t\t\t</Physics>\n\t\t\t\t\t</Canvas>\n\t\t\t\t\t<Hud />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","/** @format */\n\nimport React from 'react';\nimport styled from 'styled-components';\n\nexport const StyledTitle = styled.div`\n\th1 {\n\t\twidth: 100%;\n\t\ttext-align: center;\n\t\tfont-size: 4em;\n\t}\n`;\n\nexport function Title({ text }) {\n\treturn (\n\t\t<StyledTitle>\n\t\t\t<h1>{text}</h1>\n\t\t</StyledTitle>\n\t);\n}\n","/** @format */\n\nimport React from 'react';\nimport styled from 'styled-components';\n\nimport { gameStore } from '../../stores/gameStore';\n\nimport { Button } from './common/Button';\n\nexport const LevelContainer = styled.div`\n\tjustify-content: space-evenly;\n\tgrid-row: 1;\n\tdisplay: flex;\n`;\n\nexport const LevelLocked = styled.div`\n\tjustify-content: space-evenly;\n\tgrid-row: 1;\n\tdisplay: flex;\n\talign-self: center;\n`;\n\nexport const Level = ({ levelId, unlocked, highscoreValue }) => {\n\treturn (\n\t\t<div>\n\t\t\t<LevelContainer>\n\t\t\t\t<div>\n\t\t\t\t\t<h2>Level {levelId + 1}</h2>\n\t\t\t\t\t{unlocked && <h3>Highscore: {highscoreValue}</h3>}\n\t\t\t\t</div>\n\t\t\t{unlocked ? (\n\t\t\t\t<Button\n\t\t\t\t\tcallback={() => {\n\t\t\t\t\t\tgameStore.launchLevel(levelId);\n\t\t\t\t\t}}\n\t\t\t\t\ttext=\"Play\"\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<LevelLocked>\n\t\t\t\t\t<div>FINISH LEVEL {levelId} TO UNLOCK</div>\n\t\t\t\t</LevelLocked>\n\t\t\t)}\n\t\t\t</LevelContainer>\n\t\t</div>\n\t);\n};\n","/** @format */\n\nimport React, { useLayoutEffect, useState } from 'react';\nimport styled from 'styled-components';\n\nimport { gameStore, GAME_STATES } from '../stores/gameStore';\nimport { playerStore } from '../stores/playerStore';\n\nimport { Button } from '../components/hud/common/Button';\nimport { Title } from '../components/hud/common/Title';\n\nimport { Level } from '../components/hud/Level';\nimport { levelStore } from '../stores/levelStore';\n\nconst LevelsPage = styled.div`\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\tcolor:#2e8693;\n\ttext-shadow: 2px 2px #60f2ff;\n`;\n\nconst LevelList = styled.div`\n\ttext-align: center;\n\theight: 65%;\n\twidth: 100%;\n`;\n\nexport const Levels = () => {\n\tconst [bestscoreValues, setBestscoreValues] = useState([0]);\n\tuseLayoutEffect(() => {\n\t\tconst subs = playerStore.bestscoreValues.subscribe(setBestscoreValues);\n\t\treturn () => subs.unsubscribe();\n\t}, []);\n\treturn (\n\t\t<LevelsPage>\n\t\t\t<Title text=\"LEVELS\" />\n\t\t\t<LevelList>\n\t\t\t\t{bestscoreValues.map((_, levelId) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Level\n\t\t\t\t\t\t\tkey={levelId}\n\t\t\t\t\t\t\tlevelId={levelId}\n\t\t\t\t\t\t\thighscoreValue={bestscoreValues[levelId]}\n\t\t\t\t\t\t\tunlocked={true}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t\t{levelStore.getLockedLevels(bestscoreValues).map((_, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Level\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tlevelId={index + bestscoreValues.length}\n\t\t\t\t\t\t\thighscoreValue={0}\n\t\t\t\t\t\t\tunlocked={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</LevelList>\n\t\t\t<Button\n\t\t\t\tcallback={() => {\n\t\t\t\t\tgameStore.setGameState(GAME_STATES.WELCOME);\n\t\t\t\t}}\n\t\t\t\tenabled\n\t\t\t\ttext=\"Back\"\n\t\t\t/>\n\t\t\t<div style={{ marginTop: '3em' }}></div>\n\t\t</LevelsPage>\n\t);\n};\n","/** @format */\n\nimport React from 'react';\n\nimport { gameStore, GAME_STATES } from '../stores/gameStore';\nimport { levelStore } from '../stores/levelStore';\n\nimport { Button } from '../components/hud/common/Button';\n\nexport function LevelDebrief() {\n\tconst winned =\n\t\tgameStore.nbBrickDestroyed.value + 1 === levelStore.tiles.value.length;\n\tconst buttonLabel = winned ? 'Next Level' : 'Play again';\n\treturn (\n\t\t<div style={{ margin: 'auto' }}>\n\t\t\t<h2>Level {winned ? 'Cleared' : 'Failed'}</h2>\n\t\t\t<h3>Score: {gameStore.scoreValue.value}</h3>\n\t\t\t<Button\n\t\t\t\tcallback={() => {\n\t\t\t\t\tif (!winned) {\n\t\t\t\t\t\tgameStore.resetGame();\n\t\t\t\t\t\tgameStore.setGameState(GAME_STATES.LEVEL_CHOICE);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tgameStore.resetGame();\n\t\t\t\t\t\tgameStore.increaseLevelNumber();\n\t\t\t\t\t\tgameStore.setGameState(GAME_STATES.GAME);\n\t\t\t\t\t} \n\t\t\t\t}}\n\t\t\t\ttext={buttonLabel}/>\n\t\t\t\t\n\t\t\t\n\t\t</div>\n\t);\n}\n","import React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { gameStore, GAME_STATES } from './stores/gameStore';\n\nimport { Welcome } from './pages/Welcome';\nimport { Game } from './pages/Game';\nimport { Levels } from './pages/Levels';\nimport { LevelDebrief } from './pages/LevelDebrief';\n\nimport './styles.css';\n\nconst ArkaReact = ({ gameState }) => {\n  switch (gameState) {\n    case GAME_STATES.WELCOME:\n      return <Welcome />;\n    case GAME_STATES.LEVEL_CHOICE:\n      return <Levels />;\n    case GAME_STATES.GAME:\n      return <Game />;\n    case GAME_STATES.LEVEL_DEBRIEF:\n      return <LevelDebrief />;\n    default:\n      return <Welcome />;\n  }\n};\n\nexport default function App() {\n  const [gameState, setGameState] = useState(GAME_STATES.WELCOME);\n  useEffect(() => {\n    const subs = gameStore.gameState.subscribe(setGameState);\n    return () => subs.unsubscribe();\n  }, []);\n\n  return (\n    <div className=\"main\">\n      <ArkaReact gameState={gameState} />\n    </div>\n  );\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}