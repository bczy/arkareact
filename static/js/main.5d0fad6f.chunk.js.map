{"version":3,"sources":["assets/images/underline.png","assets/images/game_title.png","assets/sounds/brick.mp3","assets/sounds/wall.mp3","assets/textures/cross.jpg","subjects/levelStore.js","subjects/playerStore.js","subjects/gameStore.js","components/hud/constants.js","components/hud/common/Button.js","hooks/windowResize.js","pages/Welcome.js","utils/particles.js","components/game/Tile.js","components/game/Tiles.js","components/game/Box.js","components/game/Walls.js","components/game/Ball.js","components/game/Paddle.js","components/game/Lights.js","components/vfx/FilmPass.js","components/vfx/GlitchPass.js","components/vfx/Effect.js","components/hud/Hud.js","components/game/Bonus.js","components/game/Roof.js","components/game/Camera.js","pages/Game.js","components/hud/common/Title.js","components/hud/Level.js","components/hud/common/PageContainer.js","pages/Levels.js","pages/LevelDebrief.js","pages/Settings.js","pages/About.js","index.js"],"names":["module","exports","LevelStore","buildLevel","levelId","tiles","next","LEVELS","layers","flat","instance","this","BehaviorSubject","bestscoreValues","levels","splice","length","levelStore","Object","freeze","playerStore","addHighscoreValue","value","gameStore","currentLevel","scoreValue","PlayerStore","achievements","GAME_STATES","setGameState","gameState","launchLevel","increaseLevelNumber","launchGame","resetGame","inGame","launchBall","ballLaunched","resetBall","lifes","bonusBalls","setGlitching","setTimeout","getValue","nbBrickDestroyed","addBonusBall","bonusType","position","id","removeBonusBall","filter","bonusItem","console","log","setBall2dPosition","ball2dPosition","glitching","increaseScoreValue","GameStore","x","y","Subject","ballLost","flexCenter","display","justifyContent","StyledButton","styled","button","props","enabled","Underline","img","textLength","Button","callback","text","style","useState","show","useTransition","from","opacity","enter","leave","config","duration","map","key","div","onClick","src","underline","alt","buttonStyle","height","width","border","transform","fontSize","MenuButton","useFullScreen","container","sizeHook","fillHeight","useLayoutEffect","updateSize","window","innerHeight","innerWidth","setSize","current","addEventListener","removeEventListener","BackgroundContainer","background","SubMenuButtons","Welcome","size","backgroundContainer","useRef","flexDirection","alignItems","marginTop","ref","createParticals","particleCount","vertices","p","pX","Math","random","pY","pZ","z","push","geometry","THREE","setAttribute","createMaterial","color","transparent","depthTest","sizeAttenuation","Tile","strength","fillColor","bonus","particlesPool","initialStrength","hitSound","UIFx","brick","useBox","type","args","onCollide","e","play","children","api","set","material","useFrame","i","scale","useEffect","particles","customRotation","attach","wireframe","receiveShadow","Tiles","setTiles","setCurrentLevel","subs","subscribe","add","unsubscribe","TILES","userDataType","Box","cornerData","wall","isCorner","isNaN","Walls","BRICKS","side","ground","rotation","PI","corner","Ball","setBallLaunched","useLoader","cross","useSphere","mass","fixedRotation","body","userData","isRoof","state","mouse","velocity","castShadow","Paddle","sleepSpeedLimit","paddleColor","setPaddleColor","clampMouseMovement","diffCurrentPos","maxVelocity","isNeg","currentMousePosX","currentMousePosY","diffCurrentPosX","diffCurrentPosY","diffX","diffY","factor","abs","factor2","Lights","shadow","camera","mapSize","intensity","shadow-camera-near","shadow-camera-far","FilmPass","noiseIntensity","scanlinesIntensity","scanlinesCount","grayscale","Pass","call","undefined","FilmShader","error","shader","uniforms","UniformsUtils","clone","ShaderMaterial","vertexShader","fragmentShader","sIntensity","sCount","nIntensity","fsQuad","FullScreenQuad","prototype","assign","create","constructor","render","renderer","writeBuffer","readBuffer","deltaTime","texture","renderToScreen","setRenderTarget","clear","DigitalGlitch","tDiffuse","tDisp","byp","amount","angle","seed","seed_x","seed_y","distortion_x","distortion_y","col_s","GlitchPass","dt_size","generateHeightmap","OrthographicCamera","scene","Scene","quad","Mesh","PlaneBufferGeometry","frustumCulled","Effect","composer","useThree","gl","aspect","useMemo","attachArray","maskActive","max","_Math","randFloat","data_arr","Float32Array","val","DataTexture","RGBFormat","FloatType","needsUpdate","extend","EffectComposer","RenderPass","UnrealBloomPass","StyledDiv","Hud","setLifes","setGamescoreValue","Bonus","applyImpulse","Roof","remove","Camera","zooming","setZooming","setDefaultCamera","updateMatrixWorld","fov","far","Game","setBonus","canvasContainer","shadowMap","iterations","tolerance","defaultContactMaterial","friction","restitution","gravity","allowSleep","StyledTitle","Title","LevelContainer","LevelLocked","Level","unlocked","highscoreValue","StyledPageContainer","PageContainer","title","LevelList","Levels","setBestscoreValues","_","getLockedLevels","index","LevelDebrief","winned","buttonLabel","margin","SettingsContent","PanelTitle","StyledSliderContainer","SliderContainer","label","marginLeft","StyledSettingsPanel","SettingsPanel","Settings","AboutContent","About","href","Arkeact","App","className","ReactDOM","document","getElementById"],"mappings":"ogEAAAA,EAAOC,QAAU,IAA0B,uC,mBCA3CD,EAAOC,QAAU,IAA0B,wC,mBCA3CD,EAAOC,QAAU,IAA0B,mC,mBCA3CD,EAAOC,QAAU,IAA0B,kC,mBCA3CD,EAAOC,QAAU,IAA0B,mC,oOCGrCC,E,WACJ,aAAe,IAAD,gCAOdC,WAAa,SAACC,GACZ,EAAKC,MAAMC,KAAKC,IAAcH,GAASI,OAAOC,SAPzCP,EAAWQ,WACdR,EAAWQ,SAAWC,KACtBA,KAAKN,MAAQ,IAAIO,IAAgB,K,4DAQrBC,GACd,IAAMC,EAASP,IACf,OAAO,YAAIO,GAAQC,OAAOF,EAAgBG,OAAQF,EAAOE,OAAS,O,KAIzDC,EAAa,IAAIf,EAC9BgB,OAAOC,OAAOjB,G,ICCDkB,EAAc,IAnBzB,aAAe,IAAD,OAOZ,OAPY,yBAWdC,kBAAoB,WAClB,IAAMR,EAAe,YAAO,EAAKA,gBAAgBS,OACjDT,EAAgBU,EAAUC,aAAaF,OAASC,EAAUE,WAAWH,MACrET,EAAgBU,EAAUC,aAAaF,MAAQ,GAAK,EACpD,EAAKT,gBAAgBP,KAAKO,IAdrBa,EAAYhB,WACfgB,EAAYhB,SAAWC,KACvBA,KAAKE,gBAAkB,IAAID,IAAgB,CAAC,IAC5CD,KAAKgB,aAAe,IAAIf,IAAgB,KAGnCc,EAAYhB,UAavBQ,OAAOC,OAAOC,GClBP,IAAMQ,EACH,EADGA,EAEE,EAFFA,EAGN,EAHMA,EAIG,EAJHA,EAKF,EALEA,EAML,EAmFKL,EAAY,IAhFxB,aAAe,IAAD,OAeb,OAfa,yBAiBdM,aAAe,SAACC,GAGf,EAAKA,UAAUxB,KAAKwB,IApBP,KAsBdC,YAAc,SAAC3B,GACd,EAAKoB,aAAalB,KAAKF,GACvB,EAAK0B,UAAUxB,KAAKsB,IAxBP,KA0BdI,oBAAsB,WACrB,EAAKR,aAAalB,KAAK,EAAKkB,aAAaF,MAAQ,IA3BpC,KA6BdW,WAAa,WACZ,EAAKC,YACL,EAAKC,OAAO7B,MAAK,IA/BJ,KAiCd8B,WAAa,WACZ,EAAKC,aAAa/B,MAAK,IAlCV,KAoCdgC,UAAY,WACP,EAAKC,MAAMjB,MAAQ,GACtB,EAAKiB,MAAMjC,KAAK,EAAKiC,MAAMjB,MAAQ,GACnC,EAAKe,aAAa/B,MAAK,GACvB,EAAKkC,WAAWlC,KAAK,IACrB,EAAKmC,cAAa,GAClBC,YAAW,WACV,EAAKD,cAAa,GAClB,EAAKF,MAAMjC,KAAK,EAAKiC,MAAMI,WAAa,KACtC,MAEH,EAAKb,UAAUxB,KAAKsB,IA/CR,KAkDdM,UAAY,WACX,EAAKK,MAAMjC,KAAK,GAChB,EAAKkC,WAAWlC,KAAK,IACrB,EAAKsC,iBAAiBtC,KAAK,GAC3B,EAAKmB,WAAWnB,KAAK,GACrB,EAAK6B,OAAO7B,MAAK,GACjB,EAAK+B,aAAa/B,MAAK,IAxDV,KA0DduC,aAAe,SAACC,EAAWC,EAAUC,GACpC,EAAKR,WAAWlC,KAAhB,sBAAyB,EAAKkC,WAAWG,YAAzC,CAAoD,CAACG,YAAWC,WAAUC,GAAI,EAAKR,WAAWG,WAAW3B,YA3D5F,KA6DdiC,gBAAkB,SAACD,GAClB,EAAKR,WAAWlC,KAAK,EAAKkC,WAAWG,WAAWO,QAAO,SAAAC,GAEtD,OADAC,QAAQC,IAAIL,EAAIG,GACTA,EAAUH,KAAOA,OAhEZ,KAkEdM,kBAAoB,SAAChC,GAAD,OAAW,EAAKiC,eAAejD,KAAKgB,IAlE1C,KAmEdmB,aAAe,SAACnB,GAAD,OAAW,EAAKkC,UAAUlD,KAAKgB,IAnEhC,KAoEdmC,mBAAqB,SAAChC,GACrB,EAAKA,WAAWnB,KAAK,EAAKmB,WAAWH,MAAQG,GACzC,EAAKmB,iBAAiBtB,MAAQ,IAAML,EAAWZ,MAAMiB,MAAMN,QAC9D0B,YAAW,WACVtB,EAAYC,oBACZ,EAAKS,UAAUxB,KAAKsB,KACnB,KAEH,EAAKgB,iBAAiBtC,KAAK,EAAKsC,iBAAiBtB,MAAQ,IA3EpDoC,EAAUhD,WACdgD,EAAUhD,SAAWC,KACrBA,KAAKmB,UAAY,IAAIlB,IAAgBgB,GACrCjB,KAAKiC,iBAAmB,IAAIhC,IAAgB,GAC5CD,KAAK4C,eAAiB,IAAI3C,IAAgB,CAAC+C,EAAE,EAAEC,EAAE,IACjDjD,KAAK4B,MAAQ,IAAI3B,IAAgB,GACjCD,KAAK6B,WAAa,IAAI5B,IAAgB,IACtCD,KAAKc,WAAa,IAAIb,IAAgB,GACtCD,KAAKwB,OAAS,IAAI0B,KAAQ,GAC1BlD,KAAK0B,aAAe,IAAIwB,KAAQ,GAChClD,KAAKmD,SAAW,IAAID,KAAQ,GAC5BlD,KAAKa,aAAe,IAAIZ,IAAgB,GACxCD,KAAK6C,UAAY,IAAIK,KAAQ,IAEvBH,EAAUhD,UAkEnBQ,OAAOC,OAAOI,G,kCChGDwC,EAAa,CACzBC,QAAS,OACTC,eAAgB,U,0cCQjB,IAAMC,EAAeC,IAAOC,OAAV,KAIR,SAACC,GAAD,OAAYA,EAAMC,QAAU,UAAY,YAO/CP,GACA,SAACM,GAAD,OAAWA,EAAMC,SAAW,0DAC5B,SAACD,GAAD,OAAWA,EAAMC,SAAW,kFAGzBC,EAAYJ,IAAOK,IAAV,KAGZ,SAACH,GAAD,uBAAwC,GAAnBA,EAAMI,WAA3B,UAII,SAASC,EAAT,GAKH,IAJHC,EAIE,EAJFA,SACAC,EAGE,EAHFA,KAGE,IAFFN,eAEE,aADFO,aACE,MADM,GACN,IACeC,oBAAS,GAAlBC,EADN,oBASF,OAPoBC,YAAcD,EAAM,KAAM,CAC7CE,KAAK,aAAIC,QAAS,GAAMnB,GACxBoB,MAAO,CAAED,QAAS,GAClBE,MAAO,CAAEF,QAAS,GAClBG,OAAQ,CAAEC,SAAU,QAGFC,KAAI,gBAAGC,EAAH,EAAGA,IAAKnB,EAAR,EAAQA,MAAR,OACtB,kBAAC,IAASoB,IAAV,CAAcD,IAAKA,EAAKX,MAAOR,GAC9B,kBAACH,EAAD,CACCI,QAASA,EACToB,QAAS,WACJpB,GACHK,KAGFE,MAAK,eAAOA,IAEXD,EACAN,GAAW,kBAACC,EAAD,CAAWoB,IAAKC,IAAWnB,WAAYG,EAAK5D,OAAQ6E,IAAK,UAMzE,IAAMC,EAAc,CACnBC,OAAQ,KACRC,MAAO,QACPC,OAAQ,OACRC,UAAW,gBACXC,SAAU,OACV,cAAe,UAGHC,EAAa,SAAC,GAAD,IAAExB,EAAF,EAAEA,KAAMC,EAAR,EAAQA,MAAOF,EAAf,EAAeA,SAAf,OACzB,kBAACD,EAAD,CACCC,SAAUA,EACVC,KAAMA,EACNC,MAAK,2BAAMA,GAAN,IAAaiB,mB,iBC3Eb,SAASO,EAAcC,EAAWC,GAA8B,IAApBC,IAAmB,yDAoBrE,OAnBAC,2BAAgB,WACf,SAASC,IAENF,GAAcG,OAAOC,YAAcD,OAAOE,aACzCL,GAAcG,OAAOC,YAAcD,OAAOE,YAE5CN,EAASO,QAAQH,OAAOX,OACxBM,EAAUS,QAAQlC,MAAMmB,MAAxB,UAAmCW,OAAOE,WAA1C,MACAP,EAAUS,QAAQlC,MAAMkB,OAAxB,UAAoCY,OAAOE,WAA3C,QAEAP,EAAUS,QAAQlC,MAAMmB,MAAxB,UAAmCW,OAAOC,YAA1C,MACAN,EAAUS,QAAQlC,MAAMkB,OAAxB,UAAoCY,OAAOC,YAA3C,MACAL,EAASO,QAAQH,OAAOC,cAK1B,OAFAD,OAAOK,iBAAiB,SAAUN,GAClCA,IACO,kBAAMC,OAAOM,oBAAoB,SAAUP,MAChD,CAACF,EAAYF,EAAWC,IACpBA,E,4YCXR,IAAMW,EAAsB/C,IAAOsB,IAAV,IACN0B,IAEhBpD,GAMGqD,EAAiBjD,IAAOsB,IAAV,KAOb,SAAS4B,IAAW,IAAD,EACCvC,mBAAS,GADV,mBACjBwC,EADiB,KACXR,EADW,OAERhC,oBAAS,GAAlBC,EAFiB,oBAGnBwC,EAAsBC,iBAAO,MAUnC,OATAnB,EAAckB,EAAqB,CAAED,OAAMR,YAAW,GAElC9B,YAAcD,EAAM,KAAM,CAC7CE,KAAM,CAAGC,QAAS,EAAGlB,QAAS,OAAOyD,cAAe,SAAUC,WAAY,SAASC,UAAW,OAC9FxC,MAAO,CAAED,QAAS,GAClBE,MAAO,CAAEF,QAAS,GAClBG,OAAQ,CAAEC,SAAU,OAGFC,KAAI,gBAAGC,EAAH,EAAGA,IAAKnB,EAAR,EAAQA,MAAR,OACtB,kBAAC6C,EAAD,CAAqBU,IAAKL,GACzB,kBAAC,IAAS9B,IAAV,CAAcD,IAAKA,EAAKX,MAAOR,GAC9B,kBAAC,EAAD,CACCQ,MAAO,CAAE8C,UAAW,MAAOxB,SAAU,SACrCvB,KAAK,OACLD,SAAU,kBAAMpD,EAAUM,aAAaD,MACxC,kBAACwF,EAAD,KACC,kBAAC,EAAD,CACC5B,IAAK,EACLZ,KAAK,WACLD,SAAU,WAAOpD,EAAUM,aAAaD,MACzC,kBAAC,EAAD,CACC4D,IAAK,EACLZ,KAAK,QACLD,SAAU,kBAAMpD,EAAUM,aAAaD,Y,qECtDhCiG,GAAkB,SAACC,EAAeF,EAAKN,GAGnD,IAFA,IAAMS,EAAW,GAERC,EAAI,EAAGA,EAAIF,EAAeE,IAAK,CACvC,IAAMC,EAAKC,KAAKC,SAAWb,EAAK3D,EAAI2D,EAAK3D,EAAIiE,EAAIb,QAAQhE,SAASY,EAAI2D,EAAK3D,EAAI,EACzEyE,EAAKF,KAAKC,SAAWb,EAAK1D,EAAI0D,EAAK1D,EAAIgE,EAAIb,QAAQhE,SAASa,EAAI0D,EAAK1D,EAAI,EACzEyE,EAAKT,EAAIb,QAAQhE,SAASuF,EAAI,GACpCP,EAASQ,KAAKN,EAAIG,EAAIC,GAEvB,IAAMG,EAAW,IAAIC,iBAErB,OADAD,EAASE,aAAc,WAAY,IAAID,yBAA8BV,EAAU,IACxES,GAGKG,GAAiB,SAACC,GAAD,OAC7B,IAAIH,iBAAqB,CACxBG,QACAtB,KAAM,GACNuB,aAAa,EACbC,WAAW,EACXC,iBAAiB,EACjB7D,QAAS,MCVJ,SAAS8D,GAAT,GASC,IARAjG,EAQD,EARCA,SACAkG,EAOD,EAPCA,SACAL,EAMD,EANCA,MACAM,EAKD,EALCA,UACAzH,EAID,EAJCA,WACAuB,EAGD,EAHCA,GACAmG,EAED,EAFCA,MAED,IADC7B,YACD,MADQ,CAAC,EAAG,EAAG,GACf,EAEF8B,EAAgB,GAEdC,EAAkBJ,EAClBK,EAAW,IAAIC,IAAKC,KALpB,EAOaC,aAAO,WACzB,MAAO,CACNC,KAAK,YACLC,KAAMrC,EAAK/B,KAAI,SAAC5B,GAAD,OAAOA,EAAI,KAC1BZ,WACA6G,UAAW,SAACC,GACXP,EAASQ,OACGb,IACArB,EAAIb,QAAQgD,SAASxB,KAAKa,EAAcH,IACpCA,GAAY,GACZe,EAAIjH,SAASkH,KAAK,KAAO,KAAO,KAChC1I,EAAUkC,mBAAmBhC,GACzB0H,GACA5H,EAAUsB,aAAasG,EAAMpG,IAGjC6E,EAAIb,QAAQgD,SAAS,GAAGG,SAAShF,QAAU+D,EAAWI,OAvBnE,mBAOCzB,EAPD,KAOMoC,EAPN,KAkDN,OArBAG,aAAS,WACR,IAAK,IAAIC,EAAI,EAAIA,EAAIxC,EAAIb,QAAQgD,SAAS/I,OAAQoJ,IAC7CxC,EAAIb,QAAQgD,SAASK,IAAMxC,EAAIb,QAAQgD,SAASK,GAAGF,SAAShF,QAAU,IACzE0C,EAAIb,QAAQgD,SAASK,GAAGF,SAAShF,SAAW,MAC5C0C,EAAIb,QAAQgD,SAASK,GAAGC,MAAM1G,GAAK,IACnCiE,EAAIb,QAAQgD,SAASK,GAAGC,MAAMzG,GAAK,QAKtC0G,qBAAU,WACH,IAAK,IAAIF,EAAI,EAAGA,EAAInB,EAAUmB,IAAI,CAC9B,IAAMF,EAAWvB,GAAeC,GAC1BJ,EAAWX,GAAgB,GAAID,EAAK,CAACjE,EAAG2D,EAAK,GAAI1D,EAAG0D,EAAK,KACzDiD,EAAY,IAAI9B,SAAaD,EAAU0B,GAC7CK,EAAUC,eAAiB,EAC3BpB,EAAcb,KAAKgC,MAG3B,IAGI,oCACI,0BAAM/E,IAAKxC,EAAI4E,IAAKA,GAChB,iCAAa6C,OAAO,WAAWd,KAAMrC,IACrC,0CACImD,OAAO,WACPC,WAAW,EACX9B,MAAOA,IAEX,0BAAM+B,eAAa,GACf,iCAAaF,OAAO,WAAWd,KAAMrC,EAAK/B,KAAI,SAAC6E,GAAD,MAAW,IAAJA,OACrD,0CAAsBK,OAAO,WAAW7B,MAAOM,OC5E5D,SAAS0B,KAAS,IAAD,EACI9F,mBAAS,IADb,mBACfzE,EADe,KACRwK,EADQ,OAGkB/F,mBAASvD,EAAUC,aAAaF,OAHlD,mBAGfE,EAHe,KAGDsJ,EAHC,KAWtB,OAPAR,qBAAU,WACR,IAAMS,EAAOxJ,EAAUC,aAAawJ,UAAUF,GAG9C,OAFAC,EAAKE,IAAIhK,EAAWZ,MAAM2K,UAAUH,IACpC5J,EAAWd,WAAWqB,GACf,kBAAMuJ,EAAKG,iBACjB,CAAC1J,IAEGnB,EAAMkF,KAAI,SAACiE,EAAOY,GAAR,OACf,kBAACpB,GAAD,eACExD,IAAK4E,EACLpH,GAAIoH,EACJrH,SAAUyG,EAAMzG,UACZoI,IAAY3B,EAAM4B,cAJxB,CAKEjC,MAAQK,EAAML,Y,wBChBb,SAASkC,GAAT,GAMF,IALHtI,EAKE,EALFA,SACA6F,EAIE,EAJFA,MACA0C,EAGE,EAHFA,WACAtI,EAEE,EAFFA,GAEE,IADFsE,YACE,MADK,CAAC,EAAG,EAAG,GACZ,EAEGgC,EAAW,IAAIC,IAAKgC,MAEpBC,EAAWC,MAAMH,GAJpB,EAMW7B,aAAO,WACpB,MAAO,CACNC,KAAM8B,EAAW,SAAW,YAC5B7B,KAAMrC,EACNvE,WACA6G,UAAW,SAACC,GACXP,EAASQ,YANLlC,EANJ,oBAgBH,OAAO,0BAAMpC,IAAKxC,EAAI4E,IAAKA,EAAK+C,eAAa,GAC3C,iCAAaF,OAAO,WAAWd,KAAMrC,EAAMqD,eAAa,IACxD,0CAAsBF,OAAO,WAAWE,eAAa,EAAC/B,MAAOA,KC3BzD,SAAS8C,KACd,OACE,oCACE,kBAACL,GAAD,eAAKtI,SAAU,EAAE,KAAM,EAAG,IAAQ4I,IAAaC,KAA/C,CAAqDtE,KAAM,CAAC,EAAG,GAAI,QACnE,kBAAC+D,GAAD,eAAKtI,SAAU,CAAC,KAAM,EAAG,IAAQ4I,IAAaC,KAA9C,CAAoDtE,KAAM,CAAC,EAAG,GAAI,QAClE,kBAAC+D,GAAD,eAAKtI,SAAU,CAAC,EAAG,KAAM,IAAQ4I,IAAaC,KAA9C,CAAoDtE,KAAM,CAAC,GAAI,EAAG,QAClE,kBAAC+D,GAAD,eAAKtI,SAAU,CAAC,GAAI,KAAM,IAAQ4I,IAAaC,KAA/C,CAAqDtE,KAAM,CAAC,GAAI,EAAG,QACnE,kBAAC+D,GAAD,eACEtI,SAAU,CAAC,EAAG,GAAI,OACd4I,IAAaE,OAFnB,CAGEvE,KAAM,CAAC,GAAI,GAAI,GACfwE,SAAU5D,KAAK6D,GAAK,KAGtB,kBAACV,GAAD,eACEtI,SAAU,EAAE,IAAK,IAAK,OAClB4I,IAAaK,OAFnB,CAGE1E,KAAM,CAAC,IAAM,IAAM,KACnBwE,SAAU5D,KAAK6D,GAAK,KAEtB,kBAACV,GAAD,eACEtI,SAAU,EAAE,GAAI,IAAK,OACjB4I,IAAaK,OAFnB,CAGE1E,KAAM,CAAC,IAAM,IAAM,KACnBwE,SAAU5D,KAAK6D,GAAK,KAEtB,kBAACV,GAAD,eACEtI,SAAU,CAAC,GAAI,IAAK,OAChB4I,IAAaK,OAFnB,CAGE1E,KAAM,CAAC,IAAM,IAAM,KACnBwE,SAAU5D,KAAK6D,GAAK,KAEtB,kBAACV,GAAD,eACEtI,SAAU,CAAC,IAAK,IAAK,OACjB4I,IAAaK,OAFnB,CAGE1E,KAAM,CAAC,IAAM,IAAM,KACnBwE,SAAU5D,KAAK6D,GAAK,KAEtB,kBAACV,GAAD,eACEtI,SAAU,CAAC,EAAG,IAAK,KACf4I,IAAaK,OAFnB,CAGE1E,KAAM,CAAC,IAAK,IAAM,KAClBwE,SAAU5D,KAAK6D,GAAK,KAEtB,kBAACV,GAAD,eACEtI,SAAU,CAAC,GAAI,IAAK,KAChB4I,IAAaK,OAFnB,CAGE1E,KAAM,CAAC,IAAK,IAAM,KAClBwE,SAAU5D,KAAK6D,GAAK,KAEtB,kBAACV,GAAD,eACEtI,SAAU,CAAC,GAAI,GAAI,KACf4I,IAAaK,OAFnB,CAGE1E,KAAM,CAAC,IAAM,IAAK,KAClBwE,SAAU5D,KAAK6D,MAEjB,kBAACV,GAAD,eACEtI,SAAU,EAAE,GAAI,GAAI,KAChB4I,IAAaK,OAFnB,CAGE1E,KAAM,CAAC,IAAM,IAAK,KAClBwE,SAAU5D,KAAK6D,O,wBCxDhB,SAASE,KAAQ,IAAD,EACmBnH,oBAAS,GAD5B,mBACdzC,EADc,KACA6J,EADA,KAGrB5B,qBAAU,WACR,IAAMS,EAAOxJ,EAAUc,aAAa2I,UAAUkB,GAC9C,OAAO,kBAAMnB,EAAKG,iBACjB,IAEH,IAAM3F,EAAM4G,YAAU1D,gBAAqB2D,MARtB,EAUFC,aAAU,iBAAO,CAClCC,KAAM,EACN3C,KAAM,EACN4C,eAAe,EACfxJ,SAAU,CAAC,EAAG,EAAG,GACjB6G,UAAW,SAACC,GACNA,EAAE2C,KAAKC,SAASC,QAClB1C,EAAIjH,SAASkH,KAAK,KAAO,KAAO,UAjBjB,mBAUdrC,EAVc,KAUToC,EAVS,KA8BrB,OARAG,aAAS,SAACwC,GACHtK,IACH2H,EAAIjH,SAASkH,IAAoB,GAAhB0C,EAAMC,MAAMjJ,EAAwB,GAAhBgJ,EAAMC,MAAMhJ,EAAQ,MACzDoG,EAAI6C,SAAS5C,IAAI,EAAG,EAAG,EAAG,IAE5B1I,EAAU+B,kBAAkB,CAACK,EAAEiE,EAAIb,QAAQhE,SAASY,EAAGC,EAAEgE,EAAIb,QAAQhE,SAASa,OAI9E,0BAAMkJ,YAAU,EAACnC,eAAa,EAAC/C,IAAKA,GAClC,0CAAsB6C,OAAO,WAAWd,KAAM,CAAC,GAAK,GAAI,MACxD,0CAAsBpE,IAAKA,EAAKkF,OAAO,cCpCtC,SAASsC,KAAU,IAAD,EACJV,aAAU,iBAAO,CAClC1C,KAAM,IACNU,MAAO,CAAC,EAAG,EAAG,KACdtH,SAAU,CAAC,EAAG,EAAG,IACjBiK,gBAAiB,MALI,mBAChBpF,EADgB,KACXoC,EADW,OAQiBlF,mBAAS,QAR1B,mBAQfmI,EARe,KAQFC,EARE,OASuBpI,mBAAS,CAACnB,EAAE,EAAGC,EAAE,IATxC,mBASfL,EATe,KASCD,EATD,KAkCvB,SAAS6J,EAAmBC,GAAoC,IAApBC,EAAmB,uDAAL,IAClDC,EAAQF,EAAiB,EAO/B,OALIE,EACWF,GAAkBC,GAAeA,EAAcD,EAE/CA,EAAiBC,EAAcA,EAAcD,EAK9D,OAlCA9C,qBAAU,WACR/I,EAAUgC,eAAeyH,UAAU1H,KACnC,IAEF6G,aAAS,SAACwC,GACR,IAAMY,EAAmC,GAAhBZ,EAAMC,MAAMjJ,EAC/B6J,EAAmC,GAAhBb,EAAMC,MAAMhJ,EAC/B6J,EAAkBF,EAAmB3F,EAAIb,QAAQhE,SAASY,EAC1D+J,EAAkBF,EAAmB5F,EAAIb,QAAQhE,SAASa,EAC1D+J,EAASpK,EAAeI,EAAI,MAASiE,EAAIb,QAAQhE,SAASY,EAAI,MAC9DiK,EAASrK,EAAeK,EAAI,MAASgE,EAAIb,QAAQhE,SAASa,EAAI,MAC9DiK,EAA8C,KAApC,EAAI3F,KAAK4F,IAAIH,EAAQC,GAAS,IAAY,EACpDG,EAAU7F,KAAK4F,IAAID,EAAS,KAAO,GAAK,IAAM,EAC9CjF,EAAK,mBAAemF,EAAf,aAA2BA,EAA3B,KACXb,EAAetE,GAEfoB,EAAIjH,SAASkH,IACXrC,EAAIb,QAAQhE,SAASY,EAAIwJ,EAAmBM,GAC5C7F,EAAIb,QAAQhE,SAASa,EAAIuJ,EAAmBO,GAC5C,OAgBF,oCACE,0BAAM9F,IAAKA,EAAKkF,YAAU,GACxB,iCAAarC,OAAO,WAAWd,KAAM,CAAC,EAAG,EAAG,KAC5C,uCAAmBc,OAAO,WAAWC,WAAW,EAAM9B,MAAOqE,MCrD9D,SAASe,KACd,IAAMpG,EAAMJ,mBAMZ,OALAf,2BAAgB,WACdmB,EAAIb,QAAQkH,OAAOC,OAAS,IAAIzF,sBAA0B,IAAK,IAAK,KAAM,IAAK,GAAK,KACpFb,EAAIb,QAAQkH,OAAOE,QAAQnI,MAAQ,KACnC4B,EAAIb,QAAQkH,OAAOE,QAAQpI,OAAS,OACnC,IAED,oCACE,kCAAcqI,UAAW,MACzB,sCACExG,IAAKA,EACL7E,SAAU,CAAC,EAAG,EAAG,IACjBsL,qBAAoB,GACpBC,oBAAmB,KACnBxB,YAAU,K,gDCNdyB,GAAW,SAAWC,EAAgBC,EAAoBC,EAAgBC,GAE7EC,KAAKC,KAAMlO,WAESmO,IAAfC,MACJ3L,QAAQ4L,MAAO,iCAEhB,IAAIC,EAASF,KAEbpO,KAAKuO,SAAWC,gBAAcC,MAAOH,EAAOC,UAE5CvO,KAAKuJ,SAAW,IAAImF,iBAAgB,CAEnCH,SAAUvO,KAAKuO,SACfI,aAAcL,EAAOK,aACrBC,eAAgBN,EAAOM,sBAILT,IAAdH,IAA0BhO,KAAKuO,SAASP,UAAUrN,MAAQqN,QACnCG,IAAvBL,IAAmC9N,KAAKuO,SAASM,WAAWlO,MAAQmN,QACjDK,IAAnBJ,IAA+B/N,KAAKuO,SAASO,OAAOnO,MAAQoN,GAEjE/N,KAAKuO,SAASQ,WAAWpO,MAAQ,GACjCX,KAAKgP,OAAS,IAAIf,KAAKgB,eAAgBjP,KAAKuJ,WAI7CqE,GAASsB,UAAY3O,OAAO4O,OAAQ5O,OAAO6O,OAAQnB,KAAKiB,WAAa,CAEpEG,YAAazB,GAEb0B,OAAQ,SAAWC,EAAUC,EAAaC,EAAYC,GAErD1P,KAAKuO,SAAL,SAA4B5N,MAAQ8O,EAAWE,QAC/C3P,KAAKuO,SAAL,KAAwB5N,OAAS+O,EAE5B1P,KAAK4P,gBAETL,EAASM,gBAAiB,MAC1B7P,KAAKgP,OAAOM,OAAQC,KAIpBA,EAASM,gBAAiBL,GACrBxP,KAAK8P,OAAQP,EAASO,QAC3B9P,KAAKgP,OAAOM,OAAQC,OC3BvB,IAAIQ,GAAgB,CAClBxB,SAAU,CACRyB,SAAU,CAAErP,MAAO,MACnBsP,MAAO,CAAEtP,MAAO,MAChBuP,IAAK,CAAEvP,MAAO,GACdwP,OAAQ,CAAExP,MAAO,KACjByP,MAAO,CAAEzP,MAAO,KAChB0P,KAAM,CAAE1P,MAAO,KACf2P,OAAQ,CAAE3P,MAAO,KACjB4P,OAAQ,CAAE5P,MAAO,KACjB6P,aAAc,CAAE7P,MAAO,IACvB8P,aAAc,CAAE9P,MAAO,IACvB+P,MAAO,CAAE/P,MAAO,MAGlBgO,aAAa,gJAMbC,eAAe,2lDAgDb+B,GAAa,SAAUC,GACzB3C,KAAKC,KAAKlO,WACYmO,IAAlB4B,IAA6BtN,QAAQ4L,MAAM,kDAC/C,IAAIC,EAASyB,GACb/P,KAAKuO,SAAWC,gBAAcC,MAAMH,EAAOC,eAC3BJ,IAAZyC,IAAuBA,EAAU,IACrC5Q,KAAKuO,SAAL,MAAuB5N,MAAQX,KAAK6Q,kBAAkBD,GACtD5Q,KAAKuJ,SAAW,IAAImF,iBAAe,CACjCH,SAAUvO,KAAKuO,SACfI,aAAcL,EAAOK,aACrBC,eAAgBN,EAAOM,iBAEzB5O,KAAKuN,OAAS,IAAIuD,sBAAoB,EAAG,EAAG,GAAI,EAAG,EAAG,GACtD9Q,KAAK+Q,MAAQ,IAAIC,QACjBhR,KAAKiR,KAAO,IAAIC,OAAK,IAAIC,sBAAoB,EAAG,GAAI,MACpDnR,KAAKiR,KAAKG,eAAgB,EAC1BpR,KAAK+Q,MAAMzG,IAAItK,KAAKiR,MACpBjR,KAAKkN,OAAS,GCrGT,SAASmE,KAAU,IAAD,EACWlN,oBAAS,GADpB,mBAChBtB,EADgB,KACLf,EADK,KAEvBgE,2BAAgB,WACd,IAAMsE,EAAOxJ,EAAUiC,UAAUwH,UAAUvI,GAC3C,OAAO,kBAAMsI,EAAKG,iBACjB,IACH,IAAM+G,EAAWzK,mBANM,EAOY0K,cAA3BR,EAPe,EAOfA,MAAOS,EAPQ,EAORA,GAAI7K,EAPI,EAOJA,KAAK4G,EAPD,EAOCA,OAClBkE,EAASC,mBAAQ,kBAAM,IAAI5J,UAAcnB,EAAKtB,MAAOsB,EAAKvB,UAAS,CAACuB,IAI1E,OAHAgD,qBAAU,WAAW2H,EAASlL,QAAQD,QAAQQ,EAAKtB,MAAOsB,EAAKvB,UAAS,CAACuB,IACzE6C,aAAS,WACH8H,EAASlL,QAAQkJ,WAAU,GAE/B,oCAAgBrI,IAAKqK,EAAUtI,KAAM,CAACwI,IACpC,gCAAYG,YAAY,SAASZ,MAAOA,EAAOxD,OAAQA,IACvD,qCAAiBoE,YAAY,SAAS3I,KAAM,CAACyI,EAAQ,IAAM,GAAK,KAChE,8BAAUE,YAAY,SAAS9D,eAAgB,EAAG7E,KAAM,CAAC,IAAM,GAAK,MAAM,KAC1E,gCAAY2I,YAAY,SAASzE,OAAQrK,EAAY,EAAI,K,mMDuF/D8N,GAAWzB,UAAY3O,OAAO4O,OAAO5O,OAAO6O,OAAOnB,KAAKiB,WAAY,CAClEG,YAAasB,GAEbrB,OAAQ,SAAUC,EAAUC,EAAaC,EAAYC,EAAWkC,GAC9D,IAAM1E,EAAS3F,KAAKsK,IAAI,EAAG7R,KAAKkN,QAChClN,KAAKuO,SAAL,SAA0B5N,MAAQ8O,EAAWE,QAC7C3P,KAAKuO,SAAL,KAAsB5N,MAAQ4G,KAAKC,SAAW0F,EAC9ClN,KAAKuO,SAAL,IAAqB5N,MAAQ,EACzBuM,GACFlN,KAAKuO,SAAL,OAAwB5N,MAAS4G,KAAKC,SAAW,GAAM0F,EACvDlN,KAAKuO,SAAL,MAAuB5N,MAAQmR,OAAMC,WAAWxK,KAAK6D,GAAI7D,KAAK6D,IAAM8B,EACpElN,KAAKuO,SAAL,aAA8B5N,MAAQmR,OAAMC,UAAU,EAAG,GAAK7E,EAC9DlN,KAAKuO,SAAL,aAA8B5N,MAAQmR,OAAMC,UAAU,EAAG,GAAK7E,EAC9DlN,KAAKuO,SAAL,OAAwB5N,MAAQmR,OAAMC,WAAW,GAAK,IAAO7E,EAC7DlN,KAAKuO,SAAL,OAAwB5N,MAAQmR,OAAMC,WAAW,GAAK,IAAO7E,GACxDlN,KAAKuO,SAAL,IAAqB5N,MAAQ,EACpCX,KAAKiR,KAAK1H,SAAWvJ,KAAKuJ,SACtBvJ,KAAK4P,gBACPL,EAASM,gBAAgB,MACzBN,EAASD,OAAOtP,KAAK+Q,MAAO/Q,KAAKuN,UAEjCgC,EAASM,gBAAgBL,GACrBxP,KAAK8P,OAAOP,EAASO,QACzBP,EAASD,OAAOtP,KAAK+Q,MAAO/Q,KAAKuN,UAIrCsD,kBAAmB,SAAUD,GAI3B,IAHA,IAAIoB,EAAW,IAAIC,aAAarB,EAAUA,EAAU,GAChDvQ,EAASuQ,EAAUA,EAEdnH,EAAI,EAAGA,EAAIpJ,EAAQoJ,IAAK,CAC/B,IAAIyI,EAAMJ,OAAMC,UAAU,EAAG,GAC7BC,EAAa,EAAJvI,EAAQ,GAAKyI,EACtBF,EAAa,EAAJvI,EAAQ,GAAKyI,EACtBF,EAAa,EAAJvI,EAAQ,GAAKyI,EAGxB,IAAIvC,EAAU,IAAIwC,cAAYH,EAAUpB,EAASA,EAASwB,YAAWC,aAErE,OADA1C,EAAQ2C,aAAc,EACf3C,KClJX4C,YAAO,CAAEC,oBAAgBC,gBAAYC,qBAAiB9E,YAAU+C,gBCNzD,IAAMgC,GAAYnP,IAAOsB,IAAV,MAQf,SAAS8N,GAAT,GAAuB,EAAR3O,KAAS,IAAD,EACHE,mBAAS,GADN,mBACtBvC,EADsB,KACfiR,EADe,OAEW1O,mBAAS,GAFpB,mBAEtBtD,EAFsB,KAERsJ,EAFQ,OAGWhG,mBAAS,GAHpB,mBAGtBrD,EAHsB,KAGVgS,EAHU,KAU7B,OANAhN,2BAAgB,WACf,IAAMsE,EAAOxJ,EAAUgB,MAAMyI,UAAUwI,GAGvC,OAFAzI,EAAKE,IAAI1J,EAAUC,aAAawJ,UAAUF,IAC1CC,EAAKE,IAAI1J,EAAUE,WAAWuJ,UAAUyI,IACjC,kBAAM1I,EAAKG,iBAChB,IAEF,kBAACoI,GAAD,KACC,qCAAW/Q,GACX,qCAAWf,EAAe,GAC1B,qCAAWC,GACX,6BACC,kBAACiD,EAAD,CACCC,SAAU,WACTpD,EAAUW,YACVX,EAAUM,aAAaD,IAExBgD,KAAK,OACLN,SAAO,MChCL,SAASoP,GAAT,GAAiC,IAAhB3Q,EAAe,EAAfA,SAAUC,EAAK,EAALA,GAAK,EAEnBqJ,aAAU,iBAAO,CAC7BC,KAAM,EACN3C,KAAM,EACN5G,WACAwJ,eAAe,EACf3C,UAAW,SAACC,SAPmB,mBAE/BjC,EAF+B,KAE1BoC,EAF0B,KAgBnC,OAJAM,qBAAU,WACNN,EAAI2J,aAAa,CAAC,EAAE,EAAE,IAAI5Q,KAC1B,CAACA,EAASiH,IAEP,0BAAMyC,SAAU,CAAC3J,UAAW,OAAQE,MAAK8J,YAAU,EAACnC,eAAa,EAAC/C,IAAKA,GAC1E,0CAAsB6C,OAAO,WAAWd,KAAM,CAAC,GAAK,GAAI,MACxD,0CAAsBc,OAAO,cCjBrC,IAwCemJ,GAxCF,WAAO,IAAD,EACM9O,mBAAS,GAArB0O,EADM,oBAEP9B,EAAUQ,cAAVR,MACRpH,qBAAU,WACZ,IAAMS,EAAOxJ,EAAUgB,MAAMyI,UAAUwI,GACvC,OAAO,kBAAMzI,EAAKG,iBACb,IANY,MAQDzB,aAAO,WACjB,MAAO,CACHE,KAAM,CAAC,GAAI,GAAI,MACf5G,SAAU,CAAC,EAAG,EAAG,IACjB6G,UAAW,SAACC,GACR,GAA+C,IAA3CtI,EAAUiB,WAAWG,WAAW3B,OAChCO,EAAUe,gBAEV,CAAC,IACOmK,EAAa5C,EAAE2C,KAAfC,SACmB,SAAvBA,EAAS3J,WACT4O,EAAMmC,OAAOhK,EAAE2C,MACXjL,EAAUuC,UAAuD,IAA3CvC,EAAUiB,WAAWG,WAAW3B,OACtDO,EAAUe,YAGVf,EAAU0B,gBAAgBwJ,EAASzJ,MAIvC6G,EAAE2C,KAAKzJ,SAASkH,KAAK,KAAM,KAAM,KACjC1I,EAAUuC,SAASxD,MAAK,UArBrCsH,EARQ,oBAoCf,OAAO,0BAAMA,IAAKA,EAAK6E,SAAU,CAACC,QAAQ,MCZ/BoH,OA1Bf,SAAgBzP,GAAQ,IAAD,EACKS,oBAAS,GAA1BrC,EADY,sBAEUqC,oBAAS,GAFnB,mBAEdiP,EAFc,KAELC,EAFK,KAGhBpM,EAAMJ,mBACJyM,EAAqB/B,cAArB+B,iBAmBR,OAjBA3J,qBAAU,WACT,IAAMS,EAAOxJ,EAAUiC,UAAUwH,UAAUvI,GAI3C,OAHAC,YAAW,WAAOnB,EAAUkB,cAAa,KAAS,KAClDC,YAAW,WAAOsR,GAAW,KAAQ,MACrCC,EAAiBrM,EAAIb,SACd,kBAAMgE,EAAKG,iBAChB,CAAC+I,IAEJ9J,aAAS,WACJ4J,GAAWnM,EAAIb,QAAQhE,SAASuF,EAAI,GACvCV,EAAIb,QAAQhE,SAASuF,GAAK,IAE1B0L,GAAW,GAEZpM,EAAIb,QAAQmN,uBAGN,qDAAmBtM,IAAKA,EAAK7E,SAAU,CAAC,EAAG,EAAG,KAASsB,EAAvD,CAA8D8P,IAAK,GAAIC,IAAK,QCJ7E,SAASC,KAAQ,IAAD,EACDvP,mBAAS,GAArB0O,EADa,sBAEkB1O,oBAAS,GAF3B,mBAEfzC,EAFe,KAED6J,EAFC,OAGIpH,mBAAS,IAHb,mBAGfqE,EAHe,KAGRmL,EAHQ,OAIExP,mBAAS,GAJX,mBAIfwC,EAJe,KAITR,EAJS,KAMhByN,EAAkB/M,iBAAO,MAiB/B,OAfAnB,EAAckO,EAAiB,CAAEjN,OAAMR,YAEvCwD,qBAAU,WACT,IAAMS,EAAOxJ,EAAUgB,MAAMyI,UAAUwI,GAGvC,OAFAzI,EAAKE,IAAI1J,EAAUc,aAAa2I,UAAUkB,IAC1CnB,EAAKE,IAAI1J,EAAUiB,WAAWwI,UAAUsJ,IACjC,kBAAMvJ,EAAKG,iBAChB,IASF,oCACC,yBAAKlI,GAAG,OAAO0C,QARjB,WACMrD,GACJd,EAAUa,eAOT,yBAAKwF,IAAK2M,GACT,kBAAC,IAAD,CACC1P,MAAO,CAAEmB,MAAO,OAAQD,OAAQ,QAChCyO,WAAS,GAET,kBAAC,GAAD,MACA,kBAACxG,GAAD,MACA,kBAAC,IAAD,CACCyG,WAAY,GACZC,UAAW,KACXC,uBAAwB,CACvBC,SAAU,EACVC,YAAa,GAEdC,QAAS,CAAC,EAAG,EAAG,GAChBC,YAAY,EACZ/R,GAAG,eAEH,kBAAC0I,GAAD,MACA,kBAACd,GAAD,MACA,kBAACqB,GAAD,MACA,kBAACc,GAAD,MACA,kBAAC,GAAD,MACE5D,EAAM5D,KAAI,SAACpC,EAAUH,GACtB,OAAO,kBAAC0Q,GAAD,eAAOlO,IAAKxC,GAAQG,EAApB,CAA+BH,GAAIA,QAE3C,kBAACgP,GAAD,QAGF,kBAACuB,GAAD,S,sJCzEE,IAAMyB,GAAc7Q,IAAOsB,IAAV,MAQjB,SAASwP,GAAT,GAA0B,IAATrQ,EAAQ,EAARA,KACvB,OACC,kBAACoQ,GAAD,KACC,4BAAKpQ,I,iTCPD,IAAMsQ,GAAiB/Q,IAAOsB,IAAV,MAMd0P,GAAchR,IAAOsB,IAAV,MAQX2P,GAAQ,SAAC,GAAD,IAAGhV,EAAH,EAAGA,QAASiV,EAAZ,EAAYA,SAAUC,EAAtB,EAAsBA,eAAtB,OACpB,kBAACJ,GAAD,KACC,6BACC,qCAAW9U,EAAU,GACpBiV,GAAY,0CAAgBC,IAE7BD,EACA,kBAAC,EAAD,CACCzQ,KAAK,OACLD,SAAU,kBAAMpD,EAAUQ,YAAY3B,MAGvC,kBAAC+U,GAAD,KACC,6CAAmB/U,EAAU,EAA7B,iB,0KC9BJ,IAAMmV,GAAsBpR,IAAOsB,IAAV,MAQZ+P,GAAgB,SAAC,GAAD,IAAEC,EAAF,EAAEA,MAAO1L,EAAT,EAASA,SAAT,OACzB,kBAACwL,GAAD,KACI,kBAACN,GAAD,CAAOrQ,KAAM6Q,IACZ1L,EACD,kBAAC,EAAD,CACIpF,SAAU,WACNpD,EAAUM,aAAaD,IAE3BgD,KAAK,W,gICTjB,IAAM8Q,GAAYvR,IAAOsB,IAAV,MAMFkQ,GAAS,WAAO,IAAD,EACmB7Q,mBAAS,CAAC,IAD7B,mBACpBjE,EADoB,KACH+U,EADG,KAM3B,OAJAnP,2BAAgB,WACf,IAAMsE,EAAO3J,EAAYP,gBAAgBmK,UAAU4K,GACnD,OAAO,kBAAM7K,EAAKG,iBAChB,IAEF,kBAAC,GAAD,KACC,kBAAC+J,GAAD,CAAOrQ,KAAK,WACZ,kBAAC8Q,GAAD,KACE7U,EAAgB0E,KAAI,SAACsQ,EAAGzV,GACxB,OACC,kBAAC,GAAD,CACCoF,IAAKpF,EACLA,QAASA,EACTkV,eAAgBzU,EAAgBT,GAChCiV,UAAU,OAIZpU,EAAW6U,gBAAgBjV,GAAiB0E,KAAI,SAACsQ,EAAGE,GACpD,OACC,kBAAC,GAAD,CACCvQ,IAAKuQ,EACL3V,QAAS2V,EAAQlV,EAAgBG,OAAS,EAC1CsU,eAAgB,EAChBD,UAAU,UCpCV,SAASW,KACf,IAAMC,EACL1U,EAAUqB,iBAAiBtB,MAAQ,IAAML,EAAWZ,MAAMiB,MAAMN,OAC3DkV,EAAcD,EAAS,aAAe,aAC5C,OACC,yBAAKpR,MAAO,CAAEsR,OAAQ,SACrB,qCAAWF,EAAS,UAAY,UAChC,sCAAY1U,EAAUE,WAAWH,OACjC,kBAACoD,EAAD,CACCC,SAAU,WACJsR,GAIJ1U,EAAUW,YACVX,EAAUS,sBACVT,EAAUM,aAAaD,KALvBL,EAAUW,YACVX,EAAUM,aAAaD,KAOzBgD,KAAMsR,K,qYClBV,IAAME,GAAkBjS,IAAOsB,IAAV,MAEf4Q,GAAa,SAAC,GAAD,IAAEZ,EAAF,EAAEA,MAAF,OAAa,4BAAKA,IAE/Ba,GAAwBnS,IAAOsB,IAAV,KACrB1B,GAKAwS,GAAkB,SAAC,GAAD,IAAEC,EAAF,EAAEA,MAAF,OACpB,kBAACF,GAAD,KACI,4BAAKE,GACL,kBAAC,KAAD,CAAQ3R,MAAO,CAAC4R,WAAY,WAG9BC,GAAsBvS,IAAOsB,IAAV,KACnB1B,GAMA4S,GAAgB,SAAC,GAAD,IAAElB,EAAF,EAAEA,MAAM1L,EAAR,EAAQA,SAAR,OAClB,kBAAC2M,GAAD,KACI,kBAAC,GAAD,CAAYjB,MAAOA,IAClB1L,IAGI6M,GAAW,kBACpB,kBAAC,GAAD,CAAenB,MAAO,YAClB,kBAACW,GAAD,KACI,kBAAC,GAAD,CAAeX,MAAO,SAClB,kBAAC,GAAD,CAAiBe,MAAO,UACxB,kBAAC,GAAD,CAAiBA,MAAO,Y,4KCrCxC,IAAMK,GAAe1S,IAAOsB,IAAV,MAOLqR,GAAQ,kBACjB,kBAAC,GAAD,CAAerB,MAAO,SAClB,kBAACoB,GAAD,KACI,wFACA,sEACA,kDAAuB,uBAAGE,KAAK,MAAR,QAAvB,kDCLNC,I,MAAU,SAAC,GACf,OADiC,EAAhBlV,WAEf,KAAKF,EACH,OAAO,kBAACyF,EAAD,MACT,KAAKzF,EACH,OAAO,kBAAC,GAAD,MACT,KAAKA,EACH,OAAO,kBAACyS,GAAD,MACT,KAAKzS,EACH,OAAO,kBAACoU,GAAD,MACT,KAAKpU,EACD,OAAO,kBAAC,GAAD,MACX,KAAKA,EACD,OAAO,kBAAC,GAAD,MACX,QACE,OAAO,kBAACyF,EAAD,SAIE,SAAS4P,KAAO,IAAD,EACMnS,mBAASlD,GADf,mBACrBE,EADqB,KACVD,EADU,KAO5B,OALAyI,qBAAU,WACR,IAAMS,EAAOxJ,EAAUO,UAAUkJ,UAAUnJ,GAC3C,OAAO,kBAAMkJ,EAAKG,iBACjB,IAGD,yBAAKgM,UAAU,QACb,kBAAC,GAAD,CAASpV,UAAWA,KAK1BqV,IAASlH,OAAO,kBAACgH,GAAD,MAASG,SAASC,eAAe,W","file":"static/js/main.5d0fad6f.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/underline.765dc17d.png\";","module.exports = __webpack_public_path__ + \"static/media/game_title.62e617f5.png\";","module.exports = __webpack_public_path__ + \"static/media/brick.eed03f13.mp3\";","module.exports = __webpack_public_path__ + \"static/media/wall.4c0964a4.mp3\";","module.exports = __webpack_public_path__ + \"static/media/cross.00397b42.jpg\";","import { BehaviorSubject } from 'rxjs';\nimport * as LEVELS from '../data/levels.json';\n\nclass LevelStore {\n  constructor() {\n    if (!LevelStore.instance) {\n      LevelStore.instance = this;\n      this.tiles = new BehaviorSubject([]);\n    }\n  }\n\n  buildLevel = (levelId) => {\n    this.tiles.next(LEVELS.levels[levelId].layers.flat());\n  };\n\n  getLockedLevels(bestscoreValues){\n    const levels = LEVELS.levels;\n    return [...levels].splice(bestscoreValues.length, levels.length - 1);\n  }\n}\n\nexport const levelStore = new LevelStore();\nObject.freeze(LevelStore);\n","import { BehaviorSubject } from 'rxjs';\nimport { gameStore } from './gameStore';\n\nclass PlayerStore {\n  constructor() {\n    if (!PlayerStore.instance) {\n      PlayerStore.instance = this;\n      this.bestscoreValues = new BehaviorSubject([0]);\n      this.achievements = new BehaviorSubject([]);\n    }\n\n    return PlayerStore.instance;\n  }\n\n  //TODO: call\n  addHighscoreValue = () => {\n    const bestscoreValues = [...this.bestscoreValues.value];\n    bestscoreValues[gameStore.currentLevel.value] = gameStore.scoreValue.value;\n    bestscoreValues[gameStore.currentLevel.value + 1] = 0;\n    this.bestscoreValues.next(bestscoreValues);\n  };\n}\n\nexport const playerStore = new PlayerStore();\nObject.freeze(playerStore);\n","/** @format */\n\nimport { Subject, BehaviorSubject } from 'rxjs';\nimport { levelStore } from './levelStore';\nimport { playerStore } from './playerStore';\n\nexport const GAME_STATES = {\n\tWELCOME: 0,\n\tLEVEL_CHOICE: 1,\n\tGAME: 2,\n\tLEVEL_DEBRIEF: 3,\n\tSETTINGS: 4,\n\tABOUT: 5,\n};\nclass GameStore {\n\tconstructor() {\n\t\tif (!GameStore.instance) {\n\t\t\tGameStore.instance = this;\n\t\t\tthis.gameState = new BehaviorSubject(GAME_STATES.WELCOME);\n\t\t\tthis.nbBrickDestroyed = new BehaviorSubject(0);\n\t\t\tthis.ball2dPosition = new BehaviorSubject({x:0,y:0});\n\t\t\tthis.lifes = new BehaviorSubject(3);\n\t\t\tthis.bonusBalls = new BehaviorSubject([]);\n\t\t\tthis.scoreValue = new BehaviorSubject(0);\n\t\t\tthis.inGame = new Subject(false);\n\t\t\tthis.ballLaunched = new Subject(false);\n\t\t\tthis.ballLost = new Subject(false);\n\t\t\tthis.currentLevel = new BehaviorSubject(1);\n\t\t\tthis.glitching = new Subject(true);\n\t\t}\n\t\treturn GameStore.instance;\n\t}\n\tsetGameState = (gameState) => {\n\t\tif (gameState === GAME_STATES.LEVEL_CHOICE) {\n\t\t}\n\t\tthis.gameState.next(gameState);\n\t};\n\tlaunchLevel = (levelId) => {\n\t\tthis.currentLevel.next(levelId);\n\t\tthis.gameState.next(GAME_STATES.GAME);\n\t};\n\tincreaseLevelNumber = () => {\n\t\tthis.currentLevel.next(this.currentLevel.value + 1);\n\t};\n\tlaunchGame = () => {\n\t\tthis.resetGame();\n\t\tthis.inGame.next(true);\n\t};\n\tlaunchBall = () => {\n\t\tthis.ballLaunched.next(true);\n\t};\n\tresetBall = () => {\n\t\tif (this.lifes.value > 0) {\n\t\t\tthis.lifes.next(this.lifes.value - 1);\n\t\t\tthis.ballLaunched.next(false);\n\t\t\tthis.bonusBalls.next([]);\n\t\t\tthis.setGlitching(true);\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.setGlitching(false);\n\t\t\t\tthis.lifes.next(this.lifes.getValue() - 1);\n\t\t\t}, 300);\n\t\t} else {\n\t\t\tthis.gameState.next(GAME_STATES.LEVEL_DEBRIEF);\n\t\t}\n\t};\n\tresetGame = () => {\n\t\tthis.lifes.next(3);\n\t\tthis.bonusBalls.next([]);\n\t\tthis.nbBrickDestroyed.next(0);\n\t\tthis.scoreValue.next(0);\n\t\tthis.inGame.next(false);\n\t\tthis.ballLaunched.next(false);\n\t};\n\taddBonusBall = (bonusType, position, id) => {\n\t\tthis.bonusBalls.next([...this.bonusBalls.getValue(),{bonusType, position, id: this.bonusBalls.getValue().length}])\n\t}\n\tremoveBonusBall = (id) => {\n\t\tthis.bonusBalls.next(this.bonusBalls.getValue().filter(bonusItem => {\n\t\t\tconsole.log(id, bonusItem )\n\t\t\treturn bonusItem.id !== id}))\n\t}\n\tsetBall2dPosition = (value) => this.ball2dPosition.next(value);\n\tsetGlitching = (value) => this.glitching.next(value);\n\tincreaseScoreValue = (scoreValue) => {\n\t\tthis.scoreValue.next(this.scoreValue.value + scoreValue);\n\t\tif (this.nbBrickDestroyed.value + 1 === levelStore.tiles.value.length) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tplayerStore.addHighscoreValue();\n\t\t\t\tthis.gameState.next(GAME_STATES.LEVEL_DEBRIEF);\n\t\t\t},1000)\n\t\t}\n\t\tthis.nbBrickDestroyed.next(this.nbBrickDestroyed.value + 1);\n\t};\n}\n\nexport const gameStore = new GameStore();\nObject.freeze(gameStore);\n","export const flexCenter = { \t\n\tdisplay: \"flex\",\n\tjustifyContent: \"center\",\n}","/** @format */\n\nimport React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { useTransition, animated } from 'react-spring'; \n\nimport { flexCenter } from '../constants'\n\nimport underline from '../../../assets/images/underline.png';\n\nconst StyledButton = styled.button`\n\tcursor: pointer;\n\tbackground: transparent;\n\tletter-spacing: 0.1rem;\n\tcolor: ${(props) => (props.enabled ? '#e6007e' : '#dec99e')};\n\tborder-style: none;\n\ttransition: 0.5s all ease-out;\n\topacity: 0.75;\n\tfont-size: 2em;\n\talign-items: center;\n\tflex-direction: column;\n\t${flexCenter}\n\t${(props) => props.enabled && '&:hover { text-shadow: 2px 2px #dec99f; opacity: 1 }'}\n\t${(props) => props.enabled && '&:hover img {filter: drop-shadow(0 0 30px rgba(255,255,255,1)); opacity: 1 }'}\n`;\n\nconst Underline = styled.img`\n\topacity: 0.5;\n\ttop: 1.25em;\n\t${(props) => `width: ${props.textLength * 0.9}em;`}\n}\n`\n\nexport function Button({\n\tcallback,\n\ttext,\n\tenabled = true,\n\tstyle = {},\n}) {\n\tconst [ show ] = useState(false)\n\tconst transitions = useTransition(show, null, {\n\t\tfrom: {  opacity: 0, ...flexCenter },\n\t\tenter: { opacity: 1 },\n\t\tleave: { opacity: 0 },\n\t\tconfig: { duration: 1500 }\n\t\t\n\t})\n\treturn transitions.map(({ key, props }) => \n\t\t<animated.div key={key} style={props}>\t\n\t\t\t<StyledButton\n\t\t\t\tenabled={enabled}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tif (enabled) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tstyle={{ ...style }}\n\t\t\t>\n\t\t\t\t{text}\n\t\t\t{ enabled && <Underline src={underline} textLength={text.length} alt={\"\"} />}\n\t\t\t</StyledButton>\n\t\t</animated.div>\n\t);\n}\n\nconst buttonStyle = {\n\theight: '5%',\n\twidth: '15rem',\n\tborder: 'none',\n\ttransform: 'rotate(-3deg)',\n\tfontSize: '3rem',\n\t'align-items': 'center',\n};\n\nexport const MenuButton = ({text, style, callback}) => \n\t<Button\n\t\tcallback={callback}\n\t\ttext={text}\n\t\tstyle={{...style, buttonStyle}}\n\t/>;\n","/** @format */\nimport { useLayoutEffect } from 'react';\n\nexport function useFullScreen(container, sizeHook, fillHeight = true) {\n\tuseLayoutEffect(() => {\n\t\tfunction updateSize() {\n\t\t\tif (\n\t\t\t\t(fillHeight && window.innerHeight > window.innerWidth) ||\n\t\t\t\t(!fillHeight && window.innerHeight < window.innerWidth)\n\t\t\t) {\n\t\t\t\tsizeHook.setSize(window.width);\n\t\t\t\tcontainer.current.style.width = `${window.innerWidth}px`;\n\t\t\t\tcontainer.current.style.height = `${window.innerWidth}px`;\n\t\t\t} else {\n\t\t\t\tcontainer.current.style.width = `${window.innerHeight}px`;\n\t\t\t\tcontainer.current.style.height = `${window.innerHeight}px`;\n\t\t\t\tsizeHook.setSize(window.innerHeight);\n\t\t\t}\n\t\t}\n\t\twindow.addEventListener('resize', updateSize);\n\t\tupdateSize();\n\t\treturn () => window.removeEventListener('resize', updateSize);\n\t}, [fillHeight, container, sizeHook]);\n\treturn sizeHook;\n}\n","/** @format */\n\nimport React, { useState, useRef } from 'react';\nimport styled from 'styled-components';\nimport { useTransition, animated } from 'react-spring'; \nimport { gameStore, GAME_STATES } from '../subjects/gameStore';\nimport { MenuButton } from '../components/hud/common/Button';\nimport background from '../assets/images/game_title.png';\n\nimport { useFullScreen } from '../hooks/windowResize';\nimport { flexCenter } from '../components/hud/constants';\n\nconst BackgroundContainer = styled.div`\n\tbackground: url(${background}) no-repeat center center fixed;\n\tbackground-size: cover;\n\t${flexCenter}\n\tposition: absolute;\n\tflex-direction: column;\n\talign-items: center; \n`;\n\nconst SubMenuButtons = styled.div`\n\tmargin-top: 2.5em;\n\tdisplay: flex;\n\tjustify-content: space-evenly;\n\twidth: 100%;\n`\n\nexport function Welcome() {\n\tconst [ size, setSize ] = useState(0);\n\tconst [ show ] = useState(false);\n\tconst backgroundContainer = useRef(null);\n\tuseFullScreen(backgroundContainer, { size, setSize }, false);\n\t\n\tconst transitions = useTransition(show, null, {\n\t\tfrom: {  opacity: 0, display: 'flex',flexDirection: 'column', alignItems: 'center',marginTop: '25%' },\n\t\tenter: { opacity: 1 },\n\t\tleave: { opacity: 0 },\n\t\tconfig: { duration: 2000 }\n\t\t\n\t})\n\treturn transitions.map(({ key, props }) => \n\t\t<BackgroundContainer ref={backgroundContainer}>\n\t\t\t<animated.div key={key} style={props}>\t\n\t\t\t\t<MenuButton \n\t\t\t\t\tstyle={{ marginTop: '25%', fontSize: '3.5em'}} \n\t\t\t\t\ttext=\"PLAY\" \n\t\t\t\t\tcallback={() => gameStore.setGameState(GAME_STATES.LEVEL_CHOICE)}/>\n\t\t\t\t<SubMenuButtons>\n\t\t\t\t\t<MenuButton \n\t\t\t\t\t\tkey={0}\n\t\t\t\t\t\ttext=\"SETTINGS\" \n\t\t\t\t\t\tcallback={() => {gameStore.setGameState(GAME_STATES.SETTINGS)}}/>\n\t\t\t\t\t<MenuButton \n\t\t\t\t\t\tkey={1} \n\t\t\t\t\t\ttext=\"ABOUT\" \n\t\t\t\t\t\tcallback={() => gameStore.setGameState(GAME_STATES.ABOUT)}/>\n\t\t\t\t</SubMenuButtons>\n\t\t\t</animated.div>\n\t\t</BackgroundContainer>\n\t);\n}\n","import * as THREE from 'three';\n\nexport const createParticals = (particleCount, ref, size) => {\n\tconst vertices = []\n\t\n\tfor (let p = 0; p < particleCount; p++) {\n\t\tconst pX = Math.random() * size.x - size.x + ref.current.position.x + size.x / 2;\n\t\tconst pY = Math.random() * size.y - size.y + ref.current.position.y + size.y / 2;\n\t\tconst pZ = ref.current.position.z - 0.5;\n\t\tvertices.push(pX, pY, pZ);\n\t}\n\tconst geometry = new THREE.BufferGeometry();\n\tgeometry.setAttribute( 'position', new THREE.Float32BufferAttribute( vertices, 3 ) );\n\treturn geometry;\n}\n\nexport const createMaterial = (color) =>\n\tnew THREE.PointsMaterial({\n\t\tcolor,\n\t\tsize: 0.9,\n\t\ttransparent: true,\n\t\tdepthTest: false,\n\t\tsizeAttenuation: true,\n\t\topacity: 0.9,\n\t});","/** @format */\nimport React, { useEffect } from 'react';\n\nimport * as THREE from 'three';\nimport { useFrame } from 'react-three-fiber';\nimport { useBox } from 'use-cannon';\nimport UIFx from 'uifx';\n\nimport brick from '../../assets/sounds/brick.mp3';\n\nimport { gameStore } from '../../subjects/gameStore';\nimport { createMaterial, createParticals } from '../../utils/particles';\n\nexport function Tile({ \n        position, \n        strength,\n        color,\n        fillColor,\n        scoreValue, \n        id, \n        bonus,\n        size = [2, 2, 2], \n    }) {\n\n\tlet particlesPool = [];\n\n\tconst initialStrength = strength;\n\tconst hitSound = new UIFx(brick);\n\n\tconst [ref, api] = useBox(() => {\n\t\treturn {\n\t\t\ttype:'Kinematic',\n\t\t\targs: size.map((x) => x / 2),\n\t\t\tposition,\n\t\t\tonCollide: (e) => {\n\t\t\t\thitSound.play();\n                strength--;\n                ref.current.children.push(particlesPool[strength])\n                if (strength <= 0) {\n                    api.position.set(-1000, -1000, -100);\n                    gameStore.increaseScoreValue(scoreValue);\n                    if (bonus){\n                        gameStore.addBonusBall(bonus,position)\n                    }\n                } else {\n                    ref.current.children[0].material.opacity = strength / initialStrength\n                }\n\t\t\t},\n\t\t};\n\t});\n\n\tuseFrame(() => {\n\t\tfor (let i = 1 ; i < ref.current.children.length; i++){\n\t\t\tif (ref.current.children[i] && ref.current.children[i].material.opacity > 0) {\n\t\t\t\tref.current.children[i].material.opacity -= 0.0075;\n\t\t\t\tref.current.children[i].scale.x += 0.05;\n\t\t\t\tref.current.children[i].scale.y += 0.05;\n\t\t\t}\n\t\t}\n\t});\n\n\tuseEffect(() => {\n        for (let i = 0; i < strength; i++){\n            const material = createMaterial(color);\n            const geometry = createParticals(75, ref, {x: size[0], y: size[1]});\n            const particles = new THREE.Points(geometry, material);\n            particles.customRotation = 0;\n            particlesPool.push(particles)\n        }\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, []);\n\n\treturn (\n        <>\n            <mesh key={id} ref={ref} >\n                <boxGeometry attach=\"geometry\" args={size} />\n                <meshStandardMaterial\n                    attach=\"material\"\n                    wireframe={true}\n                    color={color}\n                />\n                <mesh receiveShadow>\n                    <boxGeometry attach=\"geometry\" args={size.map((i) => i * 0.99)} />\n                    <meshStandardMaterial attach=\"material\" color={fillColor} />\n                </mesh>\n            </mesh> \n        </>\n\t);\n}\n","import React, { useEffect, useState } from 'react';\n\nimport * as TILES from '../../data/gameBalanceData.json'\nimport { levelStore } from '../../subjects/levelStore';\nimport { gameStore } from '../../subjects/gameStore';\nimport { Tile } from './Tile.js';\n\nexport function Tiles() {\n  const [tiles, setTiles] = useState([]);\n\n  const [currentLevel, setCurrentLevel] = useState(gameStore.currentLevel.value);\n  useEffect(() => {\n    const subs = gameStore.currentLevel.subscribe(setCurrentLevel);\n    subs.add(levelStore.tiles.subscribe(setTiles));\n    levelStore.buildLevel(currentLevel);\n    return () => subs.unsubscribe();\n  }, [currentLevel]);\n\n  return tiles.map((brick, i) => (\n    <Tile \n      key={i} \n      id={i} \n      position={brick.position} \n      {...TILES.tiles[brick.userDataType]} \n      bonus={ brick.bonus }/>\n  ));\n}\n","/** @format */\n\nimport React from 'react';\nimport { useBox } from 'use-cannon';\nimport UIFx from 'uifx';\n\nimport wall from '../../assets/sounds/wall.mp3';\n\nexport function Box({ \n\t\tposition, \n\t\tcolor,\n\t\tcornerData,\n\t\tid,\n\t\tsize = [2, 2, 2], \n\t}) {\n\t\n\tconst hitSound = new UIFx(wall);\n\t//TODO corner Object\n\tconst isCorner = isNaN(cornerData);\n\n\tconst [ref] = useBox(() => {\n\t\treturn {\n\t\t\ttype: isCorner ? 'Static' : 'Kinematic',\n\t\t\targs: size,\n\t\t\tposition,\n\t\t\tonCollide: (e) => {\n\t\t\t\thitSound.play();\n\t\t\t},\n\t\t}});\n\n\treturn <mesh key={id} ref={ref} receiveShadow >\n\t\t\t<boxGeometry attach=\"geometry\" args={size} receiveShadow />\n\t\t\t<meshStandardMaterial attach=\"material\" receiveShadow color={color} />\n\t\t</mesh>\n}\n","import React from 'react';\nimport { Box } from './Box.js';\n\nimport * as BRICKS from '../../data/gameBalanceData.json';\n\nexport function Walls() {\n  return (\n    <>\n      <Box position={[-12.5, 0, 0]} {...BRICKS.walls.side} size={[1, 25, 130]} />\n      <Box position={[12.5, 0, 0]} {...BRICKS.walls.side} size={[1, 25, 130]} />\n      <Box position={[0, 12.5, 0]} {...BRICKS.walls.side} size={[25, 1, 130]} />\n      <Box position={[0, -12.5, 0]} {...BRICKS.walls.side} size={[25, 1, 130]} />\n      <Box\n        position={[0, 0, -12.5]}\n        {...BRICKS.walls.ground}\n        size={[25, 25, 1]}\n        rotation={Math.PI / 2}\n      />\n\n      <Box\n        position={[-12, -12, -12.5]}\n        {...BRICKS.walls.corner}\n        size={[0.25, 0.25, 200]}\n        rotation={Math.PI / 2}\n      />\n      <Box\n        position={[-12, 12, -12.5]}\n        {...BRICKS.walls.corner}\n        size={[0.25, 0.25, 200]}\n        rotation={Math.PI / 2}\n      />\n      <Box\n        position={[12, 12, -12.5]}\n        {...BRICKS.walls.corner}\n        size={[0.25, 0.25, 200]}\n        rotation={Math.PI / 2}\n      />\n      <Box\n        position={[12, -12, -12.5]}\n        {...BRICKS.walls.corner}\n        size={[0.25, 0.25, 200]}\n        rotation={Math.PI / 2}\n      />\n      <Box\n        position={[0, 12, -12]}\n        {...BRICKS.walls.corner}\n        size={[130, 0.25, 0.25]}\n        rotation={Math.PI / 2}\n      />\n      <Box\n        position={[0, -12, -12]}\n        {...BRICKS.walls.corner}\n        size={[130, 0.25, 0.25]}\n        rotation={Math.PI / 2}\n      />\n      <Box\n        position={[12, 0, -12]}\n        {...BRICKS.walls.corner}\n        size={[0.25, 120, 0.25]}\n        rotation={Math.PI}\n      />\n      <Box\n        position={[-12, 0, -12]}\n        {...BRICKS.walls.corner}\n        size={[0.25, 120, 0.25]}\n        rotation={Math.PI}\n      />\n    </>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport { useSphere } from 'use-cannon';\nimport { useFrame, useLoader } from 'react-three-fiber';\n\nimport { gameStore } from '../../subjects/gameStore';\n\nimport * as THREE from 'three';\nimport cross from '../../assets/textures/cross.jpg';\n\nexport function Ball() {\n  const [ballLaunched, setBallLaunched] = useState(false);\n\n  useEffect(() => {\n    const subs = gameStore.ballLaunched.subscribe(setBallLaunched);\n    return () => subs.unsubscribe();\n  }, []);\n\n  const map = useLoader(THREE.TextureLoader, cross);\n\n  const [ref, api] = useSphere(() => ({\n    mass: 1,\n    args: 1,\n    fixedRotation: false,\n    position: [0, 0, 0],\n    onCollide: (e) => {\n      if (e.body.userData.isRoof){\n        api.position.set(-1000, -1000, -1000)\n      }\n    },\n  }));\n\n  useFrame((state) => {\n    if (!ballLaunched) {\n      api.position.set(state.mouse.x * 10, state.mouse.y * 10, 17.6);\n      api.velocity.set(0, 0, 0, 1);\n    }\n    gameStore.setBall2dPosition({x:ref.current.position.x, y:ref.current.position.y })\n  });\n\n  return (\n    <mesh castShadow receiveShadow ref={ref}>\n      <sphereBufferGeometry attach=\"geometry\" args={[0.5, 64, 64]} />\n      <meshStandardMaterial map={map} attach=\"material\" />\n    </mesh>\n  );\n}\n","import React, { useEffect, useState } from 'react';\n\nimport { useFrame } from 'react-three-fiber';\nimport { useSphere } from 'use-cannon';\nimport { gameStore } from '../../subjects/gameStore';\n\nexport function Paddle() {\n  const [ref, api] = useSphere(() => ({\n    args: 1.3,\n    scale: [1, 1, 0.01],\n    position: [0, 0, 10],\n    sleepSpeedLimit: 4,\n  }));\n\n  const [ paddleColor, setPaddleColor ] = useState('#fff')\n  const [ ball2dPosition, setBall2dPosition ] = useState({x:0, y:0})\n  \n  useEffect(()=> {\n    gameStore.ball2dPosition.subscribe(setBall2dPosition)\n  },[])\n\n  useFrame((state) => {\n    const currentMousePosX = state.mouse.x * 10;\n    const currentMousePosY = state.mouse.y * 10;\n    const diffCurrentPosX = currentMousePosX - ref.current.position.x;\n    const diffCurrentPosY = currentMousePosY - ref.current.position.y;\n    const diffX = (ball2dPosition.x + 12.5) - (ref.current.position.x + 12.5) \n    const diffY = (ball2dPosition.y + 12.5) - (ref.current.position.y + 12.5) \n    const factor = (1 - Math.abs(diffX + diffY) / 25) * 255 | 0 \n    const factor2 = Math.abs(factor - 190) / 55 * 255 | 0\n    const color = `rgb(255, ${factor2}, ${factor2})`;\n    setPaddleColor(color);\n\n    api.position.set(\n      ref.current.position.x + clampMouseMovement(diffCurrentPosX),\n      ref.current.position.y + clampMouseMovement(diffCurrentPosY),\n      18\n    );\n  });\n\n  function clampMouseMovement(diffCurrentPos, maxVelocity = 1.5) {\n    const isNeg = diffCurrentPos < 0;\n    let diffToAddX = 0;\n    if (isNeg) {\n      diffToAddX = diffCurrentPos < -maxVelocity ? -maxVelocity : diffCurrentPos;\n    } else {\n      diffToAddX = diffCurrentPos > maxVelocity ? maxVelocity : diffCurrentPos;\n    }\n    return diffToAddX;\n  }\n  \n  return (\n    <>\n      <mesh ref={ref} castShadow>\n        <boxGeometry attach=\"geometry\" args={[5, 5, 1]} />\n        <meshBasicMaterial attach=\"material\" wireframe={true} color={paddleColor} />\n      </mesh>\n    </>\n  );\n}\n","import React, { useRef, useLayoutEffect } from 'react';\nimport * as THREE from 'three';\nexport function Lights() {\n  const ref = useRef();\n  useLayoutEffect(() => {\n    ref.current.shadow.camera = new THREE.OrthographicCamera(-100, 100, 100, -100, 0.5, 100);\n    ref.current.shadow.mapSize.width = 2048;\n    ref.current.shadow.mapSize.height = 2048;\n  }, []); \n  return (\n    <>\n      <ambientLight intensity={0.75} />\n      <directionalLight\n        ref={ref}\n        position={[0, 0, 25]}\n        shadow-camera-near={0.1}\n        shadow-camera-far={1500}\n        castShadow\n      />\n    </>\n  );\n}\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport {\n\tShaderMaterial,\n\tUniformsUtils\n} from 'three';   \nimport { Pass } from 'three/examples/jsm/postprocessing/Pass.js';\nimport { FilmShader } from \"three/examples/jsm/shaders/FilmShader.js\";\n\nvar FilmPass = function ( noiseIntensity, scanlinesIntensity, scanlinesCount, grayscale ) {\n\n\tPass.call( this );\n\n\tif ( FilmShader === undefined )\n\t\tconsole.error( \"FilmPass relies on FilmShader\" );\n\n\tvar shader = FilmShader;\n\n\tthis.uniforms = UniformsUtils.clone( shader.uniforms );\n\n\tthis.material = new ShaderMaterial( {\n\n\t\tuniforms: this.uniforms,\n\t\tvertexShader: shader.vertexShader,\n\t\tfragmentShader: shader.fragmentShader\n\n\t} );\n\n\tif ( grayscale !== undefined )\tthis.uniforms.grayscale.value = grayscale;\n\tif ( scanlinesIntensity !== undefined ) this.uniforms.sIntensity.value = scanlinesIntensity;\n\tif ( scanlinesCount !== undefined ) this.uniforms.sCount.value = scanlinesCount;\n    \n\tthis.uniforms.nIntensity.value = 0.1;\n\tthis.fsQuad = new Pass.FullScreenQuad( this.material );\n\n};\n\nFilmPass.prototype = Object.assign( Object.create( Pass.prototype ), {\n\n\tconstructor: FilmPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer, deltaTime /*, maskActive */ ) {\n\n\t\tthis.uniforms[ \"tDiffuse\" ].value = readBuffer.texture;\n\t\tthis.uniforms[ \"time\" ].value += deltaTime;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget( writeBuffer );\n\t\t\tif ( this.clear ) renderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t}\n\n} );\n\nexport { FilmPass };\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\n/**\n * @author felixturner / http://airtight.cc/\n *\n * RGB Shift Shader\n * Shifts red and blue channels from center in opposite directions\n * Ported from http://kriss.cx/tom/2009/05/rgb-shift/\n * by Tom Butterworth / http://kriss.cx/tom/\n *\n * amount: shift distance (1 is width of input)\n * angle: shift angle in radians\n */\n\nimport {\n  DataTexture,\n  FloatType,\n  Math as _Math,\n  Mesh,\n  OrthographicCamera,\n  PlaneBufferGeometry,\n  RGBFormat,\n  Scene,\n  ShaderMaterial,\n  UniformsUtils,\n} from 'three';\nimport { Pass } from 'three/examples/jsm/postprocessing/Pass.js';\n\nvar DigitalGlitch = {\n  uniforms: {\n    tDiffuse: { value: null }, //diffuse texture\n    tDisp: { value: null }, //displacement texture for digital glitch squares\n    byp: { value: 0 }, //apply the glitch ?\n    amount: { value: 0.08 },\n    angle: { value: 0.02 },\n    seed: { value: 0.02 },\n    seed_x: { value: 0.02 }, //-1,1\n    seed_y: { value: 0.02 }, //-1,1\n    distortion_x: { value: 0.5 },\n    distortion_y: { value: 0.6 },\n    col_s: { value: 0.05 },\n  },\n\n  vertexShader: `varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }`,\n\n  fragmentShader: `uniform int byp; //should we apply the glitch\n    uniform sampler2D tDiffuse;\n    uniform sampler2D tDisp;\n    uniform float amount;\n    uniform float angle;\n    uniform float seed;\n    uniform float seed_x;\n    uniform float seed_y;\n    uniform float distortion_x;\n    uniform float distortion_y;\n    uniform float col_s;\n    varying vec2 vUv;\n    float rand(vec2 co){\n      return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n    }\n    void main() {\n      if(byp<1) {\n        vec2 p = vUv;\n        float xs = floor(gl_FragCoord.x / 0.5);\n        float ys = floor(gl_FragCoord.y / 0.5);\n        //based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch\n        vec4 normal = texture2D (tDisp, p*seed*seed);\n        if(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {\n          if(seed_x>0.){\n            p.y = 1. - (p.y + distortion_y);\n          }\n          else {\n            p.y = distortion_y;\n          }\n        }\n        p.x+=normal.x*seed_x*(seed/5.);\n        p.y+=normal.y*seed_y*(seed/5.);\n        //base from RGB shift shader\n        vec2 offset = amount * vec2( cos(angle), sin(angle));\n        vec4 cr = texture2D(tDiffuse, p + offset);\n        vec4 cga = texture2D(tDiffuse, p);\n        vec4 cb = texture2D(tDiffuse, p - offset);\n        gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n        //add noise\n        vec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.05);\n        gl_FragColor = gl_FragColor+ snow;\n      }\n      else {\n        gl_FragColor=texture2D (tDiffuse, vUv);\n      }\n    }`,\n};\n\nvar GlitchPass = function (dt_size) {\n  Pass.call(this);\n  if (DigitalGlitch === undefined) console.error('THREE.GlitchPass relies on THREE.DigitalGlitch');\n  var shader = DigitalGlitch;\n  this.uniforms = UniformsUtils.clone(shader.uniforms);\n  if (dt_size === undefined) dt_size = 64;\n  this.uniforms['tDisp'].value = this.generateHeightmap(dt_size);\n  this.material = new ShaderMaterial({\n    uniforms: this.uniforms,\n    vertexShader: shader.vertexShader,\n    fragmentShader: shader.fragmentShader,\n  });\n  this.camera = new OrthographicCamera(-1, 1, 1, -1, 0, 1);\n  this.scene = new Scene();\n  this.quad = new Mesh(new PlaneBufferGeometry(2, 2), null);\n  this.quad.frustumCulled = false; // Avoid getting clipped\n  this.scene.add(this.quad);\n  this.factor = 0;\n};\n\nGlitchPass.prototype = Object.assign(Object.create(Pass.prototype), {\n  constructor: GlitchPass,\n\n  render: function (renderer, writeBuffer, readBuffer, deltaTime, maskActive) {\n    const factor = Math.max(0, this.factor);\n    this.uniforms['tDiffuse'].value = readBuffer.texture;\n    this.uniforms['seed'].value = Math.random() * factor; //default seeding\n    this.uniforms['byp'].value = 0;\n    if (factor) {\n      this.uniforms['amount'].value = (Math.random() / 90) * factor;\n      this.uniforms['angle'].value = _Math.randFloat(-Math.PI, Math.PI) * factor;\n      this.uniforms['distortion_x'].value = _Math.randFloat(0, 1) * factor;\n      this.uniforms['distortion_y'].value = _Math.randFloat(0, 1) * factor;\n      this.uniforms['seed_x'].value = _Math.randFloat(-0.3, 0.3) * factor;\n      this.uniforms['seed_y'].value = _Math.randFloat(-0.3, 0.3) * factor;\n    } else this.uniforms['byp'].value = 1;\n    this.quad.material = this.material;\n    if (this.renderToScreen) {\n      renderer.setRenderTarget(null);\n      renderer.render(this.scene, this.camera);\n    } else {\n      renderer.setRenderTarget(writeBuffer);\n      if (this.clear) renderer.clear();\n      renderer.render(this.scene, this.camera);\n    }\n  },\n\n  generateHeightmap: function (dt_size) {\n    var data_arr = new Float32Array(dt_size * dt_size * 3);\n    var length = dt_size * dt_size;\n\n    for (var i = 0; i < length; i++) {\n      var val = _Math.randFloat(0, 1);\n      data_arr[i * 3 + 0] = val;\n      data_arr[i * 3 + 1] = val;\n      data_arr[i * 3 + 2] = val;\n    }\n\n    var texture = new DataTexture(data_arr, dt_size, dt_size, RGBFormat, FloatType);\n    texture.needsUpdate = true;\n    return texture;\n  },\n});\n\nexport { GlitchPass };\n","import React, { useRef, useLayoutEffect, useState, useMemo, useEffect } from 'react';\nimport { useFrame, useThree, extend } from 'react-three-fiber';\nimport * as THREE from 'three';\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer';\n\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass';\nimport { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass';\nimport { FilmPass } from './FilmPass';\n\nimport { GlitchPass } from './GlitchPass';\n\nimport { gameStore } from '../../subjects/gameStore';\n\nextend({ EffectComposer, RenderPass, UnrealBloomPass, FilmPass, GlitchPass });\n\nexport function Effect() {\n  const [glitching, setGlitching] = useState(true);\n  useLayoutEffect(() => {\n    const subs = gameStore.glitching.subscribe(setGlitching);\n    return () => subs.unsubscribe();\n  }, []);\n  const composer = useRef();\n  const { scene, gl, size,camera } = useThree();\n  const aspect = useMemo(() => new THREE.Vector2(size.width, size.height), [size]);\n  useEffect(() => void composer.current.setSize(size.width, size.height), [size]);\n  useFrame(() => {\n        composer.current.render()},1)\n  return (\n    <effectComposer ref={composer} args={[gl]}>\n      <renderPass attachArray=\"passes\" scene={scene} camera={camera} />\n      <unrealBloomPass attachArray=\"passes\" args={[aspect, 0.25, 0.2, 0]} />\n      <filmPass attachArray=\"passes\" noiseIntensity={0} args={[0.35, 0.6, 1500, false]} />\n      <glitchPass attachArray=\"passes\" factor={glitching ? 1 : 0} />\n    </effectComposer>\n  );\n}\n","/** @format */\n\nimport React, { useState, useLayoutEffect } from 'react';\nimport styled from 'styled-components';\nimport { Button } from './common/Button';\n\nimport { gameStore, GAME_STATES } from '../../subjects/gameStore';\nexport const StyledDiv = styled.div`\n\tposition: absolute;\n\ttop: 0;\n\tmargin: 3em 1em 3em -12em;\n\tbackground-color: rgba(0, 0, 0, 0.4);\n\tpadding: 1em;\n`;\n\nexport function Hud({ text }) {\n\tconst [lifes, setLifes] = useState(3);\n\tconst [currentLevel, setCurrentLevel] = useState(1);\n\tconst [scoreValue, setGamescoreValue] = useState(0);\n\tuseLayoutEffect(() => {\n\t\tconst subs = gameStore.lifes.subscribe(setLifes);\n\t\tsubs.add(gameStore.currentLevel.subscribe(setCurrentLevel));\n\t\tsubs.add(gameStore.scoreValue.subscribe(setGamescoreValue));\n\t\treturn () => subs.unsubscribe();\n\t}, []);\n\treturn (\n\t\t<StyledDiv>\n\t\t\t<p>Lifes: {lifes}</p>\n\t\t\t<p>Level: {currentLevel + 1}</p>\n\t\t\t<p>Score: {scoreValue}</p>\n\t\t\t<div>\n\t\t\t\t<Button\n\t\t\t\t\tcallback={() => {\n\t\t\t\t\t\tgameStore.resetGame();\n\t\t\t\t\t\tgameStore.setGameState(GAME_STATES.LEVEL_CHOICE);\n\t\t\t\t\t}}\n\t\t\t\t\ttext=\"Back\"\n\t\t\t\t\tenabled\n\t\t\t\t></Button>\n\t\t\t</div>\n\t\t</StyledDiv>\n\t);\n}\n","/** @format */\nimport React, { useEffect } from 'react';\n\nimport { useSphere } from 'use-cannon';\n\nexport function Bonus({ position, id}) {\n    \n\tconst [ref, api] = useSphere(() => ({\n        mass: 1,\n        args: 1,\n        position,\n        fixedRotation: false,\n        onCollide: (e) => {\n          //console.log('bonus colliding', e)\n        },\n      }));\n\n    useEffect(() => {\n        api.applyImpulse([0,0,10],position);\n      },[position,api]);\n      \n    return <mesh userData={{bonusType: \"ball\", id}} castShadow receiveShadow ref={ref}>\n        <sphereBufferGeometry attach=\"geometry\" args={[0.5, 64, 64]} />\n        <meshStandardMaterial attach=\"material\" />\n    </mesh>\n}\n","import React, { useEffect, useState } from 'react'\nimport { useThree } from 'react-three-fiber';\nimport { useBox } from 'use-cannon';\n\nimport { gameStore } from '../../subjects/gameStore';\n\nconst Roof = () => {\n    const [, setLifes] = useState(3);\n    const { scene } = useThree();\n    useEffect(() => {\n\t\tconst subs = gameStore.lifes.subscribe(setLifes);\n\t\treturn () => subs.unsubscribe();\n    }, []);\n    \n    const [ref] = useBox(() => {\n        return {\n            args: [28, 28, 0.001],\n            position: [0, 0, 45],\n            onCollide: (e) => {\n                if (gameStore.bonusBalls.getValue().length === 0){\n                    gameStore.resetBall();\n                }\n                else{\n                    const { userData } = e.body;\n                    if (userData.bonusType === 'ball'){\n                        scene.remove(e.body)\n                        if (gameStore.ballLost && gameStore.bonusBalls.getValue().length === 1){\n                            gameStore.resetBall();\n                        }\n                        else{\n                            gameStore.removeBonusBall(userData.id)\n                        }\n                    }\n                    else{\n                        e.body.position.set(-1000,-1000,-1000)\n                        gameStore.ballLost.next(true)\n\n                    }\n                }\n            },\n        }});\n        \n    return <mesh ref={ref} userData={{isRoof: true}}/>\n}\t\n\n\nexport default Roof;\n","import React, { useEffect, useRef, useState } from \"react\"\nimport { useFrame, useThree } from \"react-three-fiber\"\nimport { gameStore } from \"../../subjects/gameStore\"\n\nfunction Camera(props) {\n\tconst [ , setGlitching ] = useState(true)\n\tconst [ zooming, setZooming ] = useState(false)\n\tconst ref = useRef()\n\tconst { setDefaultCamera } = useThree()\n\t\n\tuseEffect(() => { \n\t\tconst subs = gameStore.glitching.subscribe(setGlitching);\n\t\tsetTimeout(() => {gameStore.setGlitching(false)}, 1000)\n\t\tsetTimeout(() => {setZooming(true)}, 1500)\n\t\tsetDefaultCamera(ref.current)\n\t\treturn () => subs.unsubscribe();\n\t}, [setDefaultCamera])\n\t\n\tuseFrame(() => {\n\t\tif (zooming && ref.current.position.z > 45){\n\t\t\tref.current.position.z -= 0.75\n\t\t} else {\n\t\t\tsetZooming(false)\n\t\t}\n\t\tref.current.updateMatrixWorld()\n\t})\n\t\n\treturn <perspectiveCamera ref={ref} position={[0, 0, 85]} {...props} fov={45} far={157} />\n}\n\nexport default Camera;","/** @format */\n\nimport React, { useEffect, useState, useRef } from 'react';\n\nimport { Canvas } from 'react-three-fiber';\nimport { Physics } from 'use-cannon';\n\nimport { gameStore } from '../subjects/gameStore';\n\nimport { Tiles } from '../components/game/Tiles';\nimport { Walls } from '../components/game/Walls';\nimport { Ball } from '../components/game/Ball';\nimport { Paddle } from '../components/game/Paddle';\nimport { Lights } from '../components/game/Lights';\nimport { Effect } from '../components/vfx/Effect';\n\nimport { Hud } from '../components/hud/Hud';\n\nimport { useFullScreen } from '../hooks/windowResize';\nimport { Bonus } from '../components/game/Bonus';\nimport Roof from '../components/game/Roof';\nimport Camera from '../components/game/Camera';\n\nexport function Game() {\n\tconst [, setLifes] = useState(3);\n\tconst [ballLaunched, setBallLaunched] = useState(false);\n\tconst [bonus, setBonus] = useState([]);\n\tconst [size, setSize] = useState(0);\n\n\tconst canvasContainer = useRef(null);\n\n\tuseFullScreen(canvasContainer, { size, setSize });\n\n\tuseEffect(() => {\n\t\tconst subs = gameStore.lifes.subscribe(setLifes);\n\t\tsubs.add(gameStore.ballLaunched.subscribe(setBallLaunched));\n\t\tsubs.add(gameStore.bonusBalls.subscribe(setBonus));\n\t\treturn () => subs.unsubscribe();\n\t}, []);\n\n\tfunction handleClick() {\n\t\tif (!ballLaunched) {\n\t\t\tgameStore.launchBall();\n\t\t} \n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<div id=\"game\" onClick={handleClick}>\n\t\t\t\t<div ref={canvasContainer}>\n\t\t\t\t\t<Canvas\n\t\t\t\t\t\tstyle={{ width: '100%', height: '100%' }}\n\t\t\t\t\t\tshadowMap\n\t\t\t\t\t>\n\t\t\t\t\t\t<Camera />\n\t\t\t\t\t\t<Lights />\n\t\t\t\t\t\t<Physics\n\t\t\t\t\t\t\titerations={20}\n\t\t\t\t\t\t\ttolerance={0.0001}\n\t\t\t\t\t\t\tdefaultContactMaterial={{\n\t\t\t\t\t\t\t\tfriction: 0,\n\t\t\t\t\t\t\t\trestitution: 1,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tgravity={[0, 0, 0]}\n\t\t\t\t\t\t\tallowSleep={false}\n\t\t\t\t\t\t\tid=\"gamePhysics\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Walls />\n\t\t\t\t\t\t\t<Tiles />\n\t\t\t\t\t\t\t<Ball />\n\t\t\t\t\t\t\t<Paddle />\n\t\t\t\t\t\t\t<Roof />\n\t\t\t\t\t\t\t{ bonus.map((bonusItem,id) => {\n\t\t\t\t\t\t\t\treturn <Bonus key={id} {...bonusItem} id={id}/>\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t<Effect />\n\t\t\t\t\t\t</Physics>\n\t\t\t\t\t</Canvas>\n\t\t\t\t\t<Hud />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","/** @format */\n\nimport React from 'react';\nimport styled from 'styled-components';\n\nexport const StyledTitle = styled.div`\n\th1 {\n\t\twidth: 100%;\n\t\ttext-align: center;\n\t\tfont-size: 4em;\n\t}\n`;\n\nexport function Title({ text }) {\n\treturn (\n\t\t<StyledTitle>\n\t\t\t<h1>{text}</h1>\n\t\t</StyledTitle>\n\t);\n}\n","/** @format */\n\nimport React from 'react';\nimport styled from 'styled-components';\n\nimport { gameStore } from '../../subjects/gameStore';\n\nimport { MenuButton } from './common/Button';\n\nexport const LevelContainer = styled.div`\n\tjustify-content: space-evenly;\n\tgrid-row: 1;\n\tdisplay: flex;\n`;\n\nexport const LevelLocked = styled.div`\n\tjustify-content: space-evenly;\n\tgrid-row: 1;\n\tdisplay: flex;\n\talign-self: center;\n`;\n\n\nexport const Level = ({ levelId, unlocked, highscoreValue }) => \n\t<LevelContainer>\n\t\t<div>\n\t\t\t<h2>Level {levelId + 1}</h2>\n\t\t\t{unlocked && <h3>Highscore: {highscoreValue}</h3>}\n\t\t</div>\n\t\t{unlocked ? (\n\t\t\t<MenuButton\n\t\t\t\ttext=\"Play\" \n\t\t\t\tcallback={() => gameStore.launchLevel(levelId)} />\n\t\t\n\t\t) : (\n\t\t\t<LevelLocked>\n\t\t\t\t<div>FINISH LEVEL {levelId + 1} TO UNLOCK</div>\n\t\t\t</LevelLocked>\n\t\t)}\n\t</LevelContainer>\n\n","import React from 'react';\nimport styled from 'styled-components';\nimport { gameStore, GAME_STATES } from '../../../subjects/gameStore';\nimport { MenuButton } from './Button';\nimport { Title } from './Title';\n\nconst StyledPageContainer = styled.div`\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\tcolor: #5a55ff;\n`;\n\nexport const PageContainer = ({title, children}) => \n    <StyledPageContainer>\n        <Title text={title} />\n        {children}\n        <MenuButton\n            callback={() => {\n                gameStore.setGameState(GAME_STATES.WELCOME);\n            }}\n            text=\"Back\"\n        />\n    </StyledPageContainer>","/** @format */\n\nimport React, { useLayoutEffect, useState } from 'react';\nimport styled from 'styled-components';\n\nimport { playerStore } from '../subjects/playerStore';\n\nimport { Title } from '../components/hud/common/Title';\n\nimport { Level } from '../components/hud/Level';\nimport { levelStore } from '../subjects/levelStore';\nimport { PageContainer } from '../components/hud/common/PageContainer';\n\nconst LevelList = styled.div`\n\ttext-align: center;\n\theight: 65%;\n\twidth: 100%;\n`;\n\nexport const Levels = () => {\n\tconst [bestscoreValues, setBestscoreValues] = useState([0]);\n\tuseLayoutEffect(() => {\n\t\tconst subs = playerStore.bestscoreValues.subscribe(setBestscoreValues);\n\t\treturn () => subs.unsubscribe();\n\t}, []);\n\treturn (\n\t\t<PageContainer>\n\t\t\t<Title text=\"LEVELS\" />\n\t\t\t<LevelList>\n\t\t\t\t{bestscoreValues.map((_, levelId) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Level\n\t\t\t\t\t\t\tkey={levelId}\n\t\t\t\t\t\t\tlevelId={levelId}\n\t\t\t\t\t\t\thighscoreValue={bestscoreValues[levelId]}\n\t\t\t\t\t\t\tunlocked={true}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t\t{levelStore.getLockedLevels(bestscoreValues).map((_, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Level\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tlevelId={index + bestscoreValues.length - 1}\n\t\t\t\t\t\t\thighscoreValue={0}\n\t\t\t\t\t\t\tunlocked={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</LevelList>\n\t\t</PageContainer>\n\t);\n};\n","/** @format */\n\nimport React from 'react';\n\nimport { gameStore, GAME_STATES } from '../subjects/gameStore';\nimport { levelStore } from '../subjects/levelStore';\n\nimport { Button } from '../components/hud/common/Button';\n\nexport function LevelDebrief() {\n\tconst winned =\n\t\tgameStore.nbBrickDestroyed.value + 1 === levelStore.tiles.value.length;\n\tconst buttonLabel = winned ? 'Next Level' : 'Play again';\n\treturn (\n\t\t<div style={{ margin: 'auto' }}>\n\t\t\t<h2>Level {winned ? 'Cleared' : 'Failed'}</h2>\n\t\t\t<h3>Score: {gameStore.scoreValue.value}</h3>\n\t\t\t<Button\n\t\t\t\tcallback={() => {\n\t\t\t\t\tif (!winned) {\n\t\t\t\t\t\tgameStore.resetGame();\n\t\t\t\t\t\tgameStore.setGameState(GAME_STATES.LEVEL_CHOICE);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tgameStore.resetGame();\n\t\t\t\t\t\tgameStore.increaseLevelNumber();\n\t\t\t\t\t\tgameStore.setGameState(GAME_STATES.GAME);\n\t\t\t\t\t} \n\t\t\t\t}}\n\t\t\t\ttext={buttonLabel}/>\n\t\t\t\t\n\t\t\t\n\t\t</div>\n\t);\n}\n","/** @format */\n\nimport React from 'react';\nimport styled from 'styled-components';\nimport Slider from 'rc-slider';\nimport 'rc-slider/assets/index.css';\n\nimport { PageContainer } from '../components/hud/common/PageContainer';\nimport { flexCenter } from '../components/hud/constants';\n\nconst SettingsContent = styled.div``\n\nconst PanelTitle = ({title}) => <h2>{title}</h2>\n\nconst StyledSliderContainer = styled.div`\n    ${flexCenter};\n    align-items:center;\n    width: 100%;\n`\n\nconst SliderContainer = ({label}) => \n    <StyledSliderContainer>\n        <h3>{label}</h3>\n        <Slider style={{marginLeft: \"1em\"}}/>\n    </StyledSliderContainer>\n\nconst StyledSettingsPanel = styled.div`\n    ${flexCenter};\n    align-items:center;\n    flex-direction: column;\n    width: 70%;\n    margin: auto;\n`\nconst SettingsPanel = ({title,children}) => \n    <StyledSettingsPanel>\n        <PanelTitle title={title}/>\n        {children}\n    </StyledSettingsPanel>\n\nexport const Settings = () => \n    <PageContainer title={\"SETTINGS\"}>\n        <SettingsContent>\n            <SettingsPanel title={\"AUDIO\"}>\n                <SliderContainer label={'MUSIC'}/>\n                <SliderContainer label={'VFX'}/>\n            </SettingsPanel>\n        </SettingsContent>\n    </PageContainer>\n\n","/** @format */\n\nimport React from 'react';\nimport styled from 'styled-components';\n\nimport { PageContainer } from '../components/hud/common/PageContainer';\n\nconst AboutContent = styled.div`\n    display: flex;\n    align-items: center;\n    flex-direction: column; \n    font-size: 1.5em;\n`\n\nexport const About = () => \n    <PageContainer title={\"ABOUT\"}>\n        <AboutContent>\n            <p>This game is a side project started during my confinment.</p>\n            <p>Made with react-three-fiber, canonjs, .</p>\n            <p>A special thanks to <a href=\"/#\">Mat'</a> for the graphic assets and visual advices!</p>\n        </AboutContent>\n    </PageContainer>\n\n","import React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { gameStore, GAME_STATES } from './subjects/gameStore';\n\nimport { Welcome } from './pages/Welcome';\nimport { Game } from './pages/Game';\nimport { Levels } from './pages/Levels';\nimport { LevelDebrief } from './pages/LevelDebrief';\nimport { Settings } from './pages/Settings';\nimport { About } from './pages/About';\n\nimport './styles.css';\n\nconst Arkeact = ({ gameState }) => {\n  switch (gameState) {\n    case GAME_STATES.WELCOME:\n      return <Welcome />;\n    case GAME_STATES.LEVEL_CHOICE:\n      return <Levels />;\n    case GAME_STATES.GAME:\n      return <Game />;\n    case GAME_STATES.LEVEL_DEBRIEF:\n      return <LevelDebrief />;\n    case GAME_STATES.SETTINGS:\n        return <Settings />;\n    case GAME_STATES.ABOUT:\n        return <About />;\n    default:\n      return <Welcome />;\n  }\n};\n\nexport default function App() {\n  const [gameState, setGameState] = useState(GAME_STATES.WELCOME);\n  useEffect(() => {\n    const subs = gameStore.gameState.subscribe(setGameState);\n    return () => subs.unsubscribe();\n  }, []);\n\n  return (\n    <div className=\"main\">\n      <Arkeact gameState={gameState} />\n    </div>\n  );\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}